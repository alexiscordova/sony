<!DOCTYPE html>  <html> <head>   <title>sony-audio.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="debug_toggle.html">                 debug_toggle.js               </a>                                           <a class="source" href="form-actions.html">                 form-actions.js               </a>                                           <a class="source" href="jodo.rangecontrol.1.4.html">                 jodo.rangecontrol.1.4.js               </a>                                           <a class="source" href="jquery.shuffle.html">                 jquery.shuffle.js               </a>                                           <a class="source" href="jquery.simpleknob.html">                 jquery.simpleknob.js               </a>                                           <a class="source" href="jquery.simplescroll.html">                 jquery.simplescroll.js               </a>                                           <a class="source" href="sony-audio.html">                 sony-audio.js               </a>                                           <a class="source" href="sony-carousel-fade.html">                 sony-carousel-fade.js               </a>                                           <a class="source" href="sony-carousel.html">                 sony-carousel.js               </a>                                           <a class="source" href="sony-draggable.html">                 sony-draggable.js               </a>                                           <a class="source" href="sony-evenheights.html">                 sony-evenheights.js               </a>                                           <a class="source" href="sony-fade.html">                 sony-fade.js               </a>                                           <a class="source" href="sony-favorites.html">                 sony-favorites.js               </a>                                           <a class="source" href="sony-img-sequence.html">                 sony-img-sequence.js               </a>                                           <a class="source" href="sony-modal.html">                 sony-modal.js               </a>                                           <a class="source" href="sony-navigationdots.html">                 sony-navigationdots.js               </a>                                           <a class="source" href="sony-paddles.html">                 sony-paddles.js               </a>                                           <a class="source" href="sony-scroller.html">                 sony-scroller.js               </a>                                           <a class="source" href="sony-scrolltotop.html">                 sony-scrolltotop.js               </a>                                           <a class="source" href="sony-sequencer.html">                 sony-sequencer.js               </a>                                           <a class="source" href="sony-stickyheaders.html">                 sony-stickyheaders.js               </a>                                           <a class="source" href="sony-stickynav.html">                 sony-stickynav.js               </a>                                           <a class="source" href="sony-stickytabs.html">                 sony-stickytabs.js               </a>                                           <a class="source" href="sony-tab.html">                 sony-tab.js               </a>                                           <a class="source" href="sony-timer.html">                 sony-timer.js               </a>                                           <a class="source" href="sony-video.html">                 sony-video.js               </a>                                           <a class="source" href="sony-viewport.html">                 sony-viewport.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               sony-audio.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre>
</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Sony Audio (SonyAudio) Component</h2>

<ul>
<li><strong>Class:</strong> SonyAudio</li>
<li><strong>Version:</strong> 0.1</li>
<li><strong>Author:</strong> George Pantazis</li>
</ul>

<p>A shared interface and initializer for the SoundManager2 Library,
for use on Sony.com.</p>

<p>You may provide a set of different <code>sources</code> that can be toggled between,
but note that these are intended to demonstrate sound effects, and not
different bitrates; HTML5 Audio may incorrectly report file lengths and
positions, particularly for longer tracks.</p>

<p>You must provide a <code>default</code> source, as in the first example below.</p>

<p><em>Example Usage:</em></p>

<pre><code> var SonyAudio = require('secondary/index').sonyAudio;

 var Audio = new SonyAudio({
   sources: {
     default: 'foo.mp3'
   }
 });

 Audio.play();
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
define(<span class="keyword">function</span>(require){

  <span class="string">'use strict'</span>;

  <span class="keyword">var</span> $ = require(<span class="string">'jquery'</span>),
      sm = require(<span class="string">'soundManager'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p><code>SonyAudioController</code> prototype is the global sound player. All instances of <code>module</code> create an independent
instance of SonyAudio's API that interface back to the <code>SonyAudioController</code> object.</p>             </td>             <td class="code">               <div class="highlight"><pre>
  <span class="keyword">var</span> SonyAudioController = <span class="keyword">function</span>(){

    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    self.init();
  };

  SonyAudioController.prototype = {

    constructor: SonyAudioController,

    init: <span class="keyword">function</span>() {

      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      sm.setup({
        flashVersion: <span class="number">9</span>,
        debugMode: <span class="literal">false</span>,
        debugFlash: <span class="literal">false</span>,
        url: <span class="string">'swf'</span>,
        useFastPolling: <span class="literal">true</span>,
        flashPollingInterval: <span class="number">200</span>,
        useHighPerformance: <span class="literal">true</span>,
        preferFlash: <span class="literal">false</span>
      });

      <span class="keyword">return</span> self;
    }

  };

  <span class="keyword">var</span> _controller,
      _moduleCount = <span class="number">0</span>,
      _currentModule;

  <span class="keyword">var</span> module = <span class="function"><span class="keyword">function</span> <span class="params">(config)</span> {</span>

    _moduleCount = _moduleCount + <span class="number">1</span>;

    <span class="keyword">var</span> moduleId = <span class="string">'sonyAudio-'</span> + _moduleCount,
        currentTime = <span class="number">0</span>,
        currentSound,
        onPause,
        onPlay;

    <span class="keyword">if</span> ( !_controller ) {
      _controller = <span class="keyword">new</span> SonyAudioController();
    }

    onPause = <span class="keyword">function</span>() {
      currentTime = <span class="keyword">this</span>.position;

      <span class="keyword">if</span> ( config.onpause ) {
        config.onpause();
      }
    };

    onPlay = <span class="keyword">function</span>() {
      <span class="keyword">if</span> ( config.onplay ) {
        config.onplay();
      }
    };

    sm.onready(<span class="keyword">function</span>(){
      <span class="keyword">for</span> ( <span class="keyword">var</span> i <span class="keyword">in</span> config.sources ) {

        sm.createSound({
          id: moduleId + <span class="string">'-'</span> + i,
          url: config.sources[i],
          autoLoad: <span class="literal">true</span>,
          autoPlay: <span class="literal">false</span>,
          onpause: onPause,
          onplay: onPlay,
          onresume: onPlay
        });
      }

      currentSound = sm.getSoundById(moduleId + <span class="string">'-default'</span>);
    });

    <span class="keyword">var</span> api = {

</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p><code>Audio.play()</code>: Play the sound.</p>

<ul>
<li><code>source</code>: the key string corresponding to one of the audio sources. If not specified,
        plays the previously loaded source.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>
      play: <span class="keyword">function</span>(source) {

        <span class="keyword">var</span> self = <span class="keyword">this</span>;

        <span class="keyword">if</span> ( source ) {
          currentSound = sm.getSoundById(moduleId + <span class="string">'-'</span> + source);
        }

        self.pause();

        currentSound.setPosition(currentTime).play();

        <span class="keyword">return</span> self;
      },

</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p><code>Audio.pause()</code>: Pause all sound. To prevent audio collisions, all audio is stopped when
                 this method is called.</p>             </td>             <td class="code">               <div class="highlight"><pre>
      pause: <span class="keyword">function</span>() {

        <span class="keyword">var</span> self = <span class="keyword">this</span>;

        sm.pauseAll();

        <span class="keyword">return</span> self;
      }
    };

    <span class="keyword">return</span> api;
  };

  <span class="keyword">return</span> module;
});

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 