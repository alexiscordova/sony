<!DOCTYPE html>  <html> <head>   <title>sony-carousel-fade.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="debug_toggle.html">                 debug_toggle.js               </a>                                           <a class="source" href="form-actions.html">                 form-actions.js               </a>                                           <a class="source" href="jodo.rangecontrol.1.4.html">                 jodo.rangecontrol.1.4.js               </a>                                           <a class="source" href="jquery.shuffle.html">                 jquery.shuffle.js               </a>                                           <a class="source" href="jquery.simpleknob.html">                 jquery.simpleknob.js               </a>                                           <a class="source" href="jquery.simplescroll.html">                 jquery.simplescroll.js               </a>                                           <a class="source" href="sony-carousel-fade.html">                 sony-carousel-fade.js               </a>                                           <a class="source" href="sony-carousel.html">                 sony-carousel.js               </a>                                           <a class="source" href="sony-draggable.html">                 sony-draggable.js               </a>                                           <a class="source" href="sony-evenheights.html">                 sony-evenheights.js               </a>                                           <a class="source" href="sony-favorites.html">                 sony-favorites.js               </a>                                           <a class="source" href="sony-navigationdots.html">                 sony-navigationdots.js               </a>                                           <a class="source" href="sony-paddles.html">                 sony-paddles.js               </a>                                           <a class="source" href="sony-scroller.html">                 sony-scroller.js               </a>                                           <a class="source" href="sony-scrolltotop.html">                 sony-scrolltotop.js               </a>                                           <a class="source" href="sony-sequencer.html">                 sony-sequencer.js               </a>                                           <a class="source" href="sony-stickyheaders.html">                 sony-stickyheaders.js               </a>                                           <a class="source" href="sony-stickynav.html">                 sony-stickynav.js               </a>                                           <a class="source" href="sony-stickytabs.html">                 sony-stickytabs.js               </a>                                           <a class="source" href="sony-tab.html">                 sony-tab.js               </a>                                           <a class="source" href="sony-video.html">                 sony-video.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               sony-carousel-fade.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre>
</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Sony Chapters (SonyChapters) Module</h2>

<ul>
<li><strong>Class:</strong> SonyCarouselFade</li>
<li><strong>Version:</strong> 0.1</li>
<li><strong>Modified:</strong> 04/22/2013</li>
<li><strong>Author:</strong> Steve Davis</li>
<li><strong>Dependencies:</strong> jQuery 1.7+</li>
</ul>

<p>This was originally a fork of the SonyCarousel module, with the intention from the
developer that we'd integrate it into the main SonyCarousel module later. I no longer
think that's a great idea; these carousels are so much more basic, it seems wasteful
to initialize the much more robust carousel code onto them when they don't need it.
I've pared this down to more or less the essentials for a crossfade, but it still needs
work, as noted below. More likely than not it should just be rewritten.</p>             </td>             <td class="code">               <div class="highlight"><pre>
define(<span class="keyword">function</span>(require){

  <span class="string">'use strict'</span>;

  <span class="keyword">var</span> $ = require(<span class="string">'jquery'</span>),
      Modernizr = require(<span class="string">'modernizr'</span>),
      iQ = require(<span class="string">'iQ'</span>),
      Settings = require(<span class="string">'require/sony-global-settings'</span>),
      Utilities = require(<span class="string">'require/sony-global-utilities'</span>);

  <span class="keyword">var</span> _id = <span class="number">0</span>;

  <span class="keyword">var</span> SonyCarouselFade = <span class="keyword">function</span>($element, options){
    <span class="keyword">var</span> self = <span class="keyword">this</span>;

    $.extend(self, {}, $.fn.sonyCarouselFade.defaults, options, $.fn.sonyCarouselFade.settings);

    self.currentSlide = <span class="number">0</span>;
    self.id = _id++;
    self.$el = $element;
    self.$wrapper = self.$el.parent(self.wrapper);

    self.init();
  };

  SonyCarouselFade.prototype = {

    constructor: SonyCarouselFade,

    init: <span class="keyword">function</span>() {

      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.resetSlides( <span class="literal">true</span> );

      <span class="keyword">if</span> ( self.useCSS3 ) {
        self.$el.css(Modernizr.prefixed(<span class="string">'transitionTimingFunction'</span>), self.CSS3Easing);
      }

      self.gotoSlide(<span class="number">0</span>);
    },

</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Go to a given slide.</p>             </td>             <td class="code">               <div class="highlight"><pre>
    gotoSlide: <span class="keyword">function</span>(which, noAnim) {

      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          $slideSet = self.$slides,
          speed = ( noAnim ? <span class="number">0</span> : self.animationSpeed ),
          $destinationSlide;

      $destinationSlide = $slideSet.eq(which);
      <span class="keyword">if</span> ( !$destinationSlide ) { <span class="keyword">return</span>; }

</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>TODO : Note that, below, the <code>active</code> class is peppered onto the classes.
modules then use this class to set opacity, etc. The problem with this is obviously
that the JS won't work without that CSS set. We should remove the CSS and set
it inline using the JS, here, so that it works out of the box with just the JS plugin.</p>             </td>             <td class="code">               <div class="highlight"><pre>
      <span class="keyword">if</span> ( self.useCSS3 ) {

        self.$el.on(Settings.transEndEventName + <span class="string">'.slideMoveEnd'</span>, <span class="keyword">function</span>(){
          iQ.reset();
          self.$el.trigger(<span class="string">'SonyCarouselFade:AnimationComplete'</span>);
          self.$el.off(Settings.transEndEventName + <span class="string">'.slideMoveEnd'</span>);
        });

        self.$el.css(Modernizr.prefixed(<span class="string">'transitionDuration'</span>), speed + <span class="string">'ms'</span> );
        $destinationSlide.addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);

      } <span class="keyword">else</span> {
        $destinationSlide.addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);
        <span class="keyword">var</span> $sibs = $destinationSlide.siblings();
        $sibs.fadeOut(speed);
        $destinationSlide.fadeIn(speed);
      }

      self.currentSlide = which;

      self.$el.trigger(<span class="string">'SonyCarouselFade:gotoSlide'</span>, self.currentSlide);
    },

    resetSlides: <span class="keyword">function</span>( isInit ) {

      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      <span class="keyword">if</span> ( !isInit ) {
</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Remove the event because we're going to subscribe to it again</p>             </td>             <td class="code">               <div class="highlight"><pre>        self.$slides.off(<span class="string">'click.sonycarousel'</span>);
      }

      self.$slides = self.$el.find(self.slides).not(self.cloneClass);
    },

</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Reset the style attribute for the properties we might have manipulated.
Destroy the plugins we've initialized as part of the carousel.</p>             </td>             <td class="code">               <div class="highlight"><pre>
    destroy: <span class="keyword">function</span>() {

      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          $paddleWrapper = self.$paddleWrapper || self.$wrapper;

</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Reset styles.</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$el.css(Modernizr.prefixed(<span class="string">'transitionTimingFunction'</span>), <span class="string">''</span>)
          .css(Modernizr.prefixed(<span class="string">'transitionDuration'</span>), <span class="string">''</span> )
          .css(Modernizr.prefixed(<span class="string">'transform'</span>), <span class="string">''</span>)
          .css(self.posAttr, <span class="string">''</span>);

</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Unbind</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$el.off(<span class="string">'SonyCarouselFade:gotoSlide'</span>);
      self.$slides.off(<span class="string">'click.sonycarousel'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Remove data from element, allowing for later reinit.</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$el.removeData(<span class="string">'sonyCarouselFade'</span>);
    }
  };

</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h2>jQuery Plugin Definition</h2>             </td>             <td class="code">               <div class="highlight"><pre>
  $.fn.sonyCarouselFade = <span class="keyword">function</span>( options ) {
    <span class="keyword">var</span> args = Array.prototype.slice.call( arguments, <span class="number">1</span> );
    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="keyword">function</span>() {
      <span class="keyword">var</span> self = $(<span class="keyword">this</span>),
          sonyCarouselFade = self.data(<span class="string">'sonyCarouselFade'</span>);

      <span class="keyword">if</span> ( !sonyCarouselFade ) {
        sonyCarouselFade = <span class="keyword">new</span> SonyCarouselFade( self, options );
        self.data( <span class="string">'sonyCarouselFade'</span>, sonyCarouselFade );
      }

      <span class="keyword">if</span> ( <span class="keyword">typeof</span> options === <span class="string">'string'</span> ) {
        sonyCarouselFade[ options ].apply( sonyCarouselFade, args );
      }
    });
  };

</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>Defaults</h2>             </td>             <td class="code">               <div class="highlight"><pre>
  $.fn.sonyCarouselFade.defaults = {

</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p><strong>Required</strong>: Selector for the <code>overflow:hidden;</code> element that wraps the draggable object.
Accessed by .parent() method.</p>             </td>             <td class="code">               <div class="highlight"><pre>    wrapper: <span class="literal">undefined</span>,

</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p><strong>Required</strong>: Selector for the individual slides within the carousel, used for
positioning, snapping, and pagination.</p>             </td>             <td class="code">               <div class="highlight"><pre>    slides: <span class="literal">undefined</span>,

</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Speed of slide animation, in ms.</p>             </td>             <td class="code">               <div class="highlight"><pre>    animationSpeed: <span class="number">500</span>,

</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>default CSS3 easing equation</p>             </td>             <td class="code">               <div class="highlight"><pre>    CSS3Easing: <span class="string">'cubic-bezier(0.000, 1.035, 0.400, 0.985)'</span>,

</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Use CSS3 transitions and transforms over jQuery animations if possible.</p>             </td>             <td class="code">               <div class="highlight"><pre>    useCSS3: Modernizr.csstransforms &amp;&amp; Modernizr.csstransitions
  };

});

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 