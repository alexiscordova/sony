<!DOCTYPE html>  <html> <head>   <title>sony-stickytabs.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="debug_toggle.html">                 debug_toggle.js               </a>                                           <a class="source" href="form-actions.html">                 form-actions.js               </a>                                           <a class="source" href="jodo.rangecontrol.1.4.html">                 jodo.rangecontrol.1.4.js               </a>                                           <a class="source" href="jquery.shuffle.html">                 jquery.shuffle.js               </a>                                           <a class="source" href="jquery.simpleknob.html">                 jquery.simpleknob.js               </a>                                           <a class="source" href="jquery.simplescroll.html">                 jquery.simplescroll.js               </a>                                           <a class="source" href="sony-audio.html">                 sony-audio.js               </a>                                           <a class="source" href="sony-carousel-fade.html">                 sony-carousel-fade.js               </a>                                           <a class="source" href="sony-carousel.html">                 sony-carousel.js               </a>                                           <a class="source" href="sony-draggable.html">                 sony-draggable.js               </a>                                           <a class="source" href="sony-evenheights.html">                 sony-evenheights.js               </a>                                           <a class="source" href="sony-fade.html">                 sony-fade.js               </a>                                           <a class="source" href="sony-favorites.html">                 sony-favorites.js               </a>                                           <a class="source" href="sony-img-sequence.html">                 sony-img-sequence.js               </a>                                           <a class="source" href="sony-modal.html">                 sony-modal.js               </a>                                           <a class="source" href="sony-navigationdots.html">                 sony-navigationdots.js               </a>                                           <a class="source" href="sony-paddles.html">                 sony-paddles.js               </a>                                           <a class="source" href="sony-scroller.html">                 sony-scroller.js               </a>                                           <a class="source" href="sony-scrolltotop.html">                 sony-scrolltotop.js               </a>                                           <a class="source" href="sony-sequencer.html">                 sony-sequencer.js               </a>                                           <a class="source" href="sony-stickyheaders.html">                 sony-stickyheaders.js               </a>                                           <a class="source" href="sony-stickynav.html">                 sony-stickynav.js               </a>                                           <a class="source" href="sony-stickytabs.html">                 sony-stickytabs.js               </a>                                           <a class="source" href="sony-tab.html">                 sony-tab.js               </a>                                           <a class="source" href="sony-timer.html">                 sony-timer.js               </a>                                           <a class="source" href="sony-video.html">                 sony-video.js               </a>                                           <a class="source" href="sony-viewport.html">                 sony-viewport.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               sony-stickytabs.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h2>StickyTabs plugin</h2>

<ul>
<li><strong>Class:</strong> StickyTabs</li>
<li><strong>Version:</strong> 1.0</li>
<li><strong>Modified:</strong> 06/03/2013</li>
<li><strong>Author:</strong> Glen Cheney</li>
<li><strong>Dependencies:</strong> jQuery 1.7+, Modernizr, Sony Settings|Utilties, sony-scroller</li>
</ul>

<p><em>Notes:</em></p>

<ul>
<li>Requires css to go with it. See <code>_sticky-tabs.scss</code></li>
<li>The current tab will stick to the left or right side while the tab strip slides under it</li>
</ul>

<p><em>Example Usage:</em></p>

<pre><code> $('.tab-strip').stickyTabs();
</code></pre>

<p><em>Modules currently using it:</em></p>

<ul>
<li>gallery-g2-g3</li>
<li>single-spec-z1</li>
</ul>

<p><em>Refactor notes:</em></p>

<p>The desired funciontality between mobile and desktop is the same,
but because this changed so much throughout the course of developement
there are two separate implementations for mobile/desktop. Ideally they should be combined</p>             </td>             <td class="code">               <div class="highlight"><pre>
define(<span class="keyword">function</span>(require){

  <span class="string">'use strict'</span>;

  <span class="keyword">var</span> $ = require(<span class="string">'jquery'</span>),
      iQ = require(<span class="string">'iQ'</span>),
      Modernizr = require(<span class="string">'modernizr'</span>),
      Settings = require(<span class="string">'require/sony-global-settings'</span>),
      Utilities = require(<span class="string">'require/sony-global-utilities'</span>);

  <span class="keyword">var</span> StickyTabs = <span class="keyword">function</span>( $container, options ) {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;

    $.extend(self, $.fn.stickyTabs.options, options, $.fn.stickyTabs.settings);

    self.$container = $container;
    self._init();
  };

  StickyTabs.prototype = {

    constructor: StickyTabs,

    _init : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>jQuery objects</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$tabsWrap = $(self.tabsWrapSelector);
      self.$tabsContainer = self.$tabsWrap.parent();
      self.$tabs = self.$tabsWrap.children(<span class="string">'.tab'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>No tabs on the page</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( !self.$tabs.length ) { <span class="keyword">return</span>; }

</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Set variables</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$activeTab = self.$tabs.filter(<span class="string">'.active'</span>);
      self.$window = Settings.$window;
      self.tabWidth = self.$tabs.outerWidth();
      self.tabsContainerWidth = self.$tabsContainer.width();
      self.tabletMode = self.$container.data(<span class="string">'tabletMode'</span>);
      self.isCarousel = self.tabletMode === <span class="string">'carousel'</span>;

      <span class="keyword">if</span> ( self.isCarousel ) {
        self.$navNext = self.$container.find(<span class="string">'.tab-nav-next'</span>);
        self.$navPrev = self.$container.find(<span class="string">'.tab-nav-prev'</span>);
      }

</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>New tab shown event</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$tabs.on(<span class="string">'shown'</span>, $.proxy( self._onTabShown, self ));

</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Window resize</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$window.on(<span class="string">'resize.stickytabs'</span>, $.debounce( <span class="number">275</span>, $.proxy( self._onResize, self ) ) );

</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Decide which tabs to make</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( Modernizr.mq( self.mq ) ) {
        self.setup();
      } <span class="keyword">else</span> <span class="keyword">if</span> ( self.isCarousel ) {
        self.setupCarousel();
      }
    },

    _getConstrained : <span class="keyword">function</span>( value ) {
      <span class="keyword">return</span> Utilities.constrain( value, <span class="number">0</span>, <span class="keyword">this</span>.tabsContainerWidth - <span class="keyword">this</span>.tabWidth );
    },

    _onResize : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.tabWidth = self.$tabs.outerWidth();
      self.tabsContainerWidth = self.$tabsContainer.width();

</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Phone</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( Modernizr.mq( self.mq ) ) {
        <span class="keyword">if</span> ( self.isTabCarousel ) {
          self.teardownCarousel();
        }

        <span class="keyword">if</span> ( !self.isStickyTabs ) {
          self.setup();
        }

        self.animateTab();

</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Tablet</p>             </td>             <td class="code">               <div class="highlight"><pre>      } <span class="keyword">else</span> <span class="keyword">if</span> ( self.isCarousel ) {
        <span class="keyword">if</span> ( self.isStickyTabs ) {
          self.teardown();
        }

        <span class="keyword">if</span> ( !self.isTabCarousel ) {
          self.setupCarousel();
        }

        self._onTabSelected();


</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Desktop</p>             </td>             <td class="code">               <div class="highlight"><pre>      } <span class="keyword">else</span> {
        <span class="keyword">if</span> ( self.isStickyTabs ) {
          self.teardown();
        }
        <span class="keyword">if</span> ( self.isTabCarousel ) {
          self.teardownCarousel();
        }
      }
    },

    _onTabShown : <span class="keyword">function</span>( evt ) {
      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          $tab = $(evt.target);

</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Update iQ images</p>             </td>             <td class="code">               <div class="highlight"><pre>      iQ.update();

</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Save tab</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$activeTab = $tab;

</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Initialize new tab for sticky tabs</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( self.isStickyTabs || self.isTabCarousel ) {
        self._onTabSelected();
      }
    },

</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>This is working fine</p>             </td>             <td class="code">               <div class="highlight"><pre>    _onTabSelected : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          css = { position: <span class="string">'absolute'</span> },
          tabOffsetFromContainer,
          constrainedXWithContainerOffset;

</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Remove the margins and position absolute from all tabs</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$tabs.removeAttr(<span class="string">'style'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>jQuery's <code>offset()</code> is unreliable because WebKit includes transforms and Gecko doesn't
in offset calculations http://bugs.jquery.com/ticket/8362
Get the offset with transform, then subtract the transform</p>             </td>             <td class="code">               <div class="highlight"><pre>      tabOffsetFromContainer = self.$activeTab[<span class="number">0</span>].offsetLeft + self.scroller.x;

      constrainedXWithContainerOffset = self._getTabOffsetObj( tabOffsetFromContainer );

</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Save the tab's initial offset from its container</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.initialOffset = tabOffsetFromContainer;

</pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Save iscroll's current offset</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.initialContainerOffset = self.scroller.x;

</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Set initail css on active tab</p>             </td>             <td class="code">               <div class="highlight"><pre>      css[ self.prop ] = constrainedXWithContainerOffset.str;
      self.$activeTab.css(css);

</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Add a margin to the next (or previous if it's the last tab) tab because
the active one is positioned absolutely, taking up no space</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( !self.$activeTab.is(<span class="string">':last-child'</span>) ) {
        self.$activeTab.next().css(<span class="string">'marginLeft'</span>, self.tabWidth);
      } <span class="keyword">else</span> {
        self.$activeTab.prev().css(<span class="string">'marginRight'</span>, self.tabWidth);
      }

</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>iScroll doesn't need to be refreshed here because the content width is the same as it was before</p>             </td>             <td class="code">               <div class="highlight"><pre>    },

</pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>We know the offset we want within the container, but the container is translated too
This normalizes that value</p>             </td>             <td class="code">               <div class="highlight"><pre>    _getX : <span class="keyword">function</span>( x ) {
      <span class="keyword">return</span> [ <span class="keyword">this</span>.valStart, x, <span class="keyword">this</span>.valEnd ].join(<span class="string">''</span>);
    },

    _getTabOffsetObj : <span class="keyword">function</span>( tabOffsetFromContainer ) {
      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          constrainedX,
          constrainedXWithContainerOffset,
          currentScrollerX = self.scroller.x; <span class="comment">// will be negative if on the left, + on the right</span>

</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Constrain offset between 0 and window width</p>             </td>             <td class="code">               <div class="highlight"><pre>      constrainedX = self._getConstrained( tabOffsetFromContainer );

</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Add back the container offset</p>             </td>             <td class="code">               <div class="highlight"><pre>      constrainedXWithContainerOffset = constrainedX - currentScrollerX;

</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Reset the overlap (difference between our original offset and the new constrained value)</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.overlap = tabOffsetFromContainer - constrainedX;

</pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Return the plain number and the css value ( like 0 and translate(0px, 0))</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">return</span> {
        val: constrainedXWithContainerOffset,
        str: self._getX( constrainedXWithContainerOffset )
      };
    },

    animateTab : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          currentScrollerX = self.scroller.x,

</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Distance from when the tab was selected to now</p>             </td>             <td class="code">               <div class="highlight"><pre>          distanceFromInitial = self.initialContainerOffset - currentScrollerX,

</pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Get the offset of the tab from its initial position</p>             </td>             <td class="code">               <div class="highlight"><pre>          tabOffsetFromContainer = self.initialOffset - distanceFromInitial,

</pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Get the css value</p>             </td>             <td class="code">               <div class="highlight"><pre>          value = self._getTabOffsetObj( tabOffsetFromContainer ).str;

</pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Prevent tab from being clicked if the scroller has moved.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( self.scroller.moved &amp;&amp; !self.isClickCanceled ) {
</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Passing false is shorthand for function(){ return false; },
which is shorthand for event.preventDefault(); event.stopPropagation();</p>             </td>             <td class="code">               <div class="highlight"><pre>        self.$tabs.on(<span class="string">'click.stickytabs'</span>, <span class="literal">false</span>);
        self.isClickCanceled = <span class="literal">true</span>;
      }

      self.$activeTab.css( self.prop, value );
    },

    setup : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.$tabsContainer.scrollerModule({
        contentSelector: <span class="string">'.tabs'</span>,
        itemElementSelector: <span class="string">'.tab'</span>,
        mode: <span class="string">'free'</span>,
        centerItems: <span class="literal">false</span>,

</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>iscroll props get mixed in</p>             </td>             <td class="code">               <div class="highlight"><pre>        iscrollProps: {
          snap: <span class="literal">false</span>,
          hScroll: <span class="literal">true</span>,
          vScroll: <span class="literal">false</span>,
          hScrollbar: <span class="literal">false</span>,
          vScrollbar: <span class="literal">false</span>,
          momentum: self.useMomentum,
          bounce: self.useBounce,
          onScrollStart: <span class="keyword">function</span>() {
            self.isClickCanceled = <span class="literal">false</span>;
            self.$tabs.off(<span class="string">'.stickytabs'</span>);
            self.animateTab();
          },
          onScrollMove: <span class="keyword">function</span>() {
            self.animateTab();
          },
          onScrollEnd: <span class="keyword">function</span>() {
            self.animateTab();
          },
          onAnimate: <span class="keyword">function</span>() {
            self.animateTab();
          },
          onAnimationEnd: <span class="keyword">function</span>() {
            self.animateTab();
          }
        },

        getContentWidth: <span class="keyword">function</span>( $elements ) {
          <span class="keyword">var</span> contentWidth = <span class="number">0</span>;

          $elements.each(<span class="keyword">function</span>() {
            <span class="keyword">var</span> pos = <span class="keyword">this</span>.style.position,
                isOutOfFlow = pos === <span class="string">'absolute'</span>,
                width = isOutOfFlow ? <span class="number">0</span> : $(<span class="keyword">this</span>).outerWidth( <span class="literal">true</span> );

            <span class="keyword">if</span> ( !isOutOfFlow ) {
              contentWidth += width;
            }
          });

          <span class="keyword">return</span> contentWidth;
        }
      });

      self.scroller = self.$tabsContainer.data(<span class="string">'scrollerModule'</span>).scroller;

      self.isStickyTabs = <span class="literal">true</span>;
      self.$container.addClass(<span class="string">'sticky'</span>);

      self._onTabSelected();
    },

</pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Removes sticky tabs, but still listens for window resize</p>             </td>             <td class="code">               <div class="highlight"><pre>    teardown : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.$tabsContainer.scrollerModule(<span class="string">'destroy'</span>);
      self.scroller = <span class="literal">null</span>;
      self.$container.removeClass(<span class="string">'sticky'</span>);
      self.$tabs.off(<span class="string">'.stickytabs'</span>);
      self.$tabs.removeAttr(<span class="string">'style'</span>);
      self.isClickCanceled = <span class="literal">false</span>;
      self.overlap = <span class="literal">null</span>;
      self.isStickyTabs = <span class="literal">false</span>;
    },

</pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Completely removes sticky tabs.
You'll need to call <code>.stickyTabs()</code> again to get them back.</p>             </td>             <td class="code">               <div class="highlight"><pre>    destroy : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

</pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>If we haven't called <code>teardown</code> already</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( self.isStickyTabs ) {
        self.teardown();
      }

</pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>New tab <code>shown</code> event</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$tabs.off(<span class="string">'shown'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Window resize</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$window.off(<span class="string">'.stickytabs'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Remove saved data</p>             </td>             <td class="code">               <div class="highlight"><pre>      self.$container.removeData(<span class="string">'stickyTabs'</span>);
    },

    setupCarousel : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.$tabsContainer.scrollerModule({
        contentSelector: <span class="string">'.tabs'</span>,
        itemElementSelector: <span class="string">'.tab'</span>,
        mode: <span class="string">'free'</span>,
        nextSelector: self.$navNext,
        prevSelector: self.$navPrev,
        centerItems: <span class="literal">false</span>,

        iscrollProps: {
          snap: !self.isTouch,
          hScroll: <span class="literal">true</span>,
          vScroll: <span class="literal">false</span>,
          hScrollbar: <span class="literal">false</span>,
          vScrollbar: <span class="literal">false</span>,
          momentum: self.useMomentum,
          bounce: self.useBounce,
          onScrollStart: <span class="keyword">function</span>() {
            self.isClickCanceled = <span class="literal">false</span>;
            self.$tabs.off(<span class="string">'.stickytabs'</span>);
            self.animateTab();
          },
          onScrollMove: <span class="keyword">function</span>() {
            self.animateTab();
            self.setOverflowClasses( <span class="keyword">this</span>.x, <span class="keyword">this</span>.maxScrollX + <span class="number">3</span> );
          },
          onScrollEnd: <span class="keyword">function</span>() {
            self.animateTab();
            <span class="keyword">if</span> ( self.isClickCanceled ) {
              self.$tabs.off(<span class="string">'.stickytabs'</span>);
            }
          },
          onAnimate: <span class="keyword">function</span>() {
            self.animateTab();
          },
          onAnimationEnd: <span class="keyword">function</span>( iscroll ) {
            self.animateTab();
            self.setOverflowClasses( iscroll.x, iscroll.maxScrollX + <span class="number">3</span> );
          }
        },

        getContentWidth: <span class="keyword">function</span>( $elements ) {
          <span class="keyword">var</span> contentWidth = <span class="number">0</span>;

          $elements.each(<span class="keyword">function</span>() {
            <span class="keyword">var</span> pos = <span class="keyword">this</span>.style.position,
                isOutOfFlow = pos === <span class="string">'absolute'</span>,
                width = isOutOfFlow ? <span class="number">0</span> : $(<span class="keyword">this</span>).outerWidth( <span class="literal">true</span> );

            <span class="keyword">if</span> ( !isOutOfFlow ) {
              contentWidth += width;
            }
          });

          <span class="keyword">return</span> contentWidth;
        }
      });

      self.scroller = self.$tabsContainer.data(<span class="string">'scrollerModule'</span>).scroller;


      self.isTabCarousel = <span class="literal">true</span>;
      self._onTabSelected();
      self.$container.addClass(<span class="string">'tab-carousel'</span>);
      self.setOverflowClasses( self.scroller.x, self.scroller.maxScrollX + <span class="number">3</span> );
    },

    teardownCarousel : <span class="keyword">function</span>() {
      <span class="keyword">var</span> self = <span class="keyword">this</span>;

      self.$tabsContainer.scrollerModule(<span class="string">'destroy'</span>);
      self.scroller = <span class="literal">null</span>;
      self.$container.removeClass(<span class="string">'tab-carousel'</span>);
      self.$navPrev.addClass(<span class="string">'hide'</span>);
      self.$navNext.addClass(<span class="string">'hide'</span>);
      self.$container.find(<span class="string">'.has-content-right'</span>).removeClass(<span class="string">'has-content-right'</span>);
      self.$container.find(<span class="string">'.has-content-left'</span>).removeClass(<span class="string">'has-content-left'</span>);
      self.$tabs.off(<span class="string">'.stickytabs'</span>);
      self.$tabs.removeAttr(<span class="string">'style'</span>);
      self.isClickCanceled = <span class="literal">false</span>;
      self.overlap = <span class="literal">null</span>;
      self.isTabCarousel = <span class="literal">false</span>;
    },

    setOverflowClasses : <span class="keyword">function</span>( currentX, maxX ) {
      <span class="keyword">var</span> self = <span class="keyword">this</span>,
          overflowLeftClass = <span class="string">'has-content-left'</span>,
          overflowRightClass = <span class="string">'has-content-right'</span>,
          hadContentLeft = self.$tabsContainer.hasClass( overflowLeftClass ),
          hadContentRight = self.$tabsContainer.hasClass( overflowRightClass );

</pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Overflow left</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( currentX &lt; -<span class="number">3</span> &amp;&amp; !hadContentLeft ) {
        self.$tabsContainer.addClass( overflowLeftClass );
      } <span class="keyword">else</span> <span class="keyword">if</span> ( currentX &gt;= -<span class="number">3</span> &amp;&amp; hadContentLeft ) {
        self.$tabsContainer.removeClass( overflowLeftClass );
      }

</pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Overflow right</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( currentX &gt;= maxX &amp;&amp; !hadContentRight ) {
        self.$tabsContainer.addClass( overflowRightClass );
      } <span class="keyword">else</span> <span class="keyword">if</span> ( currentX &lt;= maxX &amp;&amp; hadContentRight ) {
        self.$tabsContainer.removeClass( overflowRightClass );
      }
    }

  };

</pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Plugin definition</p>             </td>             <td class="code">               <div class="highlight"><pre>  $.fn.stickyTabs = <span class="keyword">function</span>( options ) {
    <span class="keyword">var</span> args = Array.prototype.slice.call( arguments, <span class="number">1</span> );
    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="keyword">function</span>() {
      <span class="keyword">var</span> self = $(<span class="keyword">this</span>),
          stickyTabs = self.data(<span class="string">'stickyTabs'</span>);

</pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>If we don't have a stored stickyTabs, make a new one and save it</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">if</span> ( !stickyTabs ) {
        stickyTabs = <span class="keyword">new</span> StickyTabs( self, options );
        self.data( <span class="string">'stickyTabs'</span>, stickyTabs );
      }

      <span class="keyword">if</span> ( <span class="keyword">typeof</span> options === <span class="string">'string'</span> ) {
        stickyTabs[ options ].apply( stickyTabs, args );
      }
    });
  };


</pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Overrideable options</p>             </td>             <td class="code">               <div class="highlight"><pre>  $.fn.stickyTabs.options = {
    tabsWrapSelector: <span class="string">'.tabs'</span>,
    mq: <span class="string">'(max-width: 47.9375em)'</span>
  };

</pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Not overrideable</p>             </td>             <td class="code">               <div class="highlight"><pre>  $.fn.stickyTabs.settings = {
    tabWidth: <span class="number">0</span>,
    overlap: <span class="number">0</span>,
    isStickyTabs: <span class="literal">false</span>,
    useBounce: !( Settings.isVita || Settings.isLTIE9 ),
    useMomentum: !( Settings.isVita || Settings.isLTIE9 ),
    isTouch: Settings.hasTouchEvents,
    prop: Modernizr.csstransforms ? <span class="string">'transform'</span> : <span class="string">'left'</span>,
    valStart : Modernizr.csstransforms ? <span class="string">'translate('</span> : <span class="string">''</span>,
    valEnd : Modernizr.csstransforms ? <span class="string">'px,0)'</span> : <span class="string">'px'</span>
  };

});
</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 