/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(j,F){var v=Math,o=F.createElement("div").style,A=(function(){var I="t,webkitT,MozT,msT,OT".split(","),H,G=0,m=I.length;for(;G<m;G++){H=I[G]+"ransform";if(H in o){return I[G].substr(0,I[G].length-1)}}return false})(),E=A?"-"+A.toLowerCase()+"-":"",n=t("transform"),y=t("transitionProperty"),l=t("transitionDuration"),p=t("transformOrigin"),C=t("transitionTimingFunction"),f=t("transitionDelay"),B=(/android/gi).test(navigator.appVersion),i=(/iphone|ipad/gi).test(navigator.appVersion),s=(/hp-tablet/gi).test(navigator.appVersion),k=t("perspective") in o,z="ontouchstart" in j&&!s,e=A!==false,g=t("transition") in o,h="onorientationchange" in j?"orientationchange":"resize",c=z?"touchstart":"mousedown",u=z?"touchmove":"mousemove",d=z?"touchend":"mouseup",x=z?"touchcancel":"mouseup",b=(function(){if(A===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[A]})(),r=(function(){return j.requestAnimationFrame||j.webkitRequestAnimationFrame||j.mozRequestAnimationFrame||j.oRequestAnimationFrame||j.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),q=(function(){return j.cancelRequestAnimationFrame||j.webkitCancelAnimationFrame||j.webkitCancelRequestAnimationFrame||j.mozCancelRequestAnimationFrame||j.oCancelRequestAnimationFrame||j.msCancelRequestAnimationFrame||clearTimeout})(),D=k?" translateZ(0)":"",w=function(H,m){var I=this,G;I.wrapper=typeof H=="object"?H:F.getElementById(H);I.wrapper.style.overflow="hidden";I.scroller=I.wrapper.children[0];I.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:B,hideScrollbar:i,fadeScrollbar:i&&k,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(J){J.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(G in m){I.options[G]=m[G]}I.x=I.options.x;I.y=I.options.y;I.options.useTransform=e&&I.options.useTransform;I.options.hScrollbar=I.options.hScroll&&I.options.hScrollbar;I.options.vScrollbar=I.options.vScroll&&I.options.vScrollbar;I.options.zoom=I.options.useTransform&&I.options.zoom;I.options.useTransition=g&&I.options.useTransition;if(I.options.zoom&&B){D=""}I.scroller.style[y]=I.options.useTransform?E+"transform":"top left";I.scroller.style[l]="0";I.scroller.style[p]="0 0";if(I.options.useTransition){I.scroller.style[C]="cubic-bezier(0.33,0.66,0.66,1)"}if(I.options.useTransform){I.scroller.style[n]="translate("+I.x+"px,"+I.y+"px)"+D}else{I.scroller.style.cssText+=";position:absolute;top:"+I.y+"px;left:"+I.x+"px"}if(I.options.useTransition){I.options.fixedScrollbar=true}I.refresh();I._bind(h,j);I._bind(c);if(!z){if(I.options.wheelAction!="none"){I._bind("DOMMouseScroll");I._bind("mousewheel")}}if(I.options.checkDOMChanges){I.checkDOMTime=setInterval(function(){I._checkDOMChanges()},500)}};w.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(G){var m=this;switch(G.type){case c:if(!z&&G.button!==0){return}m._start(G);break;case u:m._move(G);break;case d:case x:m._end(G);break;case h:m._resize();break;case"DOMMouseScroll":case"mousewheel":m._wheel(G);break;case b:m._transitionEnd(G);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var H=this,G;if(!H[m+"Scrollbar"]){if(H[m+"ScrollbarWrapper"]){if(e){H[m+"ScrollbarIndicator"].style[n]=""}H[m+"ScrollbarWrapper"].parentNode.removeChild(H[m+"ScrollbarWrapper"]);H[m+"ScrollbarWrapper"]=null;H[m+"ScrollbarIndicator"]=null}return}if(!H[m+"ScrollbarWrapper"]){G=F.createElement("div");if(H.options.scrollbarClass){G.className=H.options.scrollbarClass+m.toUpperCase()}else{G.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(H.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(H.hScrollbar?"7":"2")+"px;top:2px;right:1px")}G.style.cssText+=";pointer-events:none;"+E+"transition-property:opacity;"+E+"transition-duration:"+(H.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(H.options.hideScrollbar?"0":"1");H.wrapper.appendChild(G);H[m+"ScrollbarWrapper"]=G;G=F.createElement("div");if(!H.options.scrollbarClass){G.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+E+"background-clip:padding-box;"+E+"box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";"+E+"border-radius:3px;border-radius:3px"}G.style.cssText+=";pointer-events:none;"+E+"transition-property:"+E+"transform;"+E+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+E+"transition-duration:0;"+E+"transform: translate(0,0)"+D;if(H.options.useTransition){G.style.cssText+=";"+E+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}H[m+"ScrollbarWrapper"].appendChild(G);H[m+"ScrollbarIndicator"]=G}if(m=="h"){H.hScrollbarSize=H.hScrollbarWrapper.clientWidth;H.hScrollbarIndicatorSize=v.max(v.round(H.hScrollbarSize*H.hScrollbarSize/H.scrollerW),8);H.hScrollbarIndicator.style.width=H.hScrollbarIndicatorSize+"px";H.hScrollbarMaxScroll=H.hScrollbarSize-H.hScrollbarIndicatorSize;H.hScrollbarProp=H.hScrollbarMaxScroll/H.maxScrollX}else{H.vScrollbarSize=H.vScrollbarWrapper.clientHeight;H.vScrollbarIndicatorSize=v.max(v.round(H.vScrollbarSize*H.vScrollbarSize/H.scrollerH),8);H.vScrollbarIndicator.style.height=H.vScrollbarIndicatorSize+"px";H.vScrollbarMaxScroll=H.vScrollbarSize-H.vScrollbarIndicatorSize;H.vScrollbarProp=H.vScrollbarMaxScroll/H.maxScrollY}H._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},B?200:0)},_pos:function(m,G){if(this.zoomed){return}m=this.hScroll?m:0;G=this.vScroll?G:0;if(this.options.useTransform){this.scroller.style[n]="translate("+m+"px,"+G+"px) scale("+this.scale+")"+D}else{m=v.round(m);G=v.round(G);this.scroller.style.left=m+"px";this.scroller.style.top=G+"px"}this.x=m;this.y=G;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,I){var H=this,J=m=="h"?H.x:H.y,G;if(!H[m+"Scrollbar"]){return}J=H[m+"ScrollbarProp"]*J;if(J<0){if(!H.options.fixedScrollbar){G=H[m+"ScrollbarIndicatorSize"]+v.round(J*3);if(G<8){G=8}H[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=G+"px"}J=0}else{if(J>H[m+"ScrollbarMaxScroll"]){if(!H.options.fixedScrollbar){G=H[m+"ScrollbarIndicatorSize"]-v.round((J-H[m+"ScrollbarMaxScroll"])*3);if(G<8){G=8}H[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=G+"px";J=H[m+"ScrollbarMaxScroll"]+(H[m+"ScrollbarIndicatorSize"]-G)}else{J=H[m+"ScrollbarMaxScroll"]}}}H[m+"ScrollbarWrapper"].style[f]="0";H[m+"ScrollbarWrapper"].style.opacity=I&&H.options.hideScrollbar?"0":"1";H[m+"ScrollbarIndicator"].style[n]="translate("+(m=="h"?J+"px,0)":"0,"+J+"px)")+D},_start:function(L){var K=this,G=z?L.touches[0]:L,H,m,M,J,I;if(!K.enabled){return}if(K.options.onBeforeScrollStart){K.options.onBeforeScrollStart.call(K,L)}if(K.options.useTransition||K.options.zoom){K._transitionTime(0)}K.moved=false;K.animating=false;K.zoomed=false;K.distX=0;K.distY=0;K.absDistX=0;K.absDistY=0;K.dirX=0;K.dirY=0;if(K.options.zoom&&z&&L.touches.length>1){J=v.abs(L.touches[0].pageX-L.touches[1].pageX);I=v.abs(L.touches[0].pageY-L.touches[1].pageY);K.touchesDistStart=v.sqrt(J*J+I*I);K.originX=v.abs(L.touches[0].pageX+L.touches[1].pageX-K.wrapperOffsetLeft*2)/2-K.x;K.originY=v.abs(L.touches[0].pageY+L.touches[1].pageY-K.wrapperOffsetTop*2)/2-K.y;if(K.options.onZoomStart){K.options.onZoomStart.call(K,L)}}if(K.options.momentum){if(K.options.useTransform){H=getComputedStyle(K.scroller,null)[n].replace(/[^0-9\-.,]/g,"").split(",");m=+(H[12]||H[4]);M=+(H[13]||H[5])}else{m=+getComputedStyle(K.scroller,null).left.replace(/[^0-9-]/g,"");M=+getComputedStyle(K.scroller,null).top.replace(/[^0-9-]/g,"")}if(m!=K.x||M!=K.y){if(K.options.useTransition){K._unbind(b)}else{q(K.aniTime)}K.steps=[];K._pos(m,M);if(K.options.onScrollEnd){K.options.onScrollEnd.call(K)}}}K.absStartX=K.x;K.absStartY=K.y;K.startX=K.x;K.startY=K.y;K.pointX=G.pageX;K.pointY=G.pageY;K.startTime=L.timeStamp||Date.now();if(K.options.onScrollStart){K.options.onScrollStart.call(K,L)}K._bind(u,j);K._bind(d,j);K._bind(x,j)},_move:function(N){var L=this,O=z?N.touches[0]:N,J=O.pageX-L.pointX,H=O.pageY-L.pointY,m=L.x+J,P=L.y+H,K,I,G,M=N.timeStamp||Date.now();if(L.options.onBeforeScrollMove){L.options.onBeforeScrollMove.call(L,N)}if(L.options.zoom&&z&&N.touches.length>1){K=v.abs(N.touches[0].pageX-N.touches[1].pageX);I=v.abs(N.touches[0].pageY-N.touches[1].pageY);L.touchesDist=v.sqrt(K*K+I*I);L.zoomed=true;G=1/L.touchesDistStart*L.touchesDist*this.scale;if(G<L.options.zoomMin){G=0.5*L.options.zoomMin*Math.pow(2,G/L.options.zoomMin)}else{if(G>L.options.zoomMax){G=2*L.options.zoomMax*Math.pow(0.5,L.options.zoomMax/G)}}L.lastScale=G/this.scale;m=this.originX-this.originX*L.lastScale+this.x,P=this.originY-this.originY*L.lastScale+this.y;this.scroller.style[n]="translate("+m+"px,"+P+"px) scale("+G+")"+D;if(L.options.onZoom){L.options.onZoom.call(L,N)}return}L.pointX=O.pageX;L.pointY=O.pageY;if(m>0||m<L.maxScrollX){m=L.options.bounce?L.x+(J/2):m>=0||L.maxScrollX>=0?0:L.maxScrollX}if(P>L.minScrollY||P<L.maxScrollY){P=L.options.bounce?L.y+(H/2):P>=L.minScrollY||L.maxScrollY>=0?L.minScrollY:L.maxScrollY}L.distX+=J;L.distY+=H;L.absDistX=v.abs(L.distX);L.absDistY=v.abs(L.distY);if(L.absDistX<6&&L.absDistY<6){return}if(L.options.lockDirection){if(L.absDistX>L.absDistY+5){P=L.y;H=0}else{if(L.absDistY>L.absDistX+5){m=L.x;J=0}}}L.moved=true;L._pos(m,P);L.dirX=J>0?-1:J<0?1:0;L.dirY=H>0?-1:H<0?1:0;if(M-L.startTime>300){L.startTime=M;L.startX=L.x;L.startY=L.y}if(L.options.onScrollMove){L.options.onScrollMove.call(L,N)}},_end:function(N){if(z&&N.touches.length!==0){return}var L=this,T=z?N.changedTouches[0]:N,O,S,H={dist:0,time:0},m={dist:0,time:0},K=(N.timeStamp||Date.now())-L.startTime,P=L.x,M=L.y,R,Q,G,J,I;L._unbind(u,j);L._unbind(d,j);L._unbind(x,j);if(L.options.onBeforeScrollEnd){L.options.onBeforeScrollEnd.call(L,N)}if(L.zoomed){I=L.scale*L.lastScale;I=Math.max(L.options.zoomMin,I);I=Math.min(L.options.zoomMax,I);L.lastScale=I/L.scale;L.scale=I;L.x=L.originX-L.originX*L.lastScale+L.x;L.y=L.originY-L.originY*L.lastScale+L.y;L.scroller.style[l]="200ms";L.scroller.style[n]="translate("+L.x+"px,"+L.y+"px) scale("+L.scale+")"+D;L.zoomed=false;L.refresh();if(L.options.onZoomEnd){L.options.onZoomEnd.call(L,N)}return}if(!L.moved){if(z){if(L.doubleTapTimer&&L.options.zoom){clearTimeout(L.doubleTapTimer);L.doubleTapTimer=null;if(L.options.onZoomStart){L.options.onZoomStart.call(L,N)}L.zoom(L.pointX,L.pointY,L.scale==1?L.options.doubleTapZoom:1);if(L.options.onZoomEnd){setTimeout(function(){L.options.onZoomEnd.call(L,N)},200)}}else{if(this.options.handleClick){L.doubleTapTimer=setTimeout(function(){L.doubleTapTimer=null;O=T.target;while(O.nodeType!=1){O=O.parentNode}if(O.tagName!="SELECT"&&O.tagName!="INPUT"&&O.tagName!="TEXTAREA"){S=F.createEvent("MouseEvents");S.initMouseEvent("click",true,true,N.view,1,T.screenX,T.screenY,T.clientX,T.clientY,N.ctrlKey,N.altKey,N.shiftKey,N.metaKey,0,null);S._fake=true;O.dispatchEvent(S)}},L.options.zoom?250:0)}}}L._resetPos(400);if(L.options.onTouchEnd){L.options.onTouchEnd.call(L,N)}return}if(K<300&&L.options.momentum){H=P?L._momentum(P-L.startX,K,-L.x,L.scrollerW-L.wrapperW+L.x,L.options.bounce?L.wrapperW:0):H;m=M?L._momentum(M-L.startY,K,-L.y,(L.maxScrollY<0?L.scrollerH-L.wrapperH+L.y-L.minScrollY:0),L.options.bounce?L.wrapperH:0):m;P=L.x+H.dist;M=L.y+m.dist;if((L.x>0&&P>0)||(L.x<L.maxScrollX&&P<L.maxScrollX)){H={dist:0,time:0}}if((L.y>L.minScrollY&&M>L.minScrollY)||(L.y<L.maxScrollY&&M<L.maxScrollY)){m={dist:0,time:0}}}if(H.dist||m.dist){G=v.max(v.max(H.time,m.time),10);if(L.options.snap){R=P-L.absStartX;Q=M-L.absStartY;if(v.abs(R)<L.options.snapThreshold&&v.abs(Q)<L.options.snapThreshold){L.scrollTo(L.absStartX,L.absStartY,200)}else{J=L._snap(P,M);P=J.x;M=J.y;G=v.max(J.time,G)}}L.scrollTo(v.round(P),v.round(M),G);if(L.options.onTouchEnd){L.options.onTouchEnd.call(L,N)}return}if(L.options.snap){R=P-L.absStartX;Q=M-L.absStartY;if(v.abs(R)<L.options.snapThreshold&&v.abs(Q)<L.options.snapThreshold){L.scrollTo(L.absStartX,L.absStartY,200)}else{J=L._snap(L.x,L.y);if(J.x!=L.x||J.y!=L.y){L.scrollTo(J.x,J.y,J.time)}}if(L.options.onTouchEnd){L.options.onTouchEnd.call(L,N)}return}L._resetPos(200);if(L.options.onTouchEnd){L.options.onTouchEnd.call(L,N)}},_resetPos:function(H){var m=this,I=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,G=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(I==m.x&&G==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(A=="webkit"){m.hScrollbarWrapper.style[f]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(A=="webkit"){m.vScrollbarWrapper.style[f]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(I,G,H||0)},_wheel:function(K){var I=this,J,H,G,m,L;if("wheelDeltaX" in K){J=K.wheelDeltaX/12;H=K.wheelDeltaY/12}else{if("wheelDelta" in K){J=H=K.wheelDelta/12}else{if("detail" in K){J=H=-K.detail*3}else{return}}}if(I.options.wheelAction=="zoom"){L=I.scale*Math.pow(2,1/3*(H?H/Math.abs(H):0));if(L<I.options.zoomMin){L=I.options.zoomMin}if(L>I.options.zoomMax){L=I.options.zoomMax}if(L!=I.scale){if(!I.wheelZoomCount&&I.options.onZoomStart){I.options.onZoomStart.call(I,K)}I.wheelZoomCount++;I.zoom(K.pageX,K.pageY,L,400);setTimeout(function(){I.wheelZoomCount--;if(!I.wheelZoomCount&&I.options.onZoomEnd){I.options.onZoomEnd.call(I,K)}},400)}return}G=I.x+J;m=I.y+H;if(G>0){G=0}else{if(G<I.maxScrollX){G=I.maxScrollX}}if(m>I.minScrollY){m=I.minScrollY}else{if(m<I.maxScrollY){m=I.maxScrollY}}if(I.maxScrollY<0){I.scrollTo(G,m,0)}},_transitionEnd:function(G){var m=this;if(G.target!=m.scroller){return}m._unbind(b);m._startAni()},_startAni:function(){var L=this,G=L.x,m=L.y,J=Date.now(),K,I,H;if(L.animating){return}if(!L.steps.length){L._resetPos(400);return}K=L.steps.shift();if(K.x==G&&K.y==m){K.time=0}L.animating=true;L.moved=true;if(L.options.useTransition){L._transitionTime(K.time);L._pos(K.x,K.y);L.animating=false;if(K.time){L._bind(b)}else{L._resetPos(0)}return}H=function(){var M=Date.now(),O,N;if(M>=J+K.time){L._pos(K.x,K.y);L.animating=false;if(L.options.onAnimationEnd){L.options.onAnimationEnd.call(L)}L._startAni();return}M=(M-J)/K.time-1;I=v.sqrt(1-M*M);O=(K.x-G)*I+G;N=(K.y-m)*I+m;L._pos(O,N);if(L.animating){L.aniTime=r(H)}};H()},_transitionTime:function(m){m+="ms";this.scroller.style[l]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[l]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[l]=m}},_momentum:function(M,G,K,m,O){var L=0.0006,H=v.abs(M)/G,I=(H*H)/(2*L),N=0,J=0;if(M>0&&I>K){J=O/(6/(I/H*L));K=K+J;H=H*K/I;I=K}else{if(M<0&&I>m){J=O/(6/(I/H*L));m=m+J;H=H*m/I;I=m}}I=I*(M<0?-1:1);N=H/L;return{dist:I,time:v.round(N)}},_offset:function(m){var H=-m.offsetLeft,G=-m.offsetTop;while(m=m.offsetParent){H-=m.offsetLeft;G-=m.offsetTop}if(m!=this.wrapper){H*=this.scale;G*=this.scale}return{left:H,top:G}},_snap:function(N,M){var K=this,J,I,L,H,G,m;L=K.pagesX.length-1;for(J=0,I=K.pagesX.length;J<I;J++){if(N>=K.pagesX[J]){L=J;break}}if(L==K.currPageX&&L>0&&K.dirX<0){L--}N=K.pagesX[L];G=v.abs(N-K.pagesX[K.currPageX]);G=G?v.abs(K.x-N)/G*500:0;K.currPageX=L;L=K.pagesY.length-1;for(J=0;J<L;J++){if(M>=K.pagesY[J]){L=J;break}}if(L==K.currPageY&&L>0&&K.dirY<0){L--}M=K.pagesY[L];m=v.abs(M-K.pagesY[K.currPageY]);m=m?v.abs(K.y-M)/m*500:0;K.currPageY=L;H=v.round(v.max(G,m))||200;return{x:N,y:M,time:H}},_bind:function(H,G,m){(G||this.scroller).addEventListener(H,this,!!m)},_unbind:function(H,G,m){(G||this.scroller).removeEventListener(H,this,!!m)},destroy:function(){var m=this;m.scroller.style[n]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,j);m._unbind(c);m._unbind(u,j);m._unbind(d,j);m._unbind(x,j);if(!m.options.hasTouch){m._unbind("DOMMouseScroll");m._unbind("mousewheel")}if(m.options.useTransition){m._unbind(b)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var I=this,K,H,m,G,L=0,J=0;if(I.scale<I.options.zoomMin){I.scale=I.options.zoomMin}I.wrapperW=I.wrapper.clientWidth||1;I.wrapperH=I.wrapper.clientHeight||1;I.minScrollY=-I.options.topOffset||0;I.scrollerW=v.round(I.scroller.offsetWidth*I.scale);I.scrollerH=v.round((I.scroller.offsetHeight+I.minScrollY)*I.scale);I.maxScrollX=I.wrapperW-I.scrollerW;I.maxScrollY=I.wrapperH-I.scrollerH+I.minScrollY;I.dirX=0;I.dirY=0;if(I.options.onRefresh){I.options.onRefresh.call(I)}I.hScroll=I.options.hScroll&&I.maxScrollX<0;I.vScroll=I.options.vScroll&&(!I.options.bounceLock&&!I.hScroll||I.scrollerH>I.wrapperH);I.hScrollbar=I.hScroll&&I.options.hScrollbar;I.vScrollbar=I.vScroll&&I.options.vScrollbar&&I.scrollerH>I.wrapperH;K=I._offset(I.wrapper);I.wrapperOffsetLeft=-K.left;I.wrapperOffsetTop=-K.top;if(typeof I.options.snap=="string"){I.pagesX=[];I.pagesY=[];G=I.scroller.querySelectorAll(I.options.snap);for(H=0,m=G.length;H<m;H++){L=I._offset(G[H]);L.left+=I.wrapperOffsetLeft;L.top+=I.wrapperOffsetTop;I.pagesX[H]=L.left<I.maxScrollX?I.maxScrollX:L.left*I.scale;I.pagesY[H]=L.top<I.maxScrollY?I.maxScrollY:L.top*I.scale}}else{if(I.options.snap){I.pagesX=[];while(L>=I.maxScrollX){I.pagesX[J]=L;L=L-I.wrapperW;J++}if(I.maxScrollX%I.wrapperW){I.pagesX[I.pagesX.length]=I.maxScrollX-I.pagesX[I.pagesX.length-1]+I.pagesX[I.pagesX.length-1]}L=0;J=0;I.pagesY=[];while(L>=I.maxScrollY){I.pagesY[J]=L;L=L-I.wrapperH;J++}if(I.maxScrollY%I.wrapperH){I.pagesY[I.pagesY.length]=I.maxScrollY-I.pagesY[I.pagesY.length-1]+I.pagesY[I.pagesY.length-1]}}}I._scrollbar("h");I._scrollbar("v");if(!I.zoomed){I.scroller.style[l]="0";I._resetPos(400)}},scrollTo:function(m,M,L,K){var J=this,I=m,H,G;J.stop();if(!I.length){I=[{x:m,y:M,time:L,relative:K}]}for(H=0,G=I.length;H<G;H++){if(I[H].relative){I[H].x=J.x-I[H].x;I[H].y=J.y-I[H].y}J.steps.push({x:I[H].x,y:I[H].y,time:I[H].time||0})}J._startAni()},scrollToElement:function(m,H){var G=this,I;m=m.nodeType?m:G.scroller.querySelector(m);if(!m){return}I=G._offset(m);I.left+=G.wrapperOffsetLeft;I.top+=G.wrapperOffsetTop;I.left=I.left>0?0:I.left<G.maxScrollX?G.maxScrollX:I.left;I.top=I.top>G.minScrollY?G.minScrollY:I.top<G.maxScrollY?G.maxScrollY:I.top;H=H===undefined?v.max(v.abs(I.left)*2,v.abs(I.top)*2):H;G.scrollTo(I.left,I.top,H)},scrollToPage:function(H,G,J){var I=this,m,K;J=J===undefined?400:J;if(I.options.onScrollStart){I.options.onScrollStart.call(I)}if(I.options.snap){H=H=="next"?I.currPageX+1:H=="prev"?I.currPageX-1:H;G=G=="next"?I.currPageY+1:G=="prev"?I.currPageY-1:G;H=H<0?0:H>I.pagesX.length-1?I.pagesX.length-1:H;G=G<0?0:G>I.pagesY.length-1?I.pagesY.length-1:G;I.currPageX=H;I.currPageY=G;m=I.pagesX[H];K=I.pagesY[G]}else{m=-I.wrapperW*H;K=-I.wrapperH*G;if(m<I.maxScrollX){m=I.maxScrollX}if(K<I.maxScrollY){K=I.maxScrollY}}I.scrollTo(m,K,J)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(u,j);this._unbind(d,j);this._unbind(x,j)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(b)}else{q(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,K,J,I){var G=this,H=J/G.scale;if(!G.options.useTransform){return}G.zoomed=true;I=I===undefined?200:I;m=m-G.wrapperOffsetLeft-G.x;K=K-G.wrapperOffsetTop-G.y;G.x=m-m*H+G.x;G.y=K-K*H+G.y;G.scale=J;G.refresh();G.x=G.x>0?0:G.x<G.maxScrollX?G.maxScrollX:G.x;G.y=G.y>G.minScrollY?G.minScrollY:G.y<G.maxScrollY?G.maxScrollY:G.y;G.scroller.style[l]=I+"ms";G.scroller.style[n]="translate("+G.x+"px,"+G.y+"px) scale("+J+")"+D;G.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};function t(m){if(A===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return A+m}o=null;if(typeof exports!=="undefined"){exports.iScroll=w}else{j.iScroll=w}})(window,document);a=function(){console.log("hi")};a=function(){console.log("hi")}(function(c){var b=c.sony=c.sony||{};b.modules=b.modules||{}})(window);(function(d,e,c,f){if(!d.scModules){d.scModules={}}var b=function(k,l){console.log("---->",l);var A=navigator.userAgent.toLowerCase(),z,F=d.browser,u=this,q=F.webkit,C=A.indexOf("android")>-1;u.isIPAD=A.match(/(ipad)/);u.isIPHONE=A.match(/(iphone)/);var G=document.createElement("div").style,y=["webkit","Moz","ms","O"],B="",D=0,m;for(z=0;z<y.length;z++){m=y[z];if(!B&&(m+"Transform") in G){B=m}m=m.toLowerCase();if(!c.requestAnimationFrame){c.requestAnimationFrame=c[m+"RequestAnimationFrame"];c.cancelAnimationFrame=c[m+"CancelAnimationFrame"]||c[m+"CancelRequestAnimationFrame"]}}if(!c.requestAnimationFrame){c.requestAnimationFrame=function(K,H){var i=new Date().getTime(),I=Math.max(0,16-(i-D)),J=c.setTimeout(function(){K(i+I)},I);D=i+I;return J}}if(!c.cancelAnimationFrame){c.cancelAnimationFrame=function(i){clearTimeout(i)}}u.slider=d(k);u.ev=d({});u._doc=d(document);u.st=d.extend({},d.fn.sonyCarousel.defaults,l);console.log(u.st.mode+" - "+u.st.variation);switch(u.st.mode){case"full":break;case"tabbed":break;default:break}switch(u.st.controlNavigation){case"tabbednav":u.st.transitionType="fade";break}u._currAnimSpeed=u.st.transitionSpeed;if(u.st.allowCSS3){if((!q||u.st.allowCSS3OnWebkit)){var t=B+(B?"T":"t");u._useCSS3Transitions=((t+"ransform") in G)&&((t+"ransition") in G);if(u._useCSS3Transitions){u._use3dTransform=(B+(B?"P":"p")+"erspective") in G}}}B=B.toLowerCase();u._vendorPref="-"+B+"-";u._slidesHorizontal=(u.st.slidesOrientation==="vertical")?false:true;u._reorderProp=u._slidesHorizontal?"left":"top";u._sizeProp=u._slidesHorizontal?"width":"height";u._prevNavItemId=-1;u._isMove=(u.st.transitionType==="fade")?false:true;if(!u._isMove){u.st.sliderDrag=false;u._fadeZIndex=10}u._newSlideId=0;u._sPosition=0;d.each(d.scModules,function(H,i){i.call(u)});u.slides=[];u._idCount=0;var w;var g=u.st.slides?d(u.st.slides):u.slider.children().detach();console.log(g);g.each(function(){u._parseNode(this,true);console.log("Parsing Slide: ",this)});if(u.st.randomizeSlides){u.slides.sort(function(){return 0.5-Math.random()})}u.numSlides=u.slides.length;u._refreshNumPreloadImages();if(u.st.startSlideId>u.numSlides-1){u.st.startSlideId=u.numSlides-1}u.staticSlideId=u.currSlideId=u._realId=u.st.startSlideId;u.currSlide=u.slides[u.currSlideId];u._accelerationPos=0;u.slider.addClass((u._slidesHorizontal?"scHor":"scVer")+(u._isMove?"":" scFade"));var p='<div class="scOverflow"><div class="scContainer">';u.slidesSpacing=u.st.slidesSpacing;u._slideSize=(u._slidesHorizontal?u.slider.width():u.slider.height())+u.st.slidesSpacing;u._preload=Boolean(u._numPreloadImages>0);if(u.numSlides<=1){u._loop=false}var x=(u._loop&&u._isMove)?(u.numSlides===2?1:2):0;u._loopHelpers=x;u._maxImages=u.numSlides<6?u.numSlides:6;u._currBlockIndex=0;u._idOffset=0;u.slidesJQ=[];for(z=0;z<u.numSlides;z++){u.slidesJQ.push(d(E(z)))}p+="</div></div>";u.slider.html(p);u._sliderOverflow=u.slider.children(".scOverflow");u._slidesContainer=u._sliderOverflow.children(".scContainer");u._preloader=d('<div class="scPreloader"></div>');var v=u._slidesContainer.children(".scSlide");u._currHolder=u.slidesJQ[u.currSlideId];u._selectedSlideHolder=0;function E(H,I){return'<div style="'+(u._isMove?"":(H!==u.currSlideId?"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;":"z-index: 0;  position: absolute; left: 0; top: 0;"))+'" class="scSlide '+(I||"")+'"></div>'}u._currentSlideContent=u._oldSlideContent=u.slidesJQ[u.currSlideId].find(".scContent");console.log("Current Slide Content: ",u._currentSlideContent instanceof d,"Old Slide Content: ",u._oldSlideContent instanceof d);if("ontouchstart" in c||"createTouch" in document){u.hasTouch=true;u._downEvent="touchstart.sc";u._moveEvent="touchmove.sc";u._upEvent="touchend.sc";u._cancelEvent="touchcancel.sc";u._lastItemFriction=0.5}else{u.hasTouch=false;u._lastItemFriction=0.2;if(u.st.sliderDrag){if(F.msie||F.opera){u._grabCursor=u._grabbingCursor="move"}else{if(F.mozilla){u._grabCursor="-moz-grab";u._grabbingCursor="-moz-grabbing"}else{if(q&&(navigator.platform.indexOf("Mac")!=-1)){u._grabCursor="-webkit-grab";u._grabbingCursor="-webkit-grabbing"}}}u._setGrabCursor()}u._downEvent="mousedown.sc";u._moveEvent="mousemove.sc";u._upEvent="mouseup.sc";u._cancelEvent="mouseup.sc"}if(u._useCSS3Transitions){u._TP="transition-property";u._TD="transition-duration";u._TTF="transition-timing-function";u._yProp=u._xProp=u._vendorPref+"transform";if(u._use3dTransform){if(q){u.slider.addClass("scWebkit3d")}u._tPref1="translate3d(";u._tPref2="px, ";u._tPref3="px, 0px)"}else{u._tPref1="translate(";u._tPref2="px, ";u._tPref3="px)"}if(!u._isMove){var h={};h[(u._vendorPref+u._TP)]="opacity";h[(u._vendorPref+u._TD)]=u.st.transitionSpeed+"ms";h[(u._vendorPref+u._TTF)]=u.st.css3easeInOut;v.css(h)}else{u._slidesContainer[(u._vendorPref+u._TP)]=(u._vendorPref+"transform")}}else{u._xProp="left";u._yProp="top"}var j;d(c).on("resize.sc",function(){if(j){clearTimeout(j)}j=setTimeout(function(){u.updateSliderSize()},50)});u.ev.trigger("scAfterPropsSetup");u.updateSliderSize();if(u.st.keyboardNavEnabled){u._bindKeyboardNav()}if(u.st.arrowsNavHideOnTouch&&u.hasTouch){u.st.arrowsNav=false}if(u.st.arrowsNav){var o="scArrow",s=u.st.controlsInside?u._sliderOverflow:u.slider;d('<div class="'+o+" "+o+'Left"><div class="'+o+'Icn"></div></div><div class="'+o+" "+o+'Right"><div class="'+o+'Icn"></div></div>').appendTo(s);u._arrowLeft=s.children("."+o+"Left").click(function(i){i.preventDefault();u.prev()});u._arrowRight=s.children("."+o+"Right").click(function(i){i.preventDefault();u.next()});if(u.st.arrowsNavAutoHide&&!u.hasTouch){u._arrowLeft.addClass("scHidden");u._arrowRight.addClass("scHidden");var r=s;r.one("mousemove.arrowshover",function(){u._arrowLeft.removeClass("scHidden");u._arrowRight.removeClass("scHidden")});r.hover(function(){if(!u._arrowsAutoHideLocked){u._arrowLeft.removeClass("scHidden");u._arrowRight.removeClass("scHidden")}},function(){if(!u._arrowsAutoHideLocked){u._arrowLeft.addClass("scHidden");u._arrowRight.addClass("scHidden")}})}u.ev.on("scOnUpdateNav",function(){u._updateArrowsNav()});u._updateArrowsNav()}u._hasDrag=(!u.hasTouch&&u.st.sliderDrag)||(u.hasTouch&&u.st.sliderTouch);if(u._hasDrag){u._slidesContainer.on(u._downEvent,function(i){u._onDragStart(i)})}else{u.dragSuccess=false}var n=["scPlayBtnIcon","scPlayBtn","scCloseVideoBtn","scCloseVideoIcn"];u._slidesContainer.click(function(H){if(!u.dragSuccess){var i=d(H.target);var I=i.attr("class");if(d.inArray(I,n)!==-1){if(u.toggleVideo()){return false}}if(u.st.navigateByClick&&!u._blockActions){if(d(H.target).closest(".scNoDrag",u._currHolder).length){return true}u._mouseNext(H)}}});u.ev.trigger("scAfterInit")};b.prototype={_mouseNext:function(i){var g=this;var h=i[g._slidesHorizontal?"pageX":"pageY"]-g._sliderOffset;if(h>0){g.next()}else{g.prev()}},_refreshNumPreloadImages:function(){var g=this,h;h=g.st.numImagesToPreload;g._loop=g.st.loop;if(g._loop){if(g.numSlides===2){g._loop=false;g.st.loopRewind=true}else{if(g.numSlides<2){g.st.loopRewind=g._loop=false}}}if(g._loop&&h>0){if(g.numSlides<=4){h=1}else{if(g.st.numImagesToPreload>(g.numSlides-1)/2){h=Math.floor((g.numSlides-1)/2)}}}g._numPreloadImages=h},_parseNode:function(k,g){var m=this,n,i,h,j={},o;k=d(k);m._currContent=k;m.ev.trigger("scBeforeParseNode",[k,j]);if(j.stopParsing){return}k=m._currContent;j.id=m._idCount;j.contentAdded=false;m._idCount++;if(!j.hasCover){if(k.hasClass("scImg")){o=k;n=true}else{o=k.find(".scImg");if(o.length){n=true}}if(n){j.bigImage=o.attr("data-scBigImg");if(o.is("a")){l(o,"href")}else{if(o.is("img")){l(o)}}}else{if(k.is("img")){k.addClass("scImg");l(k)}}}o=k.find(".scCaption");if(o.length){j.caption=o.remove()}if(!j.image){j.isLoaded=true;j.isRendered=false;j.isLoading=false}j.content=k;m.ev.trigger("scAfterParseNode",[k,j]);function l(q,p){j.image=q.attr(!p?"src":p);j.caption=!p?q.attr("alt"):q.contents();j.videoURL=q.attr("data-scVideo")}if(g){m.slides.push(j)}return j},_bindKeyboardNav:function(){var g=this;g._doc.on("keydown.sckb",function(h){if(!g._isDragging&&!g._isAnimating){if(h.keyCode===37){h.preventDefault();g.prev()}else{if(h.keyCode===39){h.preventDefault();g.next()}}}})},goTo:function(i,h){var g=this;if(i!==g.currSlideId){g._moveTo(i,g.st.transitionSpeed,true,!h)}},destroy:function(g){var h=this;h.ev.trigger("scBeforeDestroy");h._doc.off("keydown.sckb "+h._moveEvent+" "+h._upEvent);h._slidesContainer.on(h._downEvent,function(i){h._onDragStart(i)});h.slider.data("sonyCarousel","");if(g){h.slider.remove()}},_updateBlocksContent:function(J,t){var v=this,C,A,x,G,q,r,B,E=v._loop,D=v.numSlides;if(!isNaN(t)){return H(t)}var w=v.currSlideId;var m;var u=J?(Math.abs(v._prevSlideId-v.currSlideId)>=v.numSlides-1?0:1):v._numPreloadImages;var o=Math.min(2,u);var g=false;var F=false;var s;for(A=w;A<w+1+o;A++){s=H(A);C=v.slides[s];if(C&&(!C.isAdded||!C.positionSet)){g=true;break}}for(A=w-1;A>w-1-o;A--){s=H(A);C=v.slides[s];if(C&&(!C.isAdded||!C.positionSet)){F=true;break}}if(g){for(A=w;A<w+u+1;A++){s=H(A);m=Math.floor((v._realId-(w-A))/v.numSlides)*v.numSlides;C=v.slides[s];if(C){j(C,s)}}}if(F){for(A=w-1;A>w-1-u;A--){s=H(A);m=Math.floor((v._realId-(w-A))/D)*D;C=v.slides[s];if(C){j(C,s)}}}if(!J){var l=w;var k=u;var y=H(w-u);var z=H(w+u);var h=y>z?0:y;for(A=0;A<D;A++){if(y>z){if(A>y-1){continue}}if(A<h||A>z){C=v.slides[A];if(C&&C.holder){C.holder.detach();C.isAdded=false}}}}function j(M,K,L){var n;if(!M.isAdded){if(!L){L=v.slidesJQ[K]}if(!M.holder){L=v.slidesJQ[K]=d(L);M.holder=L}else{L=M.holder}M.appendOnLoaded=false;p(K,M,L);I(K,M);v._addBlockToContainer(M,L,J);M.isAdded=true;n=true}else{I(K,M);p(K,M)}}function I(n,K){if(!K.contentAdded){v.setItemHtml(K,J);if(!J){K.contentAdded=true}}}function p(n,L,K){if(v._isMove){if(!K){K=v.slidesJQ[n]}K.css(v._reorderProp,(n+v._idOffset+m)*v._slideSize)}}function H(i){var n=false;if(E){if(i>D-1){return H(i-D)}else{if(i<0){return H(D+i)}}}return i}},setItemHtml:function(k,j){var q=this;var l=k.content;var n=k.holder;var h=function(s){var r=s.sizeType;return function(z){var x=s.content,v=s.holder;if(z){var y=z.currentTarget;d(y).off("load error");if(z.type==="error"){s.isLoaded=true;s.image="";s.isLoading=false;x.addClass("scSlideError");v.html(x);s.holder.trigger("scAfterContentSet");q.ev.trigger("scAfterContentSet",s);return}}if(s.image){if(s.bigImage&&s.sizeType!==r){if(r==="med"){s.isMedLoading=false}else{if(r==="big"){s.isBigLoading=false}else{s.isMedLoading=s.isLoading=false}}return}if(!s.isLoaded){var A,u;if(x.hasClass("scImg")){u=true;A=x}else{u=false;A=x.find(".scImg")}if(A.length&&A.is("a")){if(u){x=d('<img class="scImg" src="'+s.image+'" />')}else{x.find(".scImg").replaceWith('<img class="scImg" src="'+s.image+'" />')}s.content=x}s.iW=y.width;if(s.iW>0){s.iH=y.height;s.isLoaded=true;s.isLoading=false;q._resizeImage(s)}}else{if(!s.isRendered&&j){g();return}q._resizeImage(s)}}else{if(!q._preload&&j&&!s.isRendered){s.isRendered=true;g();return}s.isLoaded=true;s.isLoading=false}var t=false;var w=s.id-q._newSlideId;if(!j&&!s.appendOnLoaded&&q.st.fadeinLoadedSlide&&(w===0||((t||q._isAnimating||q._isDragging)&&(w===-1||w===1)))){x.css(q._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});v.html(x);setTimeout(function(){x.css("opacity",1)},6)}else{v.html(x)}s.isRendered=true;v.find("a").off("click.sc").on("click.sc",function(B){if(q.dragSuccess){return false}else{q._blockActions=true;q.ev.trigger("scSlideClick");setTimeout(function(){q._blockActions=false},3)}});s.holder.trigger("scAfterContentSet");q.ev.trigger("scAfterContentSet",s);if(s.appendOnLoaded){q._addBlockToContainer(s,x,j)}}};if(k.isLoaded){h(k)()}else{if(j){g()}else{i()}}function i(){if(!k.image){h(k)();return}if(!k.isLoading){m(d("<img/>"),k.image)}else{var r=1;var s=function(v){var u=v==="big"?k.isBigLoaded:k.isMedLoaded;if(!k.isLoading){return}if(k.isLoaded){h(k)();return}if(r%50===0){var t=k.imageLoader;if(t.complete&&t.naturalWidth!==f&&t.naturalWidth!==0&&t.naturalHeight!==0){h(k)();return}}if(r>300){return}setTimeout(s,400);r++};s(k.sizeType)}}function m(r,s){if(!j){if(!k.isLoading){if(!s){s=r.attr("src");r=d("<img/>")}o(n);k.isLoading=true;k.imageLoader=r;r.one("load error",h(k)).attr("src",s)}}else{g()}}function p(r){if(r){if(!r.complete||r.naturalWidth===f||r.naturalWidth===0){return false}}else{return false}return true}function g(){n.isWaiting=true;o(n);n.slideId=-99}function o(r){k.holder.html(q._preloader.clone())}},_addBlockToContainer:function(m,l,g){var i=this;var j=m.holder;var k=m.id-i._newSlideId;var h=false;if(i._isMove&&!g&&i.st.fadeinLoadedSlide&&(k===0||((h||i._isAnimating||i._isDragging)&&(k===-1||k===1)))){var l=m.content;l.css(i._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});i._slidesContainer.append(j);setTimeout(function(){l.css("opacity",1)},6)}else{i._slidesContainer.append(j)}m.appendOnLoaded=false},_onDragStart:function(k,l){var h=this,g,i;h.dragSuccess=false;if(d(k.target).closest(".scNoDrag",h._currHolder).length){return true}if(!l){if(h._isAnimating){i=true;h._stopAnimation()}}if(h._isDragging){if(h.hasTouch){h._multipleTouches=true}return}else{if(h.hasTouch){h._multipleTouches=false}}h._setGrabbingCursor();if(h.hasTouch){var j=k.originalEvent.touches;if(j&&j.length>0){g=j[0];if(j.length>1){h._multipleTouches=true}}else{return}}else{g=k;k.preventDefault()}h._isDragging=true;h._doc.on(h._moveEvent,function(m){h._onDragMove(m,l)}).on(h._upEvent,function(m){h._onDragRelease(m,l)});h._currMoveAxis="";h._hasMoved=false;h._pageX=g.pageX;h._pageY=g.pageY;h._startPagePos=h._accelerationPos=(!l?h._slidesHorizontal:h._thumbsHorizontal)?g.pageX:g.pageY;h._horDir=0;h._verDir=0;h._currRenderPosition=!l?h._sPosition:h._thumbsPosition;h._startTime=new Date().getTime();if(h.hasTouch){h._sliderOverflow.on(h._cancelEvent,function(m){h._onDragRelease(m,l)})}},_renderMovement:function(q,i){var r=this;if(r._checkedAxis){var m=r._renderMoveTime,n=q.pageX-r._pageX,k=q.pageY-r._pageY,g=r._currRenderPosition+n,s=r._currRenderPosition+k,p=(!i?r._slidesHorizontal:r._thumbsHorizontal),o=p?g:s,h=r._currMoveAxis;r._hasMoved=true;r._pageX=q.pageX;r._pageY=q.pageY;var j=p?r._pageX:r._pageY;if(h==="x"&&n!==0){r._horDir=n>0?1:-1}else{if(h==="y"&&k!==0){r._verDir=k>0?1:-1}}var l=p?n:k;if(!i){if(!r._loop){if(r.currSlideId<=0){if(j-r._startPagePos>0){o=r._currRenderPosition+l*r._lastItemFriction}}if(r.currSlideId>=r.numSlides-1){if(j-r._startPagePos<0){o=r._currRenderPosition+l*r._lastItemFriction}}}}else{if(o>r._thumbsMinPosition){o=r._currRenderPosition+l*r._lastItemFriction}else{if(o<r._thumbsMaxPosition){o=r._currRenderPosition+l*r._lastItemFriction}}}r._currRenderPosition=o;if(m-r._startTime>200){r._startTime=m;r._accelerationPos=j}if(!i){if(r._isMove){r._setPosition(r._currRenderPosition)}}else{r._setThumbsPosition(r._currRenderPosition)}}},_onDragMove:function(m,n){var i=this,g;if(i.hasTouch){if(i._lockAxis){return}var l=m.originalEvent.touches;if(l){if(l.length>1){return}else{g=l[0]}}else{return}}else{g=m}if(!i._hasMoved){if(i._useCSS3Transitions){(!n?i._slidesContainer:i._thumbsContainer).css((i._vendorPref+i._TD),"0s")}(function h(){if(i._isDragging){i._animFrame=requestAnimationFrame(h);if(i._renderMoveEvent){i._renderMovement(i._renderMoveEvent,n)}}})()}if(!i._checkedAxis){var j=(!n?i._slidesHorizontal:i._thumbsHorizontal),k=(Math.abs(g.pageX-i._pageX)-Math.abs(g.pageY-i._pageY))-(j?-7:7);if(k>7){if(j){m.preventDefault();i._currMoveAxis="x"}else{if(i.hasTouch){i._completeGesture();return}}i._checkedAxis=true}else{if(k<-7){if(!j){m.preventDefault();i._currMoveAxis="y"}else{if(i.hasTouch){i._completeGesture();return}}i._checkedAxis=true}}return}m.preventDefault();i._renderMoveTime=new Date().getTime();i._renderMoveEvent=g},_completeGesture:function(){var g=this;g._lockAxis=true;g._hasMoved=g._isDragging=false;g._onDragRelease()},_onDragRelease:function(H,y){var A=this,x,F,g,o,n,k,r,j;A.ev.trigger("scDragRelease");A._renderMoveEvent=null;A._isDragging=false;A._lockAxis=false;A._checkedAxis=false;A._renderMoveTime=0;cancelAnimationFrame(A._animFrame);if(A._hasMoved){if(!y){if(A._isMove){A._setPosition(A._currRenderPosition)}}else{A._setThumbsPosition(A._currRenderPosition)}}A._doc.off(A._moveEvent).off(A._upEvent);if(A.hasTouch){A._sliderOverflow.off(A._cancelEvent)}A._setGrabCursor();if(!A._hasMoved&&!A._multipleTouches){if(y&&A._thumbsEnabled){var I=d(H.target).closest(".scNavItem");if(I.length){A.goTo(I.index())}return}}var w=(!y?A._slidesHorizontal:A._thumbsHorizontal);if(!A._hasMoved||(A._currMoveAxis==="y"&&w)||(A._currMoveAxis==="x"&&!w)){return}A.dragSuccess=true;A._currMoveAxis="";function i(L){if(L<100){return 100}else{if(L>500){return 500}}return L}function v(M,L){if(A._isMove||y){n=(-A._realId-A._idOffset)*A._slideSize;k=Math.abs(A._sPosition-n);A._currAnimSpeed=k/L;if(M){A._currAnimSpeed+=250}A._currAnimSpeed=i(A._currAnimSpeed);A._animateTo(n,false)}}var p=A.st.minSlideOffset,C=A.hasTouch?H.originalEvent.changedTouches[0]:H,s=w?C.pageX:C.pageY,D=A._startPagePos,u=A._accelerationPos,E=A.currSlideId,K=A.numSlides,B=w?A._horDir:A._verDir,J=A._loop,z=false,h=0;x=Math.abs(s-D);F=s-u;g=(new Date().getTime())-A._startTime;o=Math.abs(F)/g;if(B===0||K<=1){v(true,o);return}if(!J&&!y){if(E<=0){if(B>0){v(true,o);return}}else{if(E>=K-1){if(B<0){v(true,o);return}}}}if(!y){if(D+p<s){if(B<0){v(false,o);return}A._moveTo("prev",i(Math.abs(A._sPosition-(-A._realId-A._idOffset+1)*A._slideSize)/o),z,true,true)}else{if(D-p>s){if(B>0){v(false,o);return}A._moveTo("next",i(Math.abs(A._sPosition-(-A._realId-A._idOffset-1)*A._slideSize)/o),z,true,true)}else{v(false,o)}}}else{var n=A._thumbsPosition;var m;if(n>A._thumbsMinPosition){n=A._thumbsMinPosition}else{if(n<A._thumbsMaxPosition){n=A._thumbsMaxPosition}else{var t=0.003,q=(o*o)/(t*2),G=-A._thumbsPosition,l=A._thumbsContainerSize-A._thumbsViewportSize+A._thumbsPosition;if(F>0&&q>G){G=G+A._thumbsViewportSize/(15/(q/o*t));o=o*G/q;q=G}else{if(F<0&&q>l){l=l+A._thumbsViewportSize/(15/(q/o*t));o=o*l/q;q=l}}m=Math.max(Math.round(o/t),50);n=n+q*(F<0?-1:1);if(n>A._thumbsMinPosition){A._animateThumbsTo(n,m,true,A._thumbsMinPosition,200);return}else{if(n<A._thumbsMaxPosition){A._animateThumbsTo(n,m,true,A._thumbsMaxPosition,200);return}}}}A._animateThumbsTo(n,m,true)}},_setPosition:function(h){var g=this;h=g._sPosition=h;if(g._useCSS3Transitions){g._slidesContainer.css(g._xProp,g._tPref1+(g._slidesHorizontal?(h+g._tPref2+0):(0+g._tPref2+h))+g._tPref3)}else{g._slidesContainer.css(g._slidesHorizontal?g._xProp:g._yProp,h)}},updateSliderSize:function(h){var q=this,l,g;if(q.st.beforeResize){q.st.beforeResize.call(q)}if(q.st.autoScaleSlider){var o=q.st.autoScaleSliderWidth,n=q.st.autoScaleSliderHeight;if(q.st.autoScaleHeight){l=q.slider.width();if(l!=q.width){q.slider.css("height",l*(n/o));l=q.slider.width()}g=q.slider.height()}else{g=q.slider.height();if(g!=q.height){q.slider.css("width",g*(o/n));g=q.slider.height()}l=q.slider.width()}}else{l=q.slider.width();g=q.slider.height()}q._sliderOffset=q.slider.offset();q._sliderOffset=q._sliderOffset[q._reorderProp];if(h||l!=q.width||g!=q.height){q.width=l;q.height=g;q._wrapWidth=l;q._wrapHeight=g;q.ev.trigger("scBeforeSizeSet");q._sliderOverflow.css({width:q._wrapWidth,height:q._wrapHeight});q._slideSize=(q._slidesHorizontal?q._wrapWidth:q._wrapHeight)+q.st.slidesSpacing;q._imagePadding=q.st.imageScalePadding;var p,m,k,j;for(k=0;k<q.slides.length;k++){p=q.slides[k];p.positionSet=false;if(p&&p.image&&p.isLoaded){p.isRendered=false;q._resizeImage(p)}}if(q._cloneHolders){for(k=0;k<q._cloneHolders.length;k++){p=q._cloneHolders[k];p.holder.css(q._reorderProp,(p.id+q._idOffset)*q._slideSize)}}q._updateBlocksContent();if(q._isMove){if(q._useCSS3Transitions){q._slidesContainer.css(q._vendorPref+"transition-duration","0s")}q._setPosition((-q._realId-q._idOffset)*q._slideSize)}q.ev.trigger("scOnUpdateNav");if(q.st.afterResize){q.st.afterResize.call(q)}}},setSlidesOrientation:function(g){},appendSlide:function(h,i){var g=this,j=g._parseNode(h);if(isNaN(i)||i>g.numSlides){i=g.numSlides}g.slides.splice(i,0,j);g.slidesJQ.splice(i,0,'<div style="'+(g._isMove?"position: absolute;":"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;")+'" class="scSlide"></div>');if(i<g.currSlideId){g.currSlideId++}g.ev.trigger("scOnAppendSlide",[j,i]);g._refreshSlides(i);if(i===g.currSlideId){g.ev.trigger("scAfterSlideChange")}},removeSlide:function(i){var h=this,g=h.slides[i];if(g){if(g.holder){g.holder.remove()}if(i<h.currSlideId){h.currSlideId++}h.slides.splice(i,1);h.slidesJQ.splice(i,1);h.ev.trigger("scOnRemoveSlide",[i]);h._refreshSlides(i);if(i===h.currSlideId){h.ev.trigger("scAfterSlideChange")}}},_refreshSlides:function(k){var h=this,g=h.numSlides,j=h._realId<=0?0:Math.floor(h._realId/g);h.numSlides=h.slides.length;if(h.numSlides===0){h.currSlideId=h._idOffset=h._realId=0;h.currSlide=h._oldHolder=null}else{h._realId=j*h.numSlides+h.currSlideId}for(var l=0;l<h.numSlides;l++){h.slides[l].id=l}h._oldSlideContent=h.currSlide.find(".scContent");h.currSlide=h.slides[h.currSlideId];h._currHolder=h.slidesJQ[h.currSlideId];if(h.currSlideId>=h.numSlides){h.goTo(h.numSlides-1)}else{if(h.currSlideId<0){h.goTo(0)}}h._refreshNumPreloadImages();if(h._isMove&&h._loop){h._slidesContainer.css((h._vendorPref+h._TD),"0ms")}if(h._refreshSlidesTimeout){clearTimeout(h._refreshSlidesTimeout)}h._refreshSlidesTimeout=setTimeout(function(){h._setPosition((-h._realId-h._idOffset)*h._slideSize);h._updateBlocksContent()},14);h.ev.trigger("scOnUpdateNav")},_setGrabCursor:function(){var g=this;if(!g.hasTouch&&g._isMove){if(g._grabCursor){g._sliderOverflow.css("cursor",g._grabCursor)}else{g._sliderOverflow.removeClass("grabbing-cursor");g._sliderOverflow.addClass("grab-cursor")}}},_setGrabbingCursor:function(){var g=this;if(!g.hasTouch&&g._isMove){if(g._grabbingCursor){g._sliderOverflow.css("cursor",g._grabbingCursor)}else{g._sliderOverflow.removeClass("grab-cursor");g._sliderOverflow.addClass("grabbing-cursor")}}},next:function(h){var g=this;g._moveTo("next",g.st.transitionSpeed,true,!h)},prev:function(h){var g=this;g._moveTo("prev",g.st.transitionSpeed,true,!h)},_moveTo:function(l,z,m,r,w){var s=this,k,C,y,t;if(s._isVideoPlaying){s.stopVideo()}s.ev.trigger("scBeforeMove",[l,r]);if(l==="next"){t=s.currSlideId+1}else{if(l==="prev"){t=s.currSlideId-1}else{t=l=parseInt(l,10)}}if(!s._loop){if(t<0){s._doBackAndForthAnim("left",!r);return}else{if(t>=s.numSlides){s._doBackAndForthAnim("right",!r);return}}}if(s._isAnimating){s._stopAnimation();m=false}C=t-s.currSlideId;s._prevSlideId=s.currSlideId;s._oldSlideContent=s.slidesJQ[s._prevSlideId].find(".scContent");var j=s.currSlideId;var u=s.currSlideId+C;var n=s._realId;var B;var x;if(s._loop){u=s._updateBlocksContent(false,u);n+=C}else{n=u}s._newSlideId=u;s._oldHolder=s.slidesJQ[s.currSlideId];s._realId=n;s.currSlideId=s._newSlideId;s.currSlide=s.slides[s.currSlideId];s._currHolder=s.slidesJQ[s.currSlideId];var h=2;var v=Boolean(C>0);var q=Math.abs(C);var g=Math.floor(j/s._numPreloadImages);var E=Math.floor((j+(v?h:-h))/s._numPreloadImages);var D=v?Math.max(g,E):Math.min(g,E);var A=D*s._numPreloadImages+(v?(s._numPreloadImages-1):0);if(A>s.numSlides-1){A=s.numSlides-1}else{if(A<0){A=0}}var o=v?(A-j):(j-A);if(o>s._numPreloadImages){o=s._numPreloadImages}if(q>o+h){s._idOffset+=(q-(o+h))*(v?-1:1);z=z*1.4;for(y=0;y<s.numSlides;y++){s.slides[y].positionSet=false}}s._currAnimSpeed=z;s._updateBlocksContent(true);if(!w){x=true}k=(-n-s._idOffset)*s._slideSize;if(x){setTimeout(function(){s._isWorking=false;s._animateTo(k,l,false,m);s.ev.trigger("scOnUpdateNav")},0)}else{s._animateTo(k,l,false,m);s.ev.trigger("scOnUpdateNav")}function p(i){if(i<0){i=s.numSlides+i}else{if(i>s.numSlides-1){i=i-s.numSlides}}if(i!==s.currSlideId){return false}return true}},_updateArrowsNav:function(){var g=this,h="scArrowDisabled";if(g.st.arrowsNav){if(g.numSlides<=1){g._arrowLeft.css("display","none");g._arrowRight.css("display","none");return}else{g._arrowLeft.css("display","block");g._arrowRight.css("display","block")}if(!g._loop&&!g.st.loopRewind){if(g.currSlideId===0){g._arrowLeft.addClass(h)}else{g._arrowLeft.removeClass(h)}if(g.currSlideId===g.numSlides-1){g._arrowRight.addClass(h)}else{g._arrowRight.removeClass(h)}}}},_animateTo:function(n,h,g,l,i){var p=this,j,k,m;if(isNaN(p._currAnimSpeed)){p._currAnimSpeed=400}p._sPosition=p._currRenderPosition=n;p.ev.trigger("scBeforeAnimStart");if(p.st.beforeSlideChange){p.st.beforeSlideChange.call(p)}p._currentSlideContent=p.slidesJQ[p.currSlideId].find(".scContent");console.log("ANIMATION STARTED",p._currentSlideContent.attr("id"));p._currentSlideContent.trigger("slidestart.sc");if(!p._useCSS3Transitions){if(p._isMove){animObj[p._slidesHorizontal?p._xProp:p._yProp]=n+"px";p._slidesContainer.animate(animObj,p._currAnimSpeed,l?p.st.easeInOut:p.st.easeOut)}else{k=p._oldHolder;m=p._currHolder;m.stop(true,true).css({opacity:0,display:"block",zIndex:p._fadeZIndex});p._currAnimSpeed=p.st.transitionSpeed;m.animate({opacity:1},p._currAnimSpeed,p.st.easeInOut);o();if(k){k.data("scTimeout",setTimeout(function(){k.stop(true,true).css({opacity:0,display:"none",zIndex:0})},p._currAnimSpeed+60))}}}else{if(p._isMove){animObj[(p._vendorPref+p._TD)]=p._currAnimSpeed+"ms";animObj[(p._vendorPref+p._TTF)]=l?d.scCSS3Easing[p.st.easeInOut]:d.scCSS3Easing[p.st.easeOut];p._slidesContainer.css(animObj);console.log("Current animation block -------> ",animObj);setTimeout(function(){p._setPosition(n)},p.hasTouch?5:0)}else{p._currAnimSpeed=p.st.transitionSpeed;k=p._oldHolder;m=p._currHolder;console.log("Current animation block -------> ",m);if(m.data("scTimeout")){m.css("opacity",0)}o();if(k){k.data("scTimeout",setTimeout(function(){animObj[p._vendorPref+p._TD]="0ms";animObj.zIndex=0;animObj.display="none";k.data("scTimeout","");k.css(animObj);setTimeout(function(){k.css("opacity",0)},16)},p._currAnimSpeed+60))}animObj.display="block";animObj.zIndex=p._fadeZIndex;animObj.opacity=0;animObj[p._vendorPref+p._TD]="0ms";animObj[p._vendorPref+p._TTF]=d.scCSS3Easing[p.st.easeInOut];m.css(animObj);m.data("scTimeout",setTimeout(function(){m.css(p._vendorPref+p._TD,p._currAnimSpeed+"ms");m.data("scTimeout",setTimeout(function(){m.css("opacity",1);m.data("scTimeout","")},20))},20))}}p._isAnimating=true;if(p.loadingTimeout){clearTimeout(p.loadingTimeout)}if(i){p.loadingTimeout=setTimeout(function(){p.loadingTimeout=null;i.call()},p._currAnimSpeed+60)}else{p.loadingTimeout=setTimeout(function(){p.loadingTimeout=null;p._animationComplete(h)},p._currAnimSpeed+60)}function o(){var q=k.data("scTimeout");if(q){if(k!==m){k.css({opacity:0,display:"none",zIndex:0})}clearTimeout(q);k.data("scTimeout","")}q=m.data("scTimeout");if(q){clearTimeout(q);m.data("scTimeout","")}}},_stopAnimation:function(){var g=this;g._isAnimating=false;clearTimeout(g.loadingTimeout);if(g._isMove){if(!g._useCSS3Transitions){g._slidesContainer.stop(true);g._sPosition=parseInt(g._slidesContainer.css(g._xProp),10)}else{var h=g._sPosition;var i=g._currRenderPosition=g._getTransformProp();g._slidesContainer.css((g._vendorPref+g._TD),"0ms");if(h!==i){g._setPosition(i)}}}else{if(g._fadeZIndex>20){g._fadeZIndex=10}else{g._fadeZIndex++}}},_getTransformProp:function(){var h=this,i=c.getComputedStyle(h._slidesContainer.get(0),null).getPropertyValue(h._vendorPref+"transform"),g=i.replace(/^matrix\(/i,"").split(/, |\)$/g);return parseInt(g[(h._slidesHorizontal?4:5)],10)},_getCSS3Prop:function(i,h){var g=this;return g._useCSS3Transitions?g._tPref1+(h?(i+g._tPref2+0):(0+g._tPref2+i))+g._tPref3:i},_animationComplete:function(h){var g=this;if(!g._isMove){g._currHolder.css("z-index",0);g._fadeZIndex=10}g._isAnimating=false;g.staticSlideId=g.currSlideId;g._updateBlocksContent();g._slidesMoved=false;g.ev.trigger("scAfterSlideChange");g._oldSlideContent.trigger("slideend.sc");console.log("ANIMATION COMPLETE",g._oldSlideContent.attr("id"));if(g.st.afterSlideChange){g.st.afterSlideChange.call(g)}},_doBackAndForthAnim:function(j,m){var g=this,i=(-g._realId-g._idOffset)*g._slideSize,l=30;if(g.numSlides===0){return}if(g.st.loopRewind){if(j==="left"){g.goTo(g.numSlides-1,m)}else{g.goTo(0,m)}return}if(g._isAnimating){return}if(g._isMove){if(l!==0){g._currAnimSpeed=200;var k=function(){g._isAnimating=false};var h=function(){g._isAnimating=false;g._animateTo(i,"",false,true,k)};g._animateTo(i+(j==="left"?l:-l),"",false,true,h)}}},_resizeImage:function(g,z){var t=true;if(g.isRendered){return}var A=g.content,x="scImg",u,s=this,q=s.st.imageAlignCenter,p=s.st.imageScaleMode,w;if(g.videoURL){x="scVideoContainer";if(p!=="fill"){u=true}else{w=A;if(!w.hasClass(x)){w=w.find("."+x)}w.css({width:"100%",height:"100%"});x="scImg"}}if(!A.hasClass(x)){t=false;A=A.find("."+x)}var n=g.iW,j=g.iH,i;g.isRendered=true;if(p==="none"&&!q){return}if(p!=="fill"){i=s._imagePadding}else{i=0}var o=s._wrapWidth-i*2,r=s._wrapHeight-i*2,k,h,l,m,v,y={};if(p==="fit-if-smaller"){if(n>o||j>r){p="fit"}}if(p==="fill"||p==="fit"){k=o/n;h=r/j;if(p=="fill"){l=k>h?k:h}else{if(p=="fit"){l=k<h?k:h}else{l=1}}m=Math.ceil(n*l,10);v=Math.ceil(j*l,10)}else{m=n;v=j}if(p!=="none"){y.width=m;y.height=v;if(u){A.find(".scImg").css({width:"100%",height:"100%"})}}if(q){y.marginLeft=Math.floor((o-m)/2)+i;y.marginTop=Math.floor((r-v)/2)+i}A.css(y)}};d.scProto=b.prototype;d.fn.sonyCarousel=function(h){var g=arguments;return this.each(function(){var j=d(this);if(typeof h==="object"||!h){if(!j.data("sonyCarousel")){j.data("sonyCarousel",new b(j,h))}}else{var i=j.data("sonyCarousel");if(i&&i[h]){return i[h].apply(i,Array.prototype.slice.call(g,1))}}})};d.fn.sonyCarousel.defaults={slidesSpacing:0,startSlideId:0,loop:false,loopRewind:false,numImagesToPreload:4,fadeinLoadedSlide:true,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:true,arrowsNav:true,arrowsNavAutoHide:true,navigateByClick:true,randomizeSlides:false,sliderDrag:true,sliderTouch:true,keyboardNavEnabled:false,fadeInAfterLoaded:true,allowCSS3:true,allowCSS3OnWebkit:true,addActiveClass:false,autoHeight:false,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:true,imageScalePadding:4,autoScaleSlider:false,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:true,arrowsNavHideOnTouch:false,globalCaption:false,beforeSlideChange:null,afterSlideChange:null,beforeResize:null,afterResize:null};d.scCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"};d.extend(jQuery.easing,{easeInOutSine:function(h,i,g,k,j){return -k/2*(Math.cos(Math.PI*i/j)-1)+g},easeOutSine:function(h,i,g,k,j){return k*Math.sin(i/j*(Math.PI/2))+g},easeOutCubic:function(h,i,g,k,j){return k*((i=i/j-1)*i*i+1)+g}});d(c).load(function(){d(".sonyCarousel").each(function(){var g=d(this),h={arrowsNav:true,fadeinLoadedSlide:true,imageAlignCenter:true,imageScaleMode:"fill",controlNavigation:"bullets",keyboardNavEnabled:true,slidesOrientation:"horizontal",autoScaleSlider:true};d.each(g.data(),function(i,j){console.log("stripping datasets off $el: ",i.toUpperCase()," === ",g.data(i));h[i]=j});g.sonyCarousel(h)})})})(jQuery,Modernizr,window,undefined);