(function(b){var a="rangecontrol";var c=function(e,g){b.extend(this,b.fn.rangeControl.defaults,g,b.fn.rangeControl.settings);var f=this,h=function(){var i=this;i.$rail=e;i.evts.down=(!i.isTouch?"mousedown":"touchstart")+"."+a;i.evts.move=(!i.isTouch?"mousemove":"touchmove")+"."+a;i.evts.up=(!i.isTouch?"mouseup":"touchend")+"."+a;if(i.$rail.css("position")==="static"){i.$rail.css("position","relative")}i.orientation=i.orientation==="v"?"v":"h";i.dimension=i.orientation==="h"?"width":"height";i.property=i.orientation==="h"?"left":"top";i.$handle=i.$handle instanceof jQuery?i.$handle:b("<span/>",{"class":"handle"});i.$handle.attr("unselectable","on").css(i.handleCss);if(i.range){i.$minHandle=i.$minHandle instanceof jQuery?i.$minHandle:b("<span/>",{"class":"handle"});i.$minHandle.data("min",true).addClass(a+"-min-handle").attr("unselectable","on").css(i.handleCss);i.$handle.data("max",true).addClass(a+"-max-handle")}if(i.$rail.find(i.$handle).length===0){i.$rail.append(i.$handle);if(i.range){i.$rail.append(i.$minHandle)}}if(i.hideHandle){i.$handle.css({opacity:"0",background:"none",border:"none"})}if(i.hideHandle&&i.hideAmbit){console.warn("**HEY!** $handle and $ambit can't both be false!")}if(!i.hideAmbit){i.$ambit=i.$ambit instanceof jQuery?i.$ambit:b("<span/>",{"class":"ambit"});if(i.$rail.find(i.$ambit).length===0){i.$rail.append(i.$ambit)}i.$ambit.css({display:"block",position:"absolute"}).css(i.property,0)}else{i.$ambit=false}},d=function(){var i=f.range?f.$handle.add(f.$minHandle):f.$handle,j=b("body");i.on("selectstart dragstart mousedown",function(){return false});i.on(f.evts.down,function(k){if(f.inMotion){return}k.preventDefault();var n=this.className.indexOf("min")>-1?f.$minHandle:f.$handle,m=!f.range?"":this.className.indexOf("min")>-1?"grabbing-min":"grabbing-max",l=f.$rail.offset();f.inMotion=true;j.addClass("grabbing "+m);n.addClass("grabbed");f.fire(f.evts.start);b(document).on(f.evts.move,function(r){r.preventDefault();var s=f.isTouch?r.originalEvent.targetTouches[0]:null,q=f.isTouch?s.pageX:r.pageX,p=f.isTouch?s.pageY:r.pageY,o=0;if(f.orientation==="h"){o=q-l.left}else{o=p-l.top}f.slideToPos(o,n)}).on(f.evts.up,function(){b(document).off("."+a);f.inMotion=false;j.removeClass("grabbing "+m);i.removeClass("grabbed");f.fire(f.evts.end)})}).on("click."+a,function(k){k.stopPropagation()});f.$rail.on("click",function(l){if(!f.inMotion){var m=f.$rail.offset();var k;if(f.orientation==="h"){k=l.pageX-m.left}else{k=l.pageY-m.top}f.slideToPos(k)}});b(window).on("resize."+a,function(){f.refresh(false)})};h.call(f);d.call(f);f.reset(true)};c.prototype.slideToInitialPos=function(){var d=this;if(!d.range){d.slideToInitialVal()}else{d.slideToInitialMin();d.slideToInitialMax()}};c.prototype.slideToInitialVal=function(){this.slideToPos(this.parseHandlePosition(this.initialValue))};c.prototype.slideToInitialMin=function(){this.slideToPos(this.parseHandlePosition(this.initialMin),this.$minHandle)};c.prototype.slideToInitialMax=function(){this.slideToPos(this.parseHandlePosition(this.initialMax),this.$handle)};c.prototype.parseHandlePosition=function(d){var e=this,f=0;if(b.type(d)==="number"&&d){f=d*(e.steps?e.stepSize:1)}else{if(b.type(d)==="string"){if(d.indexOf("px")>-1){f=parseInt(d,10)}else{if(d.indexOf("%")>-1){f=e.railSize*(parseInt(d,10)/100)}}}}return f};c.prototype.slideToPos=function(e,k){k=k||this.$handle;var g=this,h={},j=k.data("min")===true,f,d,i=function(l){return Math.round(l/g.stepSize)};e=g.validatePos(e,j);if(g.steps){f=i(g.currentPosition);d=i(e);h={oldStep:f,newStep:d,stepDelta:d-f};e=d*g.stepSize;if(h.stepDelta){g.goToPos(e,k,h)}}else{h={oldPosition:g.currentPosition,newPosition:e,positionDelta:e-g.currentPosition};g.goToPos(e,k,h)}return this};c.prototype.validatePos=function(d,f){var e=this;if(d<0){d=0}if(d>e.railSize){d=e.railSize}if(e.range){if(f){if(e.currentPosition!==false&&d>e.currentPosition){d=e.currentPosition}}else{if(e.currentMinPosition!==false&&d<e.currentMinPosition){d=e.currentMinPosition}}}return d};c.prototype.goToPos=function(g,f){var e=this,d=[];f[0].style[e.property]=(g/e.railSize*100)+"%";if(!e.range){e.currentPosition=g;e.currentPositionPct=g/e.railSize*100}else{if(e.isHidden){e.currentPosition=e.parseHandlePosition(e.initialMax);e.currentMinPosition=e.parseHandlePosition(e.initialMin)}else{e.currentPosition=parseInt(e.$handle.css(e.property),10);e.currentMinPosition=parseInt(e.$minHandle.css(e.property),10)}e.currentPositionPct=Math.min(e.currentPosition/e.railSize*100,100);e.currentMinPositionPct=Math.min(e.currentMinPosition/e.railSize*100,100);if(e.currentPositionPct>99.49){e.currentPositionPct=100}else{if(e.currentPositionPct<0.5){e.currentPositionPct=0}}if(e.currentMinPositionPct>99.49){e.currentMinPositionPct=100}else{if(e.currentMinPositionPct<0.5){e.currentMinPositionPct=0}}e.$ambit[e.dimension](e.getHandleDist()+"%");e.$ambit.css(e.property,e.currentMinPositionPct+"%")}if(e.$ambit&&!e.range){e.$ambit[e.dimension](e.currentPositionPct+"%")}if(e.range){d=[{min:e.currentMinPosition,max:e.currentPosition},{min:e.currentMinPositionPct,max:e.currentPositionPct},e]}else{d=[e.currentPositionPct,e]}e.fire(e.evts.slid,d);return e};c.prototype.getHandleDist=function(){var d=this,e=parseFloat(d.$handle[0].style[d.property])-parseFloat(d.$minHandle[0].style[d.property]);return e};c.prototype.slideToStep=function(d){this.slideToPos(d*(this.steps?this.stepSize:1));return this};c.prototype.updateSize=function(d){var f=this,e;e=f.orientation==="h"?f.$rail.outerWidth():f.$rail.outerHeight();if(e!==f.railSize){f.railSize=e||f.railSize;if(f.steps){f.stepSize=f.railSize/f.steps}if(d!==false){f.slideToPos(f.currentPosition);if(f.range){f.slideToPos(f.currentMinPosition,f.$minHandle)}}}return f};c.prototype.fire=function(e,d){this.$rail.trigger(e+"."+a,d||[this])};c.prototype.refresh=function(d){var e=this;e.isHidden=e.$rail.is(":hidden");e.updateSize(d);return this};c.prototype.reset=function(d){var f=this,e=f.$handle[0].style[f.property].indexOf("%")>-1;f.refresh(false);if(d||!e){f.slideToInitialPos()}else{if(!f.range){f.slideToPos(f.parseHandlePosition(f.$handle[0].style[f.property]))}else{f.slideToPos(f.parseHandlePosition(f.$minHandle[0].style[f.property]),f.$minHandle);f.slideToPos(f.parseHandlePosition(f.$handle[0].style[f.property]),f.$handle)}}};c.prototype.destroy=function(){var d=this;d.$rail.empty().removeData("rangeControl")};b.fn.rangeControl=function(e){var d=Array.prototype.slice.apply(arguments);return this.each(function(){var f=b(this),g=f.data("rangeControl");if(!g){g=new c(f,e);f.data("rangeControl",g)}if(typeof e==="string"){g[e].apply(g,d.slice(1))}})};b.fn.rangeControl.defaults={initialValue:0,steps:0,orientation:"h",hideHandle:false,hideAmbit:false,$handle:null,$ambit:null,callback:null,range:false,initialMin:"0",initialMax:"100%"};b.fn.rangeControl.settings={isTouch:!!("ontouchstart" in window),inMotion:false,stepSize:0,railSize:false,currentPosition:false,currentPositionPct:false,currentMinPosition:false,currentMinPositionPct:false,evts:{start:"scrubstart",end:"scrubend",slid:"slid"},handleCss:{display:"block",position:"absolute",top:0,left:0,MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"}}}(jQuery));
/*!
 * jQuery Shuffle Plugin
 * Uses CSS Transforms to filter down a grid of items (degrades to jQuery's animate).
 * Inspired by Isotope http://isotope.metafizzy.co/
 * Use it for whatever you want!
 * @author Glen Cheney (http://glencheney.com)
 * @version 1.6.1
 * @date 12/06/12
 */
!(function(b,c,d){b.fn.sorted=function(g){var h=b.extend({},b.fn.sorted.defaults,g),e=this.get(),f=false;if(h.by!==b.noop&&h.by!==null&&h.by!==d){e.sort(function(k,i){if(f){return 0}var l=h.by(b(k)),j=h.by(b(i));if(l===d&&j===d){f=true;return 0}return(l<j)?-1:(l>j)?1:0})}if(f){return this.get()}if(h.reverse){e.reverse()}return e};b.fn.sorted.defaults={reverse:false,by:null};var a=function(i,f){var e=this,h=b(window);b.extend(e,b.fn.shuffle.options,f,b.fn.shuffle.settings);e.$container=i.addClass("shuffle");e.$items=e._getItems().addClass("shuffle-item");e.transitionName=e.prefixed("transition"),e.transform=e.getPrefixed("transform");e.fire("loading");e.offset={left:parseInt((e.$container.css("padding-left")||0),10),top:parseInt((e.$container.css("padding-top")||0),10)};e.isFluid=e.columnWidth&&typeof e.columnWidth==="function";var g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};e.transitionEndName=g[e.transitionName];e.itemCss={position:"absolute",top:0,left:0};if(e.$container.css("position")==="static"){e.$container.css("position","relative")}e.$container[0].style[e.transitionName]="height "+e.speed+"ms "+e.easing;e._initItems(!e.showInitialTransition);e.windowHeight=h.height();e.windowWidth=h.width();h.on("resize.shuffle",function(){var j=h.height(),k=h.width();if(k!==e.windowWidth||j!==e.windowHeight){e.resized();e.windowHeight=j;e.windowWidth=k}});e._setColumns();e._resetCols();e.shuffle(e.group);if(!e.showInitialTransition){e._initItems()}e.fire("done")};a.prototype={constructor:a,shuffle:function(f){var e=this;if(!f){f="all"}e.filter(f);e.lastFilter=f;e.visibleItems=e.$items.filter(".filtered").length;e._resetCols();e.shrink();e._reLayout()},filter:function(g,i){var f=this,h=i!==d,j=h?i:f.$items,e=b();g=g||f.lastFilter;f.fire("filter");j.removeClass("concealed filtered");if(b.isFunction(g)){j.each(function(){var k=b(this),l=g.call(k[0],k,f);k.addClass(l?"filtered":"concealed");if(l){e=e.add(k)}})}else{f.group=g;if(g!=="all"){j.each(function(){var n=b(this),k=n.data("groups"),m=f.delimeter&&!b.isArray(k)?k.split(f.delimeter):k,l=b.inArray(g,m)>-1,o=l?"concealed":"filtered";n.addClass(o);if(l){e=e.add(n)}})}else{e=j.addClass("filtered")}}return e},_initItems:function(f){var e=this;e.$items.each(function(){b(this).css(e.itemCss);if(e.supported&&!f){e._setTransition(this)}})},_setTransition:function(f){var e=this;f.style[e.transitionName]=e.transform+" "+e.speed+"ms "+e.easing+", opacity "+e.speed+"ms "+e.easing},_setSequentialDelay:function(f){var e=this;if(!e.supported){return}f.each(function(g){this.style[e.transitionName+"Delay"]=((g+1)*150)+"ms";b(this).one(b.support.transition.end,function(){this.style[e.transitionName+"Delay"]="0ms"})})},_getItems:function(){return this.$container.children(this.itemSelector)},_setColumns:function(){var e=this,f=e.$container.width(),g=typeof e.gutterWidth==="function"?e.gutterWidth(f):e.gutterWidth;e.colWidth=e.isFluid?e.columnWidth(f):e.columnWidth||e.$items.outerWidth(true)||f;e.colWidth+=g;e.cols=Math.floor((f+g+1e-12)/e.colWidth);e.cols=Math.max(e.cols,1);if(!e.colWidth||isNaN(e.cols)||!f){e.needsUpdate=true}else{e.needsUpdate=false}},setContainerSize:function(){var e=this,f=Math.max.apply(Math,e.colYs);e.$container.css("height",f+"px")},fire:function(e){this.$container.trigger(e+".shuffle",[this])},layout:function(f,h,g){var e=this;h=h||e.filterEnd;e.layoutTransitionEnded=false;b.each(f,function(j){var o=b(f[j]),m=Math.ceil(o.outerWidth(true)/e.colWidth);m=Math.min(m,e.cols);if(m===1){e._placeItem(o,e.colYs,h)}else{var p=e.cols+1-m,l=[],n,k;for(k=0;k<p;k++){n=e.colYs.slice(k,k+m);l[k]=Math.max.apply(Math,n)}e._placeItem(o,l,h,g)}});e.setContainerSize()},_resetCols:function(){var e=this.cols;this.colYs=[];while(e--){this.colYs.push(0)}},_reLayout:function(f){var e=this;f=f||e.filterEnd;e._resetCols();if(e.keepSorted&&e.lastSort){e.sort(e.lastSort,true)}else{e.layout(e.$items.filter(".filtered").get(),e.filterEnd)}},_placeItem:function(p,m,q,g){var r=this,e=Math.min.apply(Math,m),o=0;for(var h=0,j=m.length;h<j;h++){if(m[h]>=e-r.buffer&&m[h]<=e+r.buffer){o=h;break}}var n=r.colWidth*o,l=e;n=Math.round(n+r.offset.left);l=Math.round(l+r.offset.top);p.data({x:n,y:l});var k=e+p.outerHeight(true),f=r.cols+1-j;for(h=0;h<f;h++){r.colYs[o+h]=k}if(g){r._skipTransition(p[0],function(){r.transition({from:"layout",$this:p,x:n,y:l,opacity:0})})}else{r.transition({from:"layout",$this:p,x:n,y:l,scale:1,opacity:1,callback:q})}},shrink:function(){var e=this,f=e.$items.filter(".concealed");if(f.length===0){return}e.fire("shrink");e.shrinkTransitionEnded=false;f.each(function(){var i=b(this),h=i.data(),g=parseInt(h.x,10),j=parseInt(h.y,10);if(!g){g=0}if(!j){j=0}e.transition({from:"shrink",$this:i,x:g,y:j,scale:0.001,opacity:0,callback:e.shrinkEnd})})},sort:function(g,h){var f=this,e=f.$items.filter(".filtered").sorted(g);f._resetCols();f.layout(e,function(){if(h){f.filterEnd()}f.sortEnd()});f.lastSort=g},setPrefixedCss:function(e,g,f){e.css(this.prefixed(g),f)},getPrefixed:function(f){var e=this.prefixed(f);return e?e.replace(/([A-Z])/g,function(h,g){return"-"+g.toLowerCase()}).replace(/^ms-/,"-ms-"):e},transition:function(h){var f=this,g,e=function(){if(!f.layoutTransitionEnded&&h.from==="layout"){f.fire("layout");h.callback.call(f);f.layoutTransitionEnded=true}else{if(!f.shrinkTransitionEnded&&h.from==="shrink"){h.callback.call(f);f.shrinkTransitionEnded=true}}};h.callback=h.callback||b.noop;if(f.supported){if(h.scale===d){h.scale=1}if(f.threeD){g="translate3d("+h.x+"px, "+h.y+"px, 0) scale3d("+h.scale+", "+h.scale+", 1)"}else{g="translate("+h.x+"px, "+h.y+"px) scale("+h.scale+", "+h.scale+")"}h.$this.css("opacity",h.opacity);if(h.x!==d){f.setPrefixedCss(h.$this,"transform",g)}h.$this.one(f.transitionEndName,e)}else{h.$this.stop().animate({left:h.x,top:h.y,opacity:h.opacity},f.speed,"swing",e)}},resized:function(){this._setColumns();this._reLayout()},shrinkEnd:function(){this.fire("shrunk")},filterEnd:function(){this.fire("filtered")},sortEnd:function(){this.fire("sorted")},destroy:function(){var e=this;e.$container.removeAttr("style").removeData("shuffle");b(window).off(".shuffle");e.$items.removeAttr("style").removeClass("concealed filtered shuffle-item")},_skipTransition:function(g,j,i){var f=this,e,h=f.getPrefixed("transitionDuration"),k=g.style[h];g.style[h]="0ms";if(b.isFunction(j)){j()}else{g.style[j]=i}e=g.offsetWidth;g.style[h]=k},appended:function(f,g,e){g=g===false?false:true;e=e===false?false:true;this._addItems(f,g,e)},_addItems:function(f,i,e){var h=this,g;f.addClass("shuffle-item");h.$items=h._getItems();h._initItems();f.not(g).css("opacity",0);g=h.filter(d,f);h.visibleItems=h.$items.filter(".filtered").length;if(i){h.layout(g,null,true);if(e){h._setSequentialDelay(g)}h._revealAppended(g)}else{h.layout(g)}},_revealAppended:function(f){var e=this;setTimeout(function(){f.each(function(g,h){e.transition({from:"reveal",$this:b(h),opacity:1})})},100)},update:function(){this.resized()}};b.fn.shuffle=function(f,g){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=b(this),h=i.data("shuffle");if(!h){h=new a(i,f);i.data("shuffle",h)}if(b.isFunction(f)){h.shuffle(f)}else{if(typeof f==="string"){if(f==="sort"){h.sort(g)}else{if(f==="destroy"){h.destroy.apply(h,e)}else{if(f==="update"){h.update.apply(h,e)}else{if(f==="appended"){h.appended.apply(h,e)}else{if(f==="layout"){h._reLayout.apply(h,e)}else{h.shuffle(f)}}}}}}}})};b.fn.shuffle.options={group:"all",speed:600,easing:"ease-out",itemSelector:"",gutterWidth:0,columnWidth:0,showInitialTransition:true,delimeter:null,buffer:0,keepSorted:true};b.fn.shuffle.settings={supported:c.csstransforms&&c.csstransitions,prefixed:c.prefixed,threeD:c.csstransforms3d}})(jQuery,Modernizr);
/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 * Modified: 01/07/2013 by Glen Cheney (added onAnimate + more cleanup in destroy())
 */
(function(i,E){var u=Math,n=E.createElement("div").style,z=(function(){var H="t,webkitT,MozT,msT,OT".split(","),G,F=0,m=H.length;for(;F<m;F++){G=H[F]+"ransform";if(G in n){return H[F].substr(0,H[F].length-1)}}return false})(),D=z?"-"+z.toLowerCase()+"-":"",l=s("transform"),x=s("transitionProperty"),k=s("transitionDuration"),o=s("transformOrigin"),B=s("transitionTimingFunction"),e=s("transitionDelay"),A=(/android/gi).test(navigator.appVersion),h=(/iphone|ipad|ipod/gi).test(navigator.appVersion),r=(/hp-tablet/gi).test(navigator.appVersion),j=s("perspective") in n,y="ontouchstart" in i&&!r,d=z!==false,f=s("transition") in n,g="onorientationchange" in i?"orientationchange":"resize",b=y?"touchstart":"mousedown",t=y?"touchmove":"mousemove",c=y?"touchend":"mouseup",w=y?"touchcancel":"mouseup",a=(function(){if(z===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[z]})(),q=(function(){return i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),p=(function(){return i.cancelRequestAnimationFrame||i.webkitCancelAnimationFrame||i.webkitCancelRequestAnimationFrame||i.mozCancelRequestAnimationFrame||i.oCancelRequestAnimationFrame||i.msCancelRequestAnimationFrame||clearTimeout})(),C=j?" translateZ(0)":"",v=function(G,m){var H=this,F;H.wrapper=typeof G=="object"?G:E.getElementById(G);H.wrapper.style.overflow="hidden";H.scroller=H.wrapper.children[0];H.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:A,hideScrollbar:h,fadeScrollbar:h&&j,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(I){I.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(F in m){H.options[F]=m[F]}H.x=H.options.x;H.y=H.options.y;H.options.useTransform=d&&H.options.useTransform;H.options.hScrollbar=H.options.hScroll&&H.options.hScrollbar;H.options.vScrollbar=H.options.vScroll&&H.options.vScrollbar;H.options.zoom=H.options.useTransform&&H.options.zoom;H.options.useTransition=f&&H.options.useTransition;if(H.options.zoom&&A){C=""}H.scroller.style[x]=H.options.useTransform?D+"transform":"top left";H.scroller.style[k]="0";H.scroller.style[o]="0 0";if(H.options.useTransition){H.scroller.style[B]="cubic-bezier(0.33,0.66,0.66,1)"}if(H.options.useTransform){H.scroller.style[l]="translate("+H.x+"px,"+H.y+"px)"+C}else{H.scroller.style.cssText+=";position:absolute;top:"+H.y+"px;left:"+H.x+"px"}if(H.options.useTransition){H.options.fixedScrollbar=true}H.refresh();H._bind(g,i);H._bind(b);if(!y){if(H.options.wheelAction!="none"){H._bind("DOMMouseScroll");H._bind("mousewheel")}}if(H.options.checkDOMChanges){H.checkDOMTime=setInterval(function(){H._checkDOMChanges()},500)}};v.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(F){var m=this;switch(F.type){case b:if(!y&&F.button!==0){return}m._start(F);break;case t:m._move(F);break;case c:case w:m._end(F);break;case g:m._resize();break;case"DOMMouseScroll":case"mousewheel":m._wheel(F);break;case a:m._transitionEnd(F);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var G=this,F;if(!G[m+"Scrollbar"]){if(G[m+"ScrollbarWrapper"]){if(d){G[m+"ScrollbarIndicator"].style[l]=""}G[m+"ScrollbarWrapper"].parentNode.removeChild(G[m+"ScrollbarWrapper"]);G[m+"ScrollbarWrapper"]=null;G[m+"ScrollbarIndicator"]=null}return}if(!G[m+"ScrollbarWrapper"]){F=E.createElement("div");if(G.options.scrollbarClass){F.className=G.options.scrollbarClass+m.toUpperCase()}else{F.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(G.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(G.hScrollbar?"7":"2")+"px;top:2px;right:1px")}F.style.cssText+=";pointer-events:none;"+D+"transition-property:opacity;"+D+"transition-duration:"+(G.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(G.options.hideScrollbar?"0":"1");G.wrapper.appendChild(F);G[m+"ScrollbarWrapper"]=F;F=E.createElement("div");if(!G.options.scrollbarClass){F.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+D+"background-clip:padding-box;"+D+"box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";"+D+"border-radius:3px;border-radius:3px"}F.style.cssText+=";pointer-events:none;"+D+"transition-property:"+D+"transform;"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+D+"transition-duration:0;"+D+"transform: translate(0,0)"+C;if(G.options.useTransition){F.style.cssText+=";"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}G[m+"ScrollbarWrapper"].appendChild(F);G[m+"ScrollbarIndicator"]=F}if(m=="h"){G.hScrollbarSize=G.hScrollbarWrapper.clientWidth;G.hScrollbarIndicatorSize=u.max(u.round(G.hScrollbarSize*G.hScrollbarSize/G.scrollerW),8);G.hScrollbarIndicator.style.width=G.hScrollbarIndicatorSize+"px";G.hScrollbarMaxScroll=G.hScrollbarSize-G.hScrollbarIndicatorSize;G.hScrollbarProp=G.hScrollbarMaxScroll/G.maxScrollX}else{G.vScrollbarSize=G.vScrollbarWrapper.clientHeight;G.vScrollbarIndicatorSize=u.max(u.round(G.vScrollbarSize*G.vScrollbarSize/G.scrollerH),8);G.vScrollbarIndicator.style.height=G.vScrollbarIndicatorSize+"px";G.vScrollbarMaxScroll=G.vScrollbarSize-G.vScrollbarIndicatorSize;G.vScrollbarProp=G.vScrollbarMaxScroll/G.maxScrollY}G._scrollbarPos(m,true)},_resize:function(){var m=this;m.resizeTimer=setTimeout(function(){m.refresh()},A?400:250)},_pos:function(m,F){if(this.zoomed){return}m=this.hScroll?m:0;F=this.vScroll?F:0;if(this.options.useTransform){this.scroller.style[l]="translate("+m+"px,"+F+"px) scale("+this.scale+")"+C}else{m=u.round(m);F=u.round(F);this.scroller.style.left=m+"px";this.scroller.style.top=F+"px"}this.x=m;this.y=F;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,H){var G=this,I=m=="h"?G.x:G.y,F;if(!G[m+"Scrollbar"]){return}I=G[m+"ScrollbarProp"]*I;if(I<0){if(!G.options.fixedScrollbar){F=G[m+"ScrollbarIndicatorSize"]+u.round(I*3);if(F<8){F=8}G[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=F+"px"}I=0}else{if(I>G[m+"ScrollbarMaxScroll"]){if(!G.options.fixedScrollbar){F=G[m+"ScrollbarIndicatorSize"]-u.round((I-G[m+"ScrollbarMaxScroll"])*3);if(F<8){F=8}G[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=F+"px";I=G[m+"ScrollbarMaxScroll"]+(G[m+"ScrollbarIndicatorSize"]-F)}else{I=G[m+"ScrollbarMaxScroll"]}}}G[m+"ScrollbarWrapper"].style[e]="0";G[m+"ScrollbarWrapper"].style.opacity=H&&G.options.hideScrollbar?"0":"1";G[m+"ScrollbarIndicator"].style[l]="translate("+(m=="h"?I+"px,0)":"0,"+I+"px)")+C},_start:function(K){var J=this,F=y?K.touches[0]:K,G,m,L,I,H;if(!J.enabled){return}if(J.options.onBeforeScrollStart){J.options.onBeforeScrollStart.call(J,K)}if(J.options.useTransition||J.options.zoom){J._transitionTime(0)}J.moved=false;J.animating=false;J.zoomed=false;J.distX=0;J.distY=0;J.absDistX=0;J.absDistY=0;J.dirX=0;J.dirY=0;if(J.options.zoom&&y&&K.touches.length>1){I=u.abs(K.touches[0].pageX-K.touches[1].pageX);H=u.abs(K.touches[0].pageY-K.touches[1].pageY);J.touchesDistStart=u.sqrt(I*I+H*H);J.originX=u.abs(K.touches[0].pageX+K.touches[1].pageX-J.wrapperOffsetLeft*2)/2-J.x;J.originY=u.abs(K.touches[0].pageY+K.touches[1].pageY-J.wrapperOffsetTop*2)/2-J.y;if(J.options.onZoomStart){J.options.onZoomStart.call(J,K)}}if(J.options.momentum){if(J.options.useTransform){G=getComputedStyle(J.scroller,null)[l].replace(/[^0-9\-.,]/g,"").split(",");m=+(G[12]||G[4]);L=+(G[13]||G[5])}else{m=+getComputedStyle(J.scroller,null).left.replace(/[^0-9-]/g,"");L=+getComputedStyle(J.scroller,null).top.replace(/[^0-9-]/g,"")}if(m!=J.x||L!=J.y){if(J.options.useTransition){J._unbind(a)}else{p(J.aniTime)}J.steps=[];J._pos(m,L);if(J.options.onScrollEnd){J.options.onScrollEnd.call(J)}}}J.absStartX=J.x;J.absStartY=J.y;J.startX=J.x;J.startY=J.y;J.pointX=F.pageX;J.pointY=F.pageY;J.startTime=K.timeStamp||Date.now();if(J.options.onScrollStart){J.options.onScrollStart.call(J,K)}J._bind(t,i);J._bind(c,i);J._bind(w,i)},_move:function(M){var K=this,N=y?M.touches[0]:M,I=N.pageX-K.pointX,G=N.pageY-K.pointY,m=K.x+I,O=K.y+G,J,H,F,L=M.timeStamp||Date.now();if(K.options.onBeforeScrollMove){K.options.onBeforeScrollMove.call(K,M)}if(K.options.zoom&&y&&M.touches.length>1){J=u.abs(M.touches[0].pageX-M.touches[1].pageX);H=u.abs(M.touches[0].pageY-M.touches[1].pageY);K.touchesDist=u.sqrt(J*J+H*H);K.zoomed=true;F=1/K.touchesDistStart*K.touchesDist*this.scale;if(F<K.options.zoomMin){F=0.5*K.options.zoomMin*Math.pow(2,F/K.options.zoomMin)}else{if(F>K.options.zoomMax){F=2*K.options.zoomMax*Math.pow(0.5,K.options.zoomMax/F)}}K.lastScale=F/this.scale;m=this.originX-this.originX*K.lastScale+this.x,O=this.originY-this.originY*K.lastScale+this.y;this.scroller.style[l]="translate("+m+"px,"+O+"px) scale("+F+")"+C;if(K.options.onZoom){K.options.onZoom.call(K,M)}return}K.pointX=N.pageX;K.pointY=N.pageY;if(m>0||m<K.maxScrollX){m=K.options.bounce?K.x+(I/2):m>=0||K.maxScrollX>=0?0:K.maxScrollX}if(O>K.minScrollY||O<K.maxScrollY){O=K.options.bounce?K.y+(G/2):O>=K.minScrollY||K.maxScrollY>=0?K.minScrollY:K.maxScrollY}K.distX+=I;K.distY+=G;K.absDistX=u.abs(K.distX);K.absDistY=u.abs(K.distY);if(K.absDistX<6&&K.absDistY<6){return}if(K.options.lockDirection){if(K.absDistX>K.absDistY+5){O=K.y;G=0}else{if(K.absDistY>K.absDistX+5){m=K.x;I=0}}}K.moved=true;K._pos(m,O);K.dirX=I>0?-1:I<0?1:0;K.dirY=G>0?-1:G<0?1:0;if(L-K.startTime>300){K.startTime=L;K.startX=K.x;K.startY=K.y}if(K.options.onScrollMove){K.options.onScrollMove.call(K,M)}},_end:function(M){if(y&&M.touches.length!==0){return}var K=this,S=y?M.changedTouches[0]:M,N,R,G={dist:0,time:0},m={dist:0,time:0},J=(M.timeStamp||Date.now())-K.startTime,O=K.x,L=K.y,Q,P,F,I,H;K._unbind(t,i);K._unbind(c,i);K._unbind(w,i);if(K.options.onBeforeScrollEnd){K.options.onBeforeScrollEnd.call(K,M)}if(K.zoomed){H=K.scale*K.lastScale;H=Math.max(K.options.zoomMin,H);H=Math.min(K.options.zoomMax,H);K.lastScale=H/K.scale;K.scale=H;K.x=K.originX-K.originX*K.lastScale+K.x;K.y=K.originY-K.originY*K.lastScale+K.y;K.scroller.style[k]="200ms";K.scroller.style[l]="translate("+K.x+"px,"+K.y+"px) scale("+K.scale+")"+C;K.zoomed=false;K.refresh();if(K.options.onZoomEnd){K.options.onZoomEnd.call(K,M)}return}if(!K.moved){if(y){if(K.doubleTapTimer&&K.options.zoom){clearTimeout(K.doubleTapTimer);K.doubleTapTimer=null;if(K.options.onZoomStart){K.options.onZoomStart.call(K,M)}K.zoom(K.pointX,K.pointY,K.scale==1?K.options.doubleTapZoom:1);if(K.options.onZoomEnd){setTimeout(function(){K.options.onZoomEnd.call(K,M)},200)}}else{if(this.options.handleClick){K.doubleTapTimer=setTimeout(function(){K.doubleTapTimer=null;N=S.target;while(N.nodeType!=1){N=N.parentNode}if(N.tagName!="SELECT"&&N.tagName!="INPUT"&&N.tagName!="TEXTAREA"){R=E.createEvent("MouseEvents");R.initMouseEvent("click",true,true,M.view,1,S.screenX,S.screenY,S.clientX,S.clientY,M.ctrlKey,M.altKey,M.shiftKey,M.metaKey,0,null);R._fake=true;N.dispatchEvent(R)}},K.options.zoom?250:0)}}}K._resetPos(400);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}if(J<300&&K.options.momentum){G=O?K._momentum(O-K.startX,J,-K.x,K.scrollerW-K.wrapperW+K.x,K.options.bounce?K.wrapperW:0):G;m=L?K._momentum(L-K.startY,J,-K.y,(K.maxScrollY<0?K.scrollerH-K.wrapperH+K.y-K.minScrollY:0),K.options.bounce?K.wrapperH:0):m;O=K.x+G.dist;L=K.y+m.dist;if((K.x>0&&O>0)||(K.x<K.maxScrollX&&O<K.maxScrollX)){G={dist:0,time:0}}if((K.y>K.minScrollY&&L>K.minScrollY)||(K.y<K.maxScrollY&&L<K.maxScrollY)){m={dist:0,time:0}}}if(G.dist||m.dist){F=u.max(u.max(G.time,m.time),10);if(K.options.snap){Q=O-K.absStartX;P=L-K.absStartY;if(u.abs(Q)<K.options.snapThreshold&&u.abs(P)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200)}else{I=K._snap(O,L);O=I.x;L=I.y;F=u.max(I.time,F)}}K.scrollTo(u.round(O),u.round(L),F);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}if(K.options.snap){Q=O-K.absStartX;P=L-K.absStartY;if(u.abs(Q)<K.options.snapThreshold&&u.abs(P)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200)}else{I=K._snap(K.x,K.y);if(I.x!=K.x||I.y!=K.y){K.scrollTo(I.x,I.y,I.time)}}if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}K._resetPos(200);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}},_resetPos:function(G){var m=this,H=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,F=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(H==m.x&&F==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(z=="webkit"){m.hScrollbarWrapper.style[e]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(z=="webkit"){m.vScrollbarWrapper.style[e]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(H,F,G||0)},_wheel:function(J){var H=this,I,G,F,m,K;if("wheelDeltaX" in J){I=J.wheelDeltaX/12;G=J.wheelDeltaY/12}else{if("wheelDelta" in J){I=G=J.wheelDelta/12}else{if("detail" in J){I=G=-J.detail*3}else{return}}}if(H.options.wheelAction=="zoom"){K=H.scale*Math.pow(2,1/3*(G?G/Math.abs(G):0));if(K<H.options.zoomMin){K=H.options.zoomMin}if(K>H.options.zoomMax){K=H.options.zoomMax}if(K!=H.scale){if(!H.wheelZoomCount&&H.options.onZoomStart){H.options.onZoomStart.call(H,J)}H.wheelZoomCount++;H.zoom(J.pageX,J.pageY,K,400);setTimeout(function(){H.wheelZoomCount--;if(!H.wheelZoomCount&&H.options.onZoomEnd){H.options.onZoomEnd.call(H,J)}},400)}return}F=H.x+I;m=H.y+G;if(F>0){F=0}else{if(F<H.maxScrollX){F=H.maxScrollX}}if(m>H.minScrollY){m=H.minScrollY}else{if(m<H.maxScrollY){m=H.maxScrollY}}if(H.maxScrollY<0){H.scrollTo(F,m,0)}},_transitionEnd:function(F){var m=this;if(F.target!=m.scroller){return}m._unbind(a);m._startAni()},_startAni:function(){var K=this,F=K.x,m=K.y,I=Date.now(),J,H,G;if(K.animating){return}if(!K.steps.length){K._resetPos(400);return}J=K.steps.shift();if(J.x==F&&J.y==m){J.time=0}K.animating=true;K.moved=true;if(K.options.useTransition){K._transitionTime(J.time);K._pos(J.x,J.y);K.animating=false;if(J.time){K._bind(a)}else{K._resetPos(0)}return}G=function(){var L=Date.now(),N,M;if(L>=I+J.time){K._pos(J.x,J.y);K.animating=false;if(K.options.onAnimationEnd){K.options.onAnimationEnd.call(K)}K._startAni();return}L=(L-I)/J.time-1;H=u.sqrt(1-L*L);N=(J.x-F)*H+F;M=(J.y-m)*H+m;K._pos(N,M);if(K.options.onAnimate){K.options.onAnimate.call(K)}if(K.animating){K.aniTime=q(G)}};G()},_transitionTime:function(m){m+="ms";this.scroller.style[k]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[k]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[k]=m}},_momentum:function(L,F,J,m,N){var K=0.0006,G=u.abs(L)/F,H=(G*G)/(2*K),M=0,I=0;if(L>0&&H>J){I=N/(6/(H/G*K));J=J+I;G=G*J/H;H=J}else{if(L<0&&H>m){I=N/(6/(H/G*K));m=m+I;G=G*m/H;H=m}}H=H*(L<0?-1:1);M=G/K;return{dist:H,time:u.round(M)}},_offset:function(m){var G=-m.offsetLeft,F=-m.offsetTop;while(m=m.offsetParent){G-=m.offsetLeft;F-=m.offsetTop}if(m!=this.wrapper){G*=this.scale;F*=this.scale}return{left:G,top:F}},_snap:function(M,L){var J=this,I,H,K,G,F,m;K=J.pagesX.length-1;for(I=0,H=J.pagesX.length;I<H;I++){if(M>=J.pagesX[I]){K=I;break}}if(K==J.currPageX&&K>0&&J.dirX<0){K--}M=J.pagesX[K];F=u.abs(M-J.pagesX[J.currPageX]);F=F?u.abs(J.x-M)/F*500:0;J.currPageX=K;K=J.pagesY.length-1;for(I=0;I<K;I++){if(L>=J.pagesY[I]){K=I;break}}if(K==J.currPageY&&K>0&&J.dirY<0){K--}L=J.pagesY[K];m=u.abs(L-J.pagesY[J.currPageY]);m=m?u.abs(J.y-L)/m*500:0;J.currPageY=K;G=u.round(u.max(F,m))||200;return{x:M,y:L,time:G}},_bind:function(G,F,m){(F||this.scroller).addEventListener(G,this,!!m)},_unbind:function(G,F,m){(F||this.scroller).removeEventListener(G,this,!!m)},destroy:function(){var m=this;m.scroller.style[l]="";m.scroller.style[x]="";m.scroller.style[k]="";m.scroller.style[o]="";m.wrapper.style.overflow="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(g,i);m._unbind(b);m._unbind(t,i);m._unbind(c,i);m._unbind(w,i);if(!m.options.hasTouch){m._unbind("DOMMouseScroll");m._unbind("mousewheel")}if(m.resizeTimer){clearTimeout(m.resizeTimer)}if(m.options.useTransition){m._unbind(a)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var H=this,J,G,m,F,K=0,I=0;if(H.scale<H.options.zoomMin){H.scale=H.options.zoomMin}H.wrapperW=H.wrapper.clientWidth||1;H.wrapperH=H.wrapper.clientHeight||1;H.minScrollY=-H.options.topOffset||0;H.scrollerW=u.round(H.scroller.offsetWidth*H.scale);H.scrollerH=u.round((H.scroller.offsetHeight+H.minScrollY)*H.scale);H.maxScrollX=H.wrapperW-H.scrollerW;H.maxScrollY=H.wrapperH-H.scrollerH+H.minScrollY;H.dirX=0;H.dirY=0;if(H.options.onRefresh){H.options.onRefresh.call(H)}H.hScroll=H.options.hScroll&&H.maxScrollX<0;H.vScroll=H.options.vScroll&&(!H.options.bounceLock&&!H.hScroll||H.scrollerH>H.wrapperH);H.hScrollbar=H.hScroll&&H.options.hScrollbar;H.vScrollbar=H.vScroll&&H.options.vScrollbar&&H.scrollerH>H.wrapperH;J=H._offset(H.wrapper);H.wrapperOffsetLeft=-J.left;H.wrapperOffsetTop=-J.top;if(typeof H.options.snap=="string"){H.pagesX=[];H.pagesY=[];F=H.scroller.querySelectorAll(H.options.snap);for(G=0,m=F.length;G<m;G++){K=H._offset(F[G]);K.left+=H.wrapperOffsetLeft;K.top+=H.wrapperOffsetTop;H.pagesX[G]=K.left<H.maxScrollX?H.maxScrollX:K.left*H.scale;H.pagesY[G]=K.top<H.maxScrollY?H.maxScrollY:K.top*H.scale}}else{if(H.options.snap){H.pagesX=[];while(K>=H.maxScrollX){H.pagesX[I]=K;K=K-H.wrapperW;I++}if(H.maxScrollX%H.wrapperW){H.pagesX[H.pagesX.length]=H.maxScrollX-H.pagesX[H.pagesX.length-1]+H.pagesX[H.pagesX.length-1]}K=0;I=0;H.pagesY=[];while(K>=H.maxScrollY){H.pagesY[I]=K;K=K-H.wrapperH;I++}if(H.maxScrollY%H.wrapperH){H.pagesY[H.pagesY.length]=H.maxScrollY-H.pagesY[H.pagesY.length-1]+H.pagesY[H.pagesY.length-1]}}}H._scrollbar("h");H._scrollbar("v");if(!H.zoomed){H.scroller.style[k]="0";H._resetPos(400)}},scrollTo:function(m,L,K,J){var I=this,H=m,G,F;I.stop();if(!H.length){H=[{x:m,y:L,time:K,relative:J}]}for(G=0,F=H.length;G<F;G++){if(H[G].relative){H[G].x=I.x-H[G].x;H[G].y=I.y-H[G].y}I.steps.push({x:H[G].x,y:H[G].y,time:H[G].time||0})}I._startAni()},scrollToElement:function(m,G){var F=this,H;m=m.nodeType?m:F.scroller.querySelector(m);if(!m){return}H=F._offset(m);H.left+=F.wrapperOffsetLeft;H.top+=F.wrapperOffsetTop;H.left=H.left>0?0:H.left<F.maxScrollX?F.maxScrollX:H.left;H.top=H.top>F.minScrollY?F.minScrollY:H.top<F.maxScrollY?F.maxScrollY:H.top;G=G===undefined?u.max(u.abs(H.left)*2,u.abs(H.top)*2):G;F.scrollTo(H.left,H.top,G)},scrollToPage:function(G,F,I){var H=this,m,J;I=I===undefined?400:I;if(H.options.onScrollStart){H.options.onScrollStart.call(H)}if(H.options.snap){G=G=="next"?H.currPageX+1:G=="prev"?H.currPageX-1:G;F=F=="next"?H.currPageY+1:F=="prev"?H.currPageY-1:F;G=G<0?0:G>H.pagesX.length-1?H.pagesX.length-1:G;F=F<0?0:F>H.pagesY.length-1?H.pagesY.length-1:F;H.currPageX=G;H.currPageY=F;m=H.pagesX[G];J=H.pagesY[F]}else{m=-H.wrapperW*G;J=-H.wrapperH*F;if(m<H.maxScrollX){m=H.maxScrollX}if(J<H.maxScrollY){J=H.maxScrollY}}H.scrollTo(m,J,I)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(t,i);this._unbind(c,i);this._unbind(w,i)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(a)}else{p(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,J,I,H){var F=this,G=I/F.scale;if(!F.options.useTransform){return}F.zoomed=true;H=H===undefined?200:H;m=m-F.wrapperOffsetLeft-F.x;J=J-F.wrapperOffsetTop-F.y;F.x=m-m*G+F.x;F.y=J-J*G+F.y;F.scale=I;F.refresh();F.x=F.x>0?0:F.x<F.maxScrollX?F.maxScrollX:F.x;F.y=F.y>F.minScrollY?F.minScrollY:F.y<F.maxScrollY?F.maxScrollY:F.y;F.scroller.style[k]=H+"ms";F.scroller.style[l]="translate("+F.x+"px,"+F.y+"px) scale("+I+")"+C;F.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};function s(m){if(z===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return z+m}n=null;if(typeof exports!=="undefined"){exports.iScroll=v}else{i.iScroll=v}})(window,document);(function(c,d,b,e){var a=function(h,g){var f=this;c.extend(f,c.fn.stickyTabs.options,g,c.fn.stickyTabs.settings);f.$container=h;f._init()};a.prototype={constructor:a,_init:function(){var f=this;f.$tabsWrap=c(f.tabsWrapSelector);f.$tabsContainer=f.$tabsWrap.parent();f.$tabs=f.$tabsWrap.children(".tab");if(f.$tabs.length===0){return}f.$activeTab=f.$tabs.filter(".active");f.$window=c(b);f.windowWidth=f.$window.width();f.windowHeight=f.$window.height();f.tabWidth=f.$tabs.outerWidth();f.tabletMode=f.$container.data("tabletMode");f.isCarousel=f.tabletMode==="carousel";if(f.isCarousel){f.$navNext=f.$container.find(".tab-nav-next");f.$navPrev=f.$container.find(".tab-nav-prev")}f.$tabs.on("shown",c.proxy(f._onTabShown,f));f.$window.on("resize.stickytabs",c.proxy(f._onResize,f));if(d.mq("(max-width: 767px)")){f.setup()}else{if(f.isCarousel&&d.mq("(min-width: 768px) and (max-width: 979px)")){f.setupCarousel()}}},_getBounded:function(f){return Exports.constrain(f,0,this.windowWidth-this.tabWidth)},_onResize:function(){var f=this;f.windowWidth=f.$window.width();f.windowHeight=f.$window.height();if(d.mq("(max-width: 767px)")){if(f.isTabCarousel){f.teardownCarousel()}if(!f.isStickyTabs){f.setup()}f.animateTab()}else{if(f.isCarousel&&d.mq("(min-width: 768px) and (max-width: 979px)")){if(f.isStickyTabs){f.teardown()}if(!f.isTabCarousel){f.setupCarousel()}}else{if(f.isStickyTabs){f.teardown()}if(f.isTabCarousel){f.teardownCarousel()}}}},_onTabShown:function(f){var g=this,h=c(f.target);b.iQ.update();g.$activeTab=h;if(g.isStickyTabs){console.log("tab shown, removing style attribute of all tabs");g._onTabSelected()}},_onTabSelected:function(){var f=this;console.log("onTabSelected: StickyTabs");f.$tabs.removeAttr("style");f.lastSL=f.$tabsWrap.scrollLeft();f.data=null;f.tabOffset=f.$activeTab.offset().left;f.$activeTab.css({position:"absolute",left:f._getBounded(f.tabOffset)});console.log("new sticky tab set",f._getBounded(f.tabOffset),f.tabOffset);if(!f.$activeTab.is(":last-child")){f.$activeTab.next().css("marginLeft",f.tabWidth)}else{f.$activeTab.prev().css("marginRight",f.tabWidth)}},animateTab:function(){console.log("animateTab: StickyTabs");var h=this,g=h.$tabsWrap.scrollLeft(),j=h.lastSL-g,f=h.data?h.data.overlap+j:h.tabOffset+j,i=h._getBounded(f);if(i!==f){h.data={overlap:f}}else{h.data=null}h.lastSL=g;h.tabOffset=i;h.$activeTab.css("left",h.tabOffset)},setup:function(){var f=this;console.log("setup: StickyTabs");f.isStickyTabs=true;f.$tabsWrap.on("scroll",c.proxy(f.animateTab,f)).addClass("sticky");f._onTabSelected()},teardown:function(){var f=this;console.log("teardown: StickyTabs");f.$tabsWrap.off("scroll").removeClass("sticky");f.$tabs.removeAttr("style");f.isStickyTabs=false},setupCarousel:function(){var f=this;f.$navPrev.hide();f.$navNext.hide();f.$tabsContainer.scrollerModule({contentSelector:".tabs",itemElementSelector:".tab",mode:"paginate",nextSelector:".tab-nav-next",prevSelector:".tab-nav-prev",iscrollProps:{snap:true,hScroll:true,vScroll:false,hScrollbar:false,vScrollbar:false,momentum:true,bounce:true,}});if(f.$tabsContainer.data("scrollerModule").isPaginated){f.$navNext.show();f.$tabsWrap.addClass("tab-carousel")}f.isTabCarousel=true},teardownCarousel:function(){var f=this;console.log("teardown: Carousel tabs");f.$navPrev.hide();f.$navNext.hide();f.$tabsWrap.removeClass("tab-carousel");f.$tabsContainer.scrollerModule("destroy");f.isTabCarousel=false},update:function(){}};c.fn.stickyTabs=function(g){var f=Array.prototype.slice.call(arguments,1);return this.each(function(){var h=c(this),i=h.data("stickyTabs");if(!i){i=new a(h,g);h.data("stickyTabs",i)}if(typeof g==="string"){i[g].apply(i,f)}})};c.fn.stickyTabs.options={tabsWrapSelector:".tabs",tabOffset:0,initialTabWidth:0,tabWidth:0,tabsWidth:0,windowWidth:0,windowHeight:0,data:null,lastSL:null,isStickyTabs:false,toOffset:0};c.fn.stickyTabs.settings={}}(jQuery,Modernizr,window));(function(b,c){var a=function(d){this.$el=b(d);this.showHash=this.$el.data("hash")||true};a.prototype={constructor:a,show:function(f){var e=this,i=e.$el,d=i.attr("data-target"),h,g;e.$target=e.$target||b('[data-tab="'+d+'"]');f=f===false?false:true;if(!e.$target.length||e.$target.hasClass("active")||i.parent("li").hasClass("active")){return}h=i.parent().find(".active:last")[0];g=e.$target.parent().find("> .active");i.add(e.$target).trigger({type:"show",relatedTarget:h,prevPane:g,pane:e.$target});e.activate(i,i.parent());e.activate(e.$target,e.$target.parent(),function(){i.add(e.$target).trigger({type:"shown",relatedTarget:h,prevPane:g,pane:e.$target});if(e.showHash&&f){e.hash(d)}},true)},activate:function(f,i,j,e){var d=i.find("> .active"),h=j&&b.support.transition&&d.hasClass("fade");function g(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(e){d.addClass("off-screen");f.removeClass("off-screen")}if(h){f[0].offsetWidth;f.addClass("in")}else{f.removeClass("fade")}if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}if(j){j()}}if(h){d.one(b.support.transition.end,g)}else{g()}d.removeClass("in")},hash:function(f,d){var e;f=f.replace(/^#/,"");if(d&&d.length){d.attr("id","")}e=b("<div/>").css({position:"absolute",visibility:"hidden",top:b(window).scrollTop()+"px"}).attr("id",f).appendTo(document.body);window.location.hash=f;e.remove();if(d&&d.length){d.attr("id",f)}},};b.fn.tab=function(e){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){var g=b(this),f=g.data("tab");if(!f){f=new a(this);g.data("tab",f)}if(typeof e==="string"){f[e].apply(f,d)}})};b.fn.tab.Constructor=a;b(window).on("hashchange",function(){var g=window.location.hash?window.location.hash.substring(1):b("[data-target]").first().attr("data-target"),d=b('[data-target="'+g+'"]'),f=d.hasClass("active"),e=!!window.location.hash;if(!f){d.tab("show",e)}});b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault();b(this).tab("show")})}(window.jQuery));(function(b){var a=b.sony=b.sony||{};a.modules=a.modules||{}})(window);(function(c,d,b,e){if(!c.scModules){c.scModules={}}var a=function(j,k){var z=navigator.userAgent.toLowerCase(),y,E=c.browser,t=this,p=E.webkit,B=z.indexOf("android")>-1;t.isIPAD=z.match(/(ipad)/);t.isIPHONE=z.match(/(iphone)/);var F=document.createElement("div").style,x=["webkit","Moz","ms","O"],A="",C=0,l;for(y=0;y<x.length;y++){l=x[y];if(!A&&(l+"Transform") in F){A=l}l=l.toLowerCase();if(!b.requestAnimationFrame){b.requestAnimationFrame=b[l+"RequestAnimationFrame"];b.cancelAnimationFrame=b[l+"CancelAnimationFrame"]||b[l+"CancelRequestAnimationFrame"]}}if(!b.requestAnimationFrame){b.requestAnimationFrame=function(J,G){var i=new Date().getTime(),H=Math.max(0,16-(i-C)),I=b.setTimeout(function(){J(i+H)},H);C=i+H;return I}}if(!b.cancelAnimationFrame){b.cancelAnimationFrame=function(i){clearTimeout(i)}}t.slider=c(j);t.ev=c({});t._doc=c(document);t.st=c.extend({},c.fn.sonyCarousel.defaults,k);switch(t.st.mode){case"full":break;case"tabbed":break;default:break}switch(t.st.controlNavigation){case"tabbednav":t.st.transitionType="fade";break}t._currAnimSpeed=t.st.transitionSpeed;if(t.st.allowCSS3){if((!p||t.st.allowCSS3OnWebkit)){var s=A+(A?"T":"t");t._useCSS3Transitions=((s+"ransform") in F)&&((s+"ransition") in F);if(t._useCSS3Transitions){t._use3dTransform=(A+(A?"P":"p")+"erspective") in F}}}A=A.toLowerCase();t._vendorPref="-"+A+"-";t._slidesHorizontal=(t.st.slidesOrientation==="vertical")?false:true;t._reorderProp=t._slidesHorizontal?"left":"top";t._sizeProp=t._slidesHorizontal?"width":"height";t._prevNavItemId=-1;t._isMove=(t.st.transitionType==="fade")?false:true;if(!t._isMove){t.st.sliderDrag=false;t._fadeZIndex=10}t._newSlideId=0;t._sPosition=0;c.each(c.scModules,function(G,i){i.call(t)});t.slides=[];t._idCount=0;var v;var f=t.st.slides?c(t.st.slides):t.slider.children().detach();f.each(function(){t._parseNode(this,true)});if(t.st.randomizeSlides){t.slides.sort(function(){return 0.5-Math.random()})}t.numSlides=t.slides.length;t._refreshNumPreloadImages();if(t.st.startSlideId>t.numSlides-1){t.st.startSlideId=t.numSlides-1}t.staticSlideId=t.currSlideId=t._realId=t.st.startSlideId;t.currSlide=t.slides[t.currSlideId];t._accelerationPos=0;t.slider.addClass((t._slidesHorizontal?"scHor":"scVer")+(t._isMove?"":" scFade"));var o='<div class="scOverflow"><div class="scContainer">';t.slidesSpacing=t.st.slidesSpacing;t._slideSize=(t._slidesHorizontal?t.slider.width():t.slider.height())+t.st.slidesSpacing;t._preload=Boolean(t._numPreloadImages>0);if(t.numSlides<=1){t._loop=false}var w=(t._loop&&t._isMove)?(t.numSlides===2?1:2):0;t._loopHelpers=w;t._maxImages=t.numSlides<6?t.numSlides:6;t._currBlockIndex=0;t._idOffset=0;t.slidesJQ=[];for(y=0;y<t.numSlides;y++){t.slidesJQ.push(c(D(y)))}o+="</div></div>";t.slider.html(o);t._sliderOverflow=t.slider.children(".scOverflow");t._slidesContainer=t._sliderOverflow.children(".scContainer");t._preloader=c('<div class="scPreloader"></div>');var u=t._slidesContainer.children(".scSlide");t._currHolder=t.slidesJQ[t.currSlideId];t._selectedSlideHolder=0;function D(G,H){return'<div style="'+(t._isMove?"":(G!==t.currSlideId?"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;":"z-index: 0;  position: absolute; left: 0; top: 0;"))+'" class="scSlide '+(H||"")+'"></div>'}t._currentSlideContent=t._oldSlideContent=t.slidesJQ[t.currSlideId].find(".scContent");if("ontouchstart" in b||"createTouch" in document){t.hasTouch=true;t._downEvent="touchstart.sc";t._moveEvent="touchmove.sc";t._upEvent="touchend.sc";t._cancelEvent="touchcancel.sc";t._lastItemFriction=0.5}else{t.hasTouch=false;t._lastItemFriction=0.2;if(t.st.sliderDrag){if(E.msie||E.opera){t._grabCursor=t._grabbingCursor="move"}else{if(E.mozilla){t._grabCursor="-moz-grab";t._grabbingCursor="-moz-grabbing"}else{if(p&&(navigator.platform.indexOf("Mac")!=-1)){t._grabCursor="-webkit-grab";t._grabbingCursor="-webkit-grabbing"}}}t._setGrabCursor()}t._downEvent="mousedown.sc";t._moveEvent="mousemove.sc";t._upEvent="mouseup.sc";t._cancelEvent="mouseup.sc"}if(t._useCSS3Transitions){t._TP="transition-property";t._TD="transition-duration";t._TTF="transition-timing-function";t._yProp=t._xProp=t._vendorPref+"transform";if(t._use3dTransform){if(p){t.slider.addClass("scWebkit3d")}t._tPref1="translate3d(";t._tPref2="px, ";t._tPref3="px, 0px)"}else{t._tPref1="translate(";t._tPref2="px, ";t._tPref3="px)"}if(!t._isMove){var g={};g[(t._vendorPref+t._TP)]="opacity";g[(t._vendorPref+t._TD)]=t.st.transitionSpeed+"ms";g[(t._vendorPref+t._TTF)]=t.st.css3easeInOut;u.css(g)}else{t._slidesContainer[(t._vendorPref+t._TP)]=(t._vendorPref+"transform")}}else{t._xProp="left";t._yProp="top"}var h;c(b).on("resize.sc",function(){if(h){clearTimeout(h)}h=setTimeout(function(){t.updateSliderSize()},50)});t.ev.trigger("scAfterPropsSetup");t.updateSliderSize();if(t.st.keyboardNavEnabled){t._bindKeyboardNav()}if(t.st.arrowsNavHideOnTouch&&t.hasTouch){t.st.arrowsNav=false}if(t.st.arrowsNav){var n="scArrow",r=t.st.controlsInside?t._sliderOverflow:t.slider;c('<div class="'+n+" "+n+'Left"><div class="'+n+'Icn"></div></div><div class="'+n+" "+n+'Right"><div class="'+n+'Icn"></div></div>').appendTo(r);t._arrowLeft=r.children("."+n+"Left").click(function(i){i.preventDefault();t.prev()});t._arrowRight=r.children("."+n+"Right").click(function(i){i.preventDefault();t.next()});if(t.st.arrowsNavAutoHide&&!t.hasTouch){t._arrowLeft.addClass("scHidden");t._arrowRight.addClass("scHidden");var q=r;q.one("mousemove.arrowshover",function(){t._arrowLeft.removeClass("scHidden");t._arrowRight.removeClass("scHidden")});q.hover(function(){if(!t._arrowsAutoHideLocked){t._arrowLeft.removeClass("scHidden");t._arrowRight.removeClass("scHidden")}},function(){if(!t._arrowsAutoHideLocked){t._arrowLeft.addClass("scHidden");t._arrowRight.addClass("scHidden")}})}t.ev.on("scOnUpdateNav",function(){t._updateArrowsNav()});t._updateArrowsNav()}t._hasDrag=(!t.hasTouch&&t.st.sliderDrag)||(t.hasTouch&&t.st.sliderTouch);if(t._hasDrag){t._slidesContainer.on(t._downEvent,function(i){t._onDragStart(i)})}else{t.dragSuccess=false}var m=["scPlayBtnIcon","scPlayBtn","scCloseVideoBtn","scCloseVideoIcn"];t._slidesContainer.click(function(G){if(!t.dragSuccess){var i=c(G.target);var H=i.attr("class");if(c.inArray(H,m)!==-1){if(t.toggleVideo()){return false}}if(t.st.navigateByClick&&!t._blockActions){if(c(G.target).closest(".scNoDrag",t._currHolder).length){return true}t._mouseNext(G)}}});t.ev.trigger("scAfterInit")};a.prototype={_mouseNext:function(h){var f=this;var g=h[f._slidesHorizontal?"pageX":"pageY"]-f._sliderOffset;if(g>0){f.next()}else{f.prev()}},_refreshNumPreloadImages:function(){var f=this,g;g=f.st.numImagesToPreload;f._loop=f.st.loop;if(f._loop){if(f.numSlides===2){f._loop=false;f.st.loopRewind=true}else{if(f.numSlides<2){f.st.loopRewind=f._loop=false}}}if(f._loop&&g>0){if(f.numSlides<=4){g=1}else{if(f.st.numImagesToPreload>(f.numSlides-1)/2){g=Math.floor((f.numSlides-1)/2)}}}f._numPreloadImages=g},_parseNode:function(j,f){var l=this,m,h,g,i={},n;j=c(j);l._currContent=j;l.ev.trigger("scBeforeParseNode",[j,i]);if(i.stopParsing){return}j=l._currContent;i.id=l._idCount;i.contentAdded=false;l._idCount++;if(!i.hasCover){if(j.hasClass("scImg")){n=j;m=true}else{n=j.find(".scImg");if(n.length){m=true}}if(m){i.bigImage=n.attr("data-scBigImg");if(n.is("a")){k(n,"href")}else{if(n.is("img")){k(n)}}}else{if(j.is("img")){j.addClass("scImg");k(j)}}}n=j.find(".scCaption");if(n.length){i.caption=n.remove()}if(!i.image){i.isLoaded=true;i.isRendered=false;i.isLoading=false}i.content=j;l.ev.trigger("scAfterParseNode",[j,i]);function k(p,o){i.image=p.attr(!o?"src":o);i.caption=!o?p.attr("alt"):p.contents();i.videoURL=p.attr("data-scVideo")}if(f){l.slides.push(i)}return i},_bindKeyboardNav:function(){var f=this;f._doc.on("keydown.sckb",function(g){if(!f._isDragging&&!f._isAnimating){if(g.keyCode===37){g.preventDefault();f.prev()}else{if(g.keyCode===39){g.preventDefault();f.next()}}}})},goTo:function(h,g){var f=this;if(h!==f.currSlideId){f._moveTo(h,f.st.transitionSpeed,true,!g)}},destroy:function(f){var g=this;g.ev.trigger("scBeforeDestroy");g._doc.off("keydown.sckb "+g._moveEvent+" "+g._upEvent);g._slidesContainer.on(g._downEvent,function(h){g._onDragStart(h)});g.slider.data("sonyCarousel","");if(f){g.slider.remove()}},_updateBlocksContent:function(I,s){var u=this,B,z,w,F,p,q,A,D=u._loop,C=u.numSlides;if(!isNaN(s)){return G(s)}var v=u.currSlideId;var l;var t=I?(Math.abs(u._prevSlideId-u.currSlideId)>=u.numSlides-1?0:1):u._numPreloadImages;var m=Math.min(2,t);var f=false;var E=false;var r;for(z=v;z<v+1+m;z++){r=G(z);B=u.slides[r];if(B&&(!B.isAdded||!B.positionSet)){f=true;break}}for(z=v-1;z>v-1-m;z--){r=G(z);B=u.slides[r];if(B&&(!B.isAdded||!B.positionSet)){E=true;break}}if(f){for(z=v;z<v+t+1;z++){r=G(z);l=Math.floor((u._realId-(v-z))/u.numSlides)*u.numSlides;B=u.slides[r];if(B){h(B,r)}}}if(E){for(z=v-1;z>v-1-t;z--){r=G(z);l=Math.floor((u._realId-(v-z))/C)*C;B=u.slides[r];if(B){h(B,r)}}}if(!I){var k=v;var j=t;var x=G(v-t);var y=G(v+t);var g=x>y?0:x;for(z=0;z<C;z++){if(x>y){if(z>x-1){continue}}if(z<g||z>y){B=u.slides[z];if(B&&B.holder){B.holder.detach();B.isAdded=false}}}}function h(L,J,K){var n;if(!L.isAdded){if(!K){K=u.slidesJQ[J]}if(!L.holder){K=u.slidesJQ[J]=c(K);L.holder=K}else{K=L.holder}L.appendOnLoaded=false;o(J,L,K);H(J,L);u._addBlockToContainer(L,K,I);L.isAdded=true;n=true}else{H(J,L);o(J,L)}}function H(n,J){if(!J.contentAdded){u.setItemHtml(J,I);if(!I){J.contentAdded=true}}}function o(n,K,J){if(u._isMove){if(!J){J=u.slidesJQ[n]}J.css(u._reorderProp,(n+u._idOffset+l)*u._slideSize)}}function G(i){var n=false;if(D){if(i>C-1){return G(i-C)}else{if(i<0){return G(C+i)}}}return i}},setItemHtml:function(j,i){var p=this;var k=j.content;var m=j.holder;var g=function(r){var q=r.sizeType;return function(y){var w=r.content,u=r.holder;if(y){var x=y.currentTarget;c(x).off("load error");if(y.type==="error"){r.isLoaded=true;r.image="";r.isLoading=false;w.addClass("scSlideError");u.html(w);r.holder.trigger("scAfterContentSet");p.ev.trigger("scAfterContentSet",r);return}}if(r.image){if(r.bigImage&&r.sizeType!==q){if(q==="med"){r.isMedLoading=false}else{if(q==="big"){r.isBigLoading=false}else{r.isMedLoading=r.isLoading=false}}return}if(!r.isLoaded){var z,t;if(w.hasClass("scImg")){t=true;z=w}else{t=false;z=w.find(".scImg")}if(z.length&&z.is("a")){if(t){w=c('<img class="scImg" src="'+r.image+'" />')}else{w.find(".scImg").replaceWith('<img class="scImg" src="'+r.image+'" />')}r.content=w}r.iW=x.width;if(r.iW>0){r.iH=x.height;r.isLoaded=true;r.isLoading=false;p._resizeImage(r)}}else{if(!r.isRendered&&i){f();return}p._resizeImage(r)}}else{if(!p._preload&&i&&!r.isRendered){r.isRendered=true;f();return}r.isLoaded=true;r.isLoading=false}var s=false;var v=r.id-p._newSlideId;if(!i&&!r.appendOnLoaded&&p.st.fadeinLoadedSlide&&(v===0||((s||p._isAnimating||p._isDragging)&&(v===-1||v===1)))){w.css(p._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});u.html(w);setTimeout(function(){w.css("opacity",1)},6)}else{u.html(w)}r.isRendered=true;u.find("a").off("click.sc").on("click.sc",function(A){if(p.dragSuccess){return false}else{p._blockActions=true;p.ev.trigger("scSlideClick");setTimeout(function(){p._blockActions=false},3)}});r.holder.trigger("scAfterContentSet");p.ev.trigger("scAfterContentSet",r);if(r.appendOnLoaded){p._addBlockToContainer(r,w,i)}}};if(j.isLoaded){g(j)()}else{if(i){f()}else{h()}}function h(){if(!j.image){g(j)();return}if(!j.isLoading){l(c("<img/>"),j.image)}else{var q=1;var r=function(v){var u=v==="big"?j.isBigLoaded:j.isMedLoaded;if(!j.isLoading){return}if(j.isLoaded){g(j)();return}if(q%50===0){var t=j.imageLoader;if(t.complete&&t.naturalWidth!==e&&t.naturalWidth!==0&&t.naturalHeight!==0){g(j)();return}}if(q>300){return}setTimeout(r,400);q++};r(j.sizeType)}}function l(q,r){if(!i){if(!j.isLoading){if(!r){r=q.attr("src");q=c("<img/>")}n(m);j.isLoading=true;j.imageLoader=q;q.one("load error",g(j)).attr("src",r)}}else{f()}}function o(q){if(q){if(!q.complete||q.naturalWidth===e||q.naturalWidth===0){return false}}else{return false}return true}function f(){m.isWaiting=true;n(m);m.slideId=-99}function n(q){j.holder.html(p._preloader.clone())}},_addBlockToContainer:function(l,k,f){var h=this;var i=l.holder;var j=l.id-h._newSlideId;var g=false;if(h._isMove&&!f&&h.st.fadeinLoadedSlide&&(j===0||((g||h._isAnimating||h._isDragging)&&(j===-1||j===1)))){var k=l.content;k.css(h._vendorPref+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0});h._slidesContainer.append(i);setTimeout(function(){k.css("opacity",1)},6)}else{h._slidesContainer.append(i)}l.appendOnLoaded=false},_onDragStart:function(j,k){var g=this,f,h;g.dragSuccess=false;if(c(j.target).closest(".scNoDrag",g._currHolder).length){return true}if(!k){if(g._isAnimating){h=true;g._stopAnimation()}}if(g._isDragging){if(g.hasTouch){g._multipleTouches=true}return}else{if(g.hasTouch){g._multipleTouches=false}}g._setGrabbingCursor();if(g.hasTouch){var i=j.originalEvent.touches;if(i&&i.length>0){f=i[0];if(i.length>1){g._multipleTouches=true}}else{return}}else{f=j;j.preventDefault()}g._isDragging=true;g._doc.on(g._moveEvent,function(l){g._onDragMove(l,k)}).on(g._upEvent,function(l){g._onDragRelease(l,k)});g._currMoveAxis="";g._hasMoved=false;g._pageX=f.pageX;g._pageY=f.pageY;g._startPagePos=g._accelerationPos=(!k?g._slidesHorizontal:g._thumbsHorizontal)?f.pageX:f.pageY;g._horDir=0;g._verDir=0;g._currRenderPosition=!k?g._sPosition:g._thumbsPosition;g._startTime=new Date().getTime();if(g.hasTouch){g._sliderOverflow.on(g._cancelEvent,function(l){g._onDragRelease(l,k)})}},_renderMovement:function(p,h){var q=this;if(q._checkedAxis){var l=q._renderMoveTime,m=p.pageX-q._pageX,j=p.pageY-q._pageY,f=q._currRenderPosition+m,r=q._currRenderPosition+j,o=(!h?q._slidesHorizontal:q._thumbsHorizontal),n=o?f:r,g=q._currMoveAxis;q._hasMoved=true;q._pageX=p.pageX;q._pageY=p.pageY;var i=o?q._pageX:q._pageY;if(g==="x"&&m!==0){q._horDir=m>0?1:-1}else{if(g==="y"&&j!==0){q._verDir=j>0?1:-1}}var k=o?m:j;if(!h){if(!q._loop){if(q.currSlideId<=0){if(i-q._startPagePos>0){n=q._currRenderPosition+k*q._lastItemFriction}}if(q.currSlideId>=q.numSlides-1){if(i-q._startPagePos<0){n=q._currRenderPosition+k*q._lastItemFriction}}}}else{if(n>q._thumbsMinPosition){n=q._currRenderPosition+k*q._lastItemFriction}else{if(n<q._thumbsMaxPosition){n=q._currRenderPosition+k*q._lastItemFriction}}}q._currRenderPosition=n;if(l-q._startTime>200){q._startTime=l;q._accelerationPos=i}if(!h){if(q._isMove){q._setPosition(q._currRenderPosition)}}else{q._setThumbsPosition(q._currRenderPosition)}}},_onDragMove:function(l,m){var h=this,f;if(h.hasTouch){if(h._lockAxis){return}var k=l.originalEvent.touches;if(k){if(k.length>1){return}else{f=k[0]}}else{return}}else{f=l}if(!h._hasMoved){if(h._useCSS3Transitions){(!m?h._slidesContainer:h._thumbsContainer).css((h._vendorPref+h._TD),"0s")}(function g(){if(h._isDragging){h._animFrame=requestAnimationFrame(g);if(h._renderMoveEvent){h._renderMovement(h._renderMoveEvent,m)}}})()}if(!h._checkedAxis){var i=(!m?h._slidesHorizontal:h._thumbsHorizontal),j=(Math.abs(f.pageX-h._pageX)-Math.abs(f.pageY-h._pageY))-(i?-7:7);if(j>7){if(i){l.preventDefault();h._currMoveAxis="x"}else{if(h.hasTouch){h._completeGesture();return}}h._checkedAxis=true}else{if(j<-7){if(!i){l.preventDefault();h._currMoveAxis="y"}else{if(h.hasTouch){h._completeGesture();return}}h._checkedAxis=true}}return}l.preventDefault();h._renderMoveTime=new Date().getTime();h._renderMoveEvent=f},_completeGesture:function(){var f=this;f._lockAxis=true;f._hasMoved=f._isDragging=false;f._onDragRelease()},_onDragRelease:function(G,x){var z=this,w,E,f,n,m,j,q,i;z.ev.trigger("scDragRelease");z._renderMoveEvent=null;z._isDragging=false;z._lockAxis=false;z._checkedAxis=false;z._renderMoveTime=0;cancelAnimationFrame(z._animFrame);if(z._hasMoved){if(!x){if(z._isMove){z._setPosition(z._currRenderPosition)}}else{z._setThumbsPosition(z._currRenderPosition)}}z._doc.off(z._moveEvent).off(z._upEvent);if(z.hasTouch){z._sliderOverflow.off(z._cancelEvent)}z._setGrabCursor();if(!z._hasMoved&&!z._multipleTouches){if(x&&z._thumbsEnabled){var H=c(G.target).closest(".scNavItem");if(H.length){z.goTo(H.index())}return}}var v=(!x?z._slidesHorizontal:z._thumbsHorizontal);if(!z._hasMoved||(z._currMoveAxis==="y"&&v)||(z._currMoveAxis==="x"&&!v)){return}z.dragSuccess=true;z._currMoveAxis="";function h(K){if(K<100){return 100}else{if(K>500){return 500}}return K}function u(L,K){if(z._isMove||x){m=(-z._realId-z._idOffset)*z._slideSize;j=Math.abs(z._sPosition-m);z._currAnimSpeed=j/K;if(L){z._currAnimSpeed+=250}z._currAnimSpeed=h(z._currAnimSpeed);z._animateTo(m,false)}}var o=z.st.minSlideOffset,B=z.hasTouch?G.originalEvent.changedTouches[0]:G,r=v?B.pageX:B.pageY,C=z._startPagePos,t=z._accelerationPos,D=z.currSlideId,J=z.numSlides,A=v?z._horDir:z._verDir,I=z._loop,y=false,g=0;w=Math.abs(r-C);E=r-t;f=(new Date().getTime())-z._startTime;n=Math.abs(E)/f;if(A===0||J<=1){u(true,n);return}if(!I&&!x){if(D<=0){if(A>0){u(true,n);return}}else{if(D>=J-1){if(A<0){u(true,n);return}}}}if(!x){if(C+o<r){if(A<0){u(false,n);return}z._moveTo("prev",h(Math.abs(z._sPosition-(-z._realId-z._idOffset+1)*z._slideSize)/n),y,true,true)}else{if(C-o>r){if(A>0){u(false,n);return}z._moveTo("next",h(Math.abs(z._sPosition-(-z._realId-z._idOffset-1)*z._slideSize)/n),y,true,true)}else{u(false,n)}}}else{var m=z._thumbsPosition;var l;if(m>z._thumbsMinPosition){m=z._thumbsMinPosition}else{if(m<z._thumbsMaxPosition){m=z._thumbsMaxPosition}else{var s=0.003,p=(n*n)/(s*2),F=-z._thumbsPosition,k=z._thumbsContainerSize-z._thumbsViewportSize+z._thumbsPosition;if(E>0&&p>F){F=F+z._thumbsViewportSize/(15/(p/n*s));n=n*F/p;p=F}else{if(E<0&&p>k){k=k+z._thumbsViewportSize/(15/(p/n*s));n=n*k/p;p=k}}l=Math.max(Math.round(n/s),50);m=m+p*(E<0?-1:1);if(m>z._thumbsMinPosition){z._animateThumbsTo(m,l,true,z._thumbsMinPosition,200);return}else{if(m<z._thumbsMaxPosition){z._animateThumbsTo(m,l,true,z._thumbsMaxPosition,200);return}}}}z._animateThumbsTo(m,l,true)}},_setPosition:function(g){var f=this;g=f._sPosition=g;if(f._useCSS3Transitions){f._slidesContainer.css(f._xProp,f._tPref1+(f._slidesHorizontal?(g+f._tPref2+0):(0+f._tPref2+g))+f._tPref3)}else{f._slidesContainer.css(f._slidesHorizontal?f._xProp:f._yProp,g)}},updateSliderSize:function(g){var p=this,k,f;if(p.st.beforeResize){p.st.beforeResize.call(p)}if(p.st.autoScaleSlider){var n=p.st.autoScaleSliderWidth,m=p.st.autoScaleSliderHeight;if(p.st.autoScaleHeight){k=p.slider.width();if(k!=p.width){p.slider.css("height",k*(m/n));k=p.slider.width()}f=p.slider.height()}else{f=p.slider.height();if(f!=p.height){p.slider.css("width",f*(n/m));f=p.slider.height()}k=p.slider.width()}}else{k=p.slider.width();f=p.slider.height()}p._sliderOffset=p.slider.offset();p._sliderOffset=p._sliderOffset[p._reorderProp];if(g||k!=p.width||f!=p.height){p.width=k;p.height=f;p._wrapWidth=k;p._wrapHeight=f;p.ev.trigger("scBeforeSizeSet");p._sliderOverflow.css({width:p._wrapWidth,height:p._wrapHeight});p._slideSize=(p._slidesHorizontal?p._wrapWidth:p._wrapHeight)+p.st.slidesSpacing;p._imagePadding=p.st.imageScalePadding;var o,l,j,h;for(j=0;j<p.slides.length;j++){o=p.slides[j];o.positionSet=false;if(o&&o.image&&o.isLoaded){o.isRendered=false;p._resizeImage(o)}}if(p._cloneHolders){for(j=0;j<p._cloneHolders.length;j++){o=p._cloneHolders[j];o.holder.css(p._reorderProp,(o.id+p._idOffset)*p._slideSize)}}p._updateBlocksContent();if(p._isMove){if(p._useCSS3Transitions){p._slidesContainer.css(p._vendorPref+"transition-duration","0s")}p._setPosition((-p._realId-p._idOffset)*p._slideSize)}p.ev.trigger("scOnUpdateNav");if(p.st.afterResize){p.st.afterResize.call(p)}}},setSlidesOrientation:function(f){},appendSlide:function(g,h){var f=this,i=f._parseNode(g);if(isNaN(h)||h>f.numSlides){h=f.numSlides}f.slides.splice(h,0,i);f.slidesJQ.splice(h,0,'<div style="'+(f._isMove?"position: absolute;":"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;")+'" class="scSlide"></div>');if(h<f.currSlideId){f.currSlideId++}f.ev.trigger("scOnAppendSlide",[i,h]);f._refreshSlides(h);if(h===f.currSlideId){f.ev.trigger("scAfterSlideChange")}},removeSlide:function(h){var g=this,f=g.slides[h];if(f){if(f.holder){f.holder.remove()}if(h<g.currSlideId){g.currSlideId++}g.slides.splice(h,1);g.slidesJQ.splice(h,1);g.ev.trigger("scOnRemoveSlide",[h]);g._refreshSlides(h);if(h===g.currSlideId){g.ev.trigger("scAfterSlideChange")}}},_refreshSlides:function(j){var g=this,f=g.numSlides,h=g._realId<=0?0:Math.floor(g._realId/f);g.numSlides=g.slides.length;if(g.numSlides===0){g.currSlideId=g._idOffset=g._realId=0;g.currSlide=g._oldHolder=null}else{g._realId=h*g.numSlides+g.currSlideId}for(var k=0;k<g.numSlides;k++){g.slides[k].id=k}g._oldSlideContent=g.currSlide.find(".scContent");g.currSlide=g.slides[g.currSlideId];g._currHolder=g.slidesJQ[g.currSlideId];if(g.currSlideId>=g.numSlides){g.goTo(g.numSlides-1)}else{if(g.currSlideId<0){g.goTo(0)}}g._refreshNumPreloadImages();if(g._isMove&&g._loop){g._slidesContainer.css((g._vendorPref+g._TD),"0ms")}if(g._refreshSlidesTimeout){clearTimeout(g._refreshSlidesTimeout)}g._refreshSlidesTimeout=setTimeout(function(){g._setPosition((-g._realId-g._idOffset)*g._slideSize);g._updateBlocksContent()},14);g.ev.trigger("scOnUpdateNav")},_setGrabCursor:function(){var f=this;if(!f.hasTouch&&f._isMove){if(f._grabCursor){f._sliderOverflow.css("cursor",f._grabCursor)}else{f._sliderOverflow.removeClass("grabbing-cursor");f._sliderOverflow.addClass("grab-cursor")}}},_setGrabbingCursor:function(){var f=this;if(!f.hasTouch&&f._isMove){if(f._grabbingCursor){f._sliderOverflow.css("cursor",f._grabbingCursor)}else{f._sliderOverflow.removeClass("grab-cursor");f._sliderOverflow.addClass("grabbing-cursor")}}},next:function(g){var f=this;f._moveTo("next",f.st.transitionSpeed,true,!g)},prev:function(g){var f=this;f._moveTo("prev",f.st.transitionSpeed,true,!g)},_moveTo:function(k,y,l,q,v){var r=this,j,B,x,s;if(r._isVideoPlaying){r.stopVideo()}r.ev.trigger("scBeforeMove",[k,q]);if(k==="next"){s=r.currSlideId+1}else{if(k==="prev"){s=r.currSlideId-1}else{s=k=parseInt(k,10)}}if(!r._loop){if(s<0){r._doBackAndForthAnim("left",!q);return}else{if(s>=r.numSlides){r._doBackAndForthAnim("right",!q);return}}}if(r._isAnimating){r._stopAnimation();l=false}B=s-r.currSlideId;r._prevSlideId=r.currSlideId;r._oldSlideContent=r.slidesJQ[r._prevSlideId].find(".scContent");var h=r.currSlideId;var t=r.currSlideId+B;var m=r._realId;var A;var w;if(r._loop){t=r._updateBlocksContent(false,t);m+=B}else{m=t}r._newSlideId=t;r._oldHolder=r.slidesJQ[r.currSlideId];r._realId=m;r.currSlideId=r._newSlideId;r.currSlide=r.slides[r.currSlideId];r._currHolder=r.slidesJQ[r.currSlideId];var g=2;var u=Boolean(B>0);var p=Math.abs(B);var f=Math.floor(h/r._numPreloadImages);var D=Math.floor((h+(u?g:-g))/r._numPreloadImages);var C=u?Math.max(f,D):Math.min(f,D);var z=C*r._numPreloadImages+(u?(r._numPreloadImages-1):0);if(z>r.numSlides-1){z=r.numSlides-1}else{if(z<0){z=0}}var n=u?(z-h):(h-z);if(n>r._numPreloadImages){n=r._numPreloadImages}if(p>n+g){r._idOffset+=(p-(n+g))*(u?-1:1);y=y*1.4;for(x=0;x<r.numSlides;x++){r.slides[x].positionSet=false}}r._currAnimSpeed=y;r._updateBlocksContent(true);if(!v){w=true}j=(-m-r._idOffset)*r._slideSize;if(w){setTimeout(function(){r._isWorking=false;r._animateTo(j,k,false,l);r.ev.trigger("scOnUpdateNav")},0)}else{r._animateTo(j,k,false,l);r.ev.trigger("scOnUpdateNav")}function o(i){if(i<0){i=r.numSlides+i}else{if(i>r.numSlides-1){i=i-r.numSlides}}if(i!==r.currSlideId){return false}return true}},_updateArrowsNav:function(){var f=this,g="scArrowDisabled";if(f.st.arrowsNav){if(f.numSlides<=1){f._arrowLeft.css("display","none");f._arrowRight.css("display","none");return}else{f._arrowLeft.css("display","block");f._arrowRight.css("display","block")}if(!f._loop&&!f.st.loopRewind){if(f.currSlideId===0){f._arrowLeft.addClass(g)}else{f._arrowLeft.removeClass(g)}if(f.currSlideId===f.numSlides-1){f._arrowRight.addClass(g)}else{f._arrowRight.removeClass(g)}}}},_animateTo:function(n,h,f,l,i){var p=this,j,k,m,g={};if(isNaN(p._currAnimSpeed)){p._currAnimSpeed=400}p._sPosition=p._currRenderPosition=n;p.ev.trigger("scBeforeAnimStart");if(p.st.beforeSlideChange){p.st.beforeSlideChange.call(p)}p._currentSlideContent=p.slidesJQ[p.currSlideId].find(".scContent");p._currentSlideContent.trigger("slidestart.sc");if(!p._useCSS3Transitions){if(p._isMove){g[p._slidesHorizontal?p._xProp:p._yProp]=n+"px";p._slidesContainer.animate(g,p._currAnimSpeed,l?p.st.easeInOut:p.st.easeOut)}else{k=p._oldHolder;m=p._currHolder;m.stop(true,true).css({opacity:0,display:"block",zIndex:p._fadeZIndex});p._currAnimSpeed=p.st.transitionSpeed;m.animate({opacity:1},p._currAnimSpeed,p.st.easeInOut);o();if(k){k.data("scTimeout",setTimeout(function(){k.stop(true,true).css({opacity:0,display:"none",zIndex:0})},p._currAnimSpeed+60))}}}else{if(p._isMove){g[(p._vendorPref+p._TD)]=p._currAnimSpeed+"ms";g[(p._vendorPref+p._TTF)]=l?c.scCSS3Easing[p.st.easeInOut]:c.scCSS3Easing[p.st.easeOut];p._slidesContainer.css(g);setTimeout(function(){p._setPosition(n)},p.hasTouch?5:0)}else{p._currAnimSpeed=p.st.transitionSpeed;k=p._oldHolder;m=p._currHolder;if(m.data("scTimeout")){m.css("opacity",0)}o();if(k){k.data("scTimeout",setTimeout(function(){g[p._vendorPref+p._TD]="0ms";g.zIndex=0;g.display="none";k.data("scTimeout","");k.css(g);setTimeout(function(){k.css("opacity",0)},16)},p._currAnimSpeed+60))}g.display="block";g.zIndex=p._fadeZIndex;g.opacity=0;g[p._vendorPref+p._TD]="0ms";g[p._vendorPref+p._TTF]=c.scCSS3Easing[p.st.easeInOut];m.css(g);m.data("scTimeout",setTimeout(function(){m.css(p._vendorPref+p._TD,p._currAnimSpeed+"ms");m.data("scTimeout",setTimeout(function(){m.css("opacity",1);m.data("scTimeout","")},20))},20))}}p._isAnimating=true;if(p.loadingTimeout){clearTimeout(p.loadingTimeout)}if(i){p.loadingTimeout=setTimeout(function(){p.loadingTimeout=null;i.call()},p._currAnimSpeed+60)}else{p.loadingTimeout=setTimeout(function(){p.loadingTimeout=null;p._animationComplete(h)},p._currAnimSpeed+60)}function o(){var q=k.data("scTimeout");if(q){if(k!==m){k.css({opacity:0,display:"none",zIndex:0})}clearTimeout(q);k.data("scTimeout","")}q=m.data("scTimeout");if(q){clearTimeout(q);m.data("scTimeout","")}}},_stopAnimation:function(){var f=this;f._isAnimating=false;clearTimeout(f.loadingTimeout);if(f._isMove){if(!f._useCSS3Transitions){f._slidesContainer.stop(true);f._sPosition=parseInt(f._slidesContainer.css(f._xProp),10)}else{var g=f._sPosition;var h=f._currRenderPosition=f._getTransformProp();f._slidesContainer.css((f._vendorPref+f._TD),"0ms");if(g!==h){f._setPosition(h)}}}else{if(f._fadeZIndex>20){f._fadeZIndex=10}else{f._fadeZIndex++}}},_getTransformProp:function(){var g=this,h=b.getComputedStyle(g._slidesContainer.get(0),null).getPropertyValue(g._vendorPref+"transform"),f=h.replace(/^matrix\(/i,"").split(/, |\)$/g);return parseInt(f[(g._slidesHorizontal?4:5)],10)},_getCSS3Prop:function(h,g){var f=this;return f._useCSS3Transitions?f._tPref1+(g?(h+f._tPref2+0):(0+f._tPref2+h))+f._tPref3:h},_animationComplete:function(g){var f=this;if(!f._isMove){f._currHolder.css("z-index",0);f._fadeZIndex=10}f._isAnimating=false;f.staticSlideId=f.currSlideId;f._updateBlocksContent();f._slidesMoved=false;f.ev.trigger("scAfterSlideChange");f._oldSlideContent.trigger("slideend.sc");iQ.update();if(f.st.afterSlideChange){f.st.afterSlideChange.call(f)}},_doBackAndForthAnim:function(i,l){var f=this,h=(-f._realId-f._idOffset)*f._slideSize,k=30;if(f.numSlides===0){return}if(f.st.loopRewind){if(i==="left"){f.goTo(f.numSlides-1,l)}else{f.goTo(0,l)}return}if(f._isAnimating){return}if(f._isMove){if(k!==0){f._currAnimSpeed=200;var j=function(){f._isAnimating=false};var g=function(){f._isAnimating=false;f._animateTo(h,"",false,true,j)};f._animateTo(h+(i==="left"?k:-k),"",false,true,g)}}},_resizeImage:function(f,y){var s=true;if(f.isRendered){return}var z=f.content,w="scImg",t,r=this,p=r.st.imageAlignCenter,o=r.st.imageScaleMode,v;if(f.videoURL){w="scVideoContainer";if(o!=="fill"){t=true}else{v=z;if(!v.hasClass(w)){v=v.find("."+w)}v.css({width:"100%",height:"100%"});w="scImg"}}if(!z.hasClass(w)){s=false;z=z.find("."+w)}var m=f.iW,i=f.iH,h;f.isRendered=true;if(o==="none"&&!p){return}if(o!=="fill"){h=r._imagePadding}else{h=0}var n=r._wrapWidth-h*2,q=r._wrapHeight-h*2,j,g,k,l,u,x={};if(o==="fit-if-smaller"){if(m>n||i>q){o="fit"}}if(o==="fill"||o==="fit"){j=n/m;g=q/i;if(o=="fill"){k=j>g?j:g}else{if(o=="fit"){k=j<g?j:g}else{k=1}}l=Math.ceil(m*k,10);u=Math.ceil(i*k,10)}else{l=m;u=i}if(o!=="none"){x.width=l;x.height=u;if(t){z.find(".scImg").css({width:"100%",height:"100%"})}}if(p){x.marginLeft=Math.floor((n-l)/2)+h;x.marginTop=Math.floor((q-u)/2)+h}z.css(x)}};c.scProto=a.prototype;c.fn.sonyCarousel=function(g){var f=arguments;return this.each(function(){var i=c(this);if(typeof g==="object"||!g){if(!i.data("sonyCarousel")){i.data("sonyCarousel",new a(i,g))}}else{var h=i.data("sonyCarousel");if(h&&h[g]){return h[g].apply(h,Array.prototype.slice.call(f,1))}}})};c.fn.sonyCarousel.defaults={slidesSpacing:0,startSlideId:0,loop:false,loopRewind:false,numImagesToPreload:4,fadeinLoadedSlide:true,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:true,arrowsNav:true,arrowsNavAutoHide:true,navigateByClick:true,randomizeSlides:false,sliderDrag:true,sliderTouch:true,keyboardNavEnabled:false,fadeInAfterLoaded:true,allowCSS3:true,allowCSS3OnWebkit:true,addActiveClass:false,autoHeight:false,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:true,imageScalePadding:4,autoScaleSlider:false,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:true,arrowsNavHideOnTouch:false,globalCaption:false,beforeSlideChange:null,afterSlideChange:null,beforeResize:null,afterResize:null};c.scCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"};c.extend(jQuery.easing,{easeInOutSine:function(g,h,f,j,i){return -j/2*(Math.cos(Math.PI*h/i)-1)+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f}});c(b).load(function(){c(".sonyCarousel").each(function(){var f=c(this),g={arrowsNav:true,fadeinLoadedSlide:true,imageAlignCenter:true,imageScaleMode:"fill",controlNavigation:"bullets",keyboardNavEnabled:true,slidesOrientation:"horizontal",autoScaleSlider:true};c.each(f.data(),function(h,i){g[h]=i});f.sonyCarousel(g)})})})(jQuery,Modernizr,window,undefined);