$(document).ready(function(){$(document).on("keydown",function(a){if(a.which===191&&a.shiftKey){$("body").toggleClass("debug")}})});if(!window.Exports){window.Exports={Modules:{}}}Exports.fiveColumns=5;Exports.sixColumns=6;Exports.twelveColumns=12;Exports.col5Width=188;Exports.gut5Width=20;Exports.fullSlimWidth=(Exports.fiveColumns*Exports.col5Width)+(Exports.gut5Width*(Exports.fiveColumns-1));Exports.COLUMN_WIDTH_SLIM_5=Exports.col5Width/Exports.fullSlimWidth;Exports.GUTTER_WIDTH_SLIM_5=Exports.gut5Width/Exports.fullSlimWidth;Exports.slimColWidth=54;Exports.slimGutWidth=18;Exports.slimWidth=(Exports.twelveColumns*Exports.slimColWidth)+(Exports.slimGutWidth*(Exports.twelveColumns-1));Exports.COLUMN_WIDTH_SLIM=Exports.slimColWidth/Exports.slimWidth;Exports.GUTTER_WIDTH_SLIM=Exports.slimGutWidth/Exports.slimWidth;Exports.colWidth320=36;Exports.gutWidth320=12;Exports.fullWidth320=(Exports.sixColumns*Exports.colWidth320)+(Exports.gutWidth320*(Exports.sixColumns-1));Exports.COLUMN_WIDTH_320=Exports.colWidth320/Exports.fullWidth320;Exports.GUTTER_WIDTH_320=Exports.gutWidth320/Exports.fullWidth320;Exports.masonryColumns=function(b){var a=b;if(!Modernizr.mediaqueries||Modernizr.mq("(min-width: 35.5em)")){a=Exports.COLUMN_WIDTH_SLIM*b}return a};Exports.masonryGutters=function(a){var b=0;if(!Modernizr.mediaqueries||Modernizr.mq("(min-width: 35.5em)")){b=Exports.GUTTER_WIDTH_SLIM*a}return b};Exports.constrain=function(c,b,a){c=parseFloat(c);return c<b?b:c>a?a:c};var sony=sony||{};window.iQ={options:{speedTestExpireMinutes:30,asyncDistance:500,updateOnResize:true}};(function(b,c){if(typeof b.console===c){var a=function(){};b.console={log:a,group:a,groupEnd:a,warn:a,error:a}}}(window));(function(c,d,a,e){var b=function(g){var f=this;f.searchMenu={};f.$container=g;f.$activePrimaryNavBtns=f.$container.find(".nav-dropdown-toggle");f.$currentOpenNavBtn=false;f.$pageWrapOuter=c("#page-wrap-outer");f.mobileNavIScroll=false,f.mobileNavVisible=false;f.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};f.tapOrClick=f.hasTouch?"touchstart":"click";f.transformName=d.prefixed("transform");f.transitionName=d.prefixed("transition");f.transitionProperty=d.prefixed("transitionProperty");f.transitionDuration=d.prefixed("transitionDuration");f.transitionEasing=d.prefixed("transitionTimingFunction");f.transitionEnd=f.transEndEventNames[f.transitionName];if(f.mode==="mobile"){}if(c(a).width()<=767){f.initPrimaryNavBtns(false);f.initFooter(false)}else{f.initPrimaryNavBtns(true);f.initFooter(true)}f.isInitialized=true};b.prototype={constructor:b,initPrimaryNavBtns:function(g){var f=this;if(g){f.$activePrimaryNavBtns.each(function(){f.resetPrimaryNavBtn(c(this));c(this).on("click",function(){var h=c(this);if(!h.parent().hasClass("nav-li-selected")){if(f.$currentOpenNavBtn!==false){f.resetPrimaryNavBtn(f.$currentOpenNavBtn);var i=c("."+f.$currentOpenNavBtn.data("target"));if(i.hasClass("navtray-w")){setTimeout(function(){f.setActivePrimaryNavBtn(h)},350)}else{setTimeout(function(){f.setActivePrimaryNavBtn(h)},150)}}else{f.setActivePrimaryNavBtn(h)}}else{f.resetPrimaryNavBtn(f.$currentOpenNavBtn);f.$currentOpenNavBtn=false}})})}else{c("#btn-mobile-nav").on(f.tapOrClick,function(){if(!f.mobileNavVisible){f.showMobileNav()}else{f.hideMobileNav()}})}},setActivePrimaryNavBtn:function(g){var f=this;f.activatePrimaryNavBtn(g);f.$currentOpenNavBtn=g},resetPrimaryNavBtn:function(h){var g=this;h.removeClass("active").parent().removeClass("nav-li-selected");if(h.data("target").length){var f=c("."+h.data("target"));if(f.hasClass("navtray-w")){g.slideNavTray(f,false)}else{c(".navmenu-w-visible").removeClass("navmenu-w-visible")}}},slideNavTray:function(h,g){var j=this,f,l,k=h.outerHeight();h.data("expandedHeight",k);if(g){f="1px";l=k}else{f=k;l="1px"}h.data("expandedHeight",f).css("height",f).find(".navtray").addClass("navtray-absolute").css("height",k);setTimeout(function(){h.removeClass("no-transition");setTimeout(function(){h.css("height",l).one(j.transitionEnd,i);if(g){h.addClass("navtray-w-visible")}else{h.removeClass("navtray-w-visible")}},1)},1);function i(){j.setNavTrayContentNaturalFlow(h)}},setNavTrayContentNaturalFlow:function(f){f.css("height","").addClass("no-transition").find(".navtray").removeClass("navtray-absolute").css("height","")},activatePrimaryNavBtn:function(i){var g=this;i.addClass("active").parent().addClass("nav-li-selected");if(i.data("target").length){var f=c("."+i.data("target"));if(f.hasClass("navtray-w")){g.slideNavTray(f,true)}else{f.addClass("navmenu-w-visible");if(f.hasClass("navmenu-w-search")){var j=i.parent().position().left+parseInt(i.css("marginLeft"),10)+i.innerWidth();var h=j-f.innerWidth();f.css({right:"auto",left:h+"px"})}}}},showMobileNav:function(){var g=this;g.showMobileBackdrop();var h=parseInt(c(a).height(),10)+60+"px";g.$pageWrapOuter.height(h);if(!g.mobileNavIScroll){var f=c("#nav-outer-container"),i=f.find(".nav-mobile-scroller");f.height(h);i.height(i.height());setTimeout(function(){g.mobileNavIScroll=new a.IScroll("nav-outer-container",{vScroll:true,hScroll:false,hScrollbar:false,snap:false,momentum:true,bounce:false})},1)}c("#page-wrap-inner").addClass("show-mobile-menu");g.mobileNavVisible=true},hideMobileNav:function(){var f=this;f.hideMobileBackdrop();c("#page-wrap-inner").one(f.transitionEnd,function(){f.mobileNavIScroll.destroy();f.mobileNavIScroll=false;f.$pageWrapOuter.css("height","")});c("#page-wrap-inner").removeClass("show-mobile-menu");f.mobileNavVisible=false},showMobileBackdrop:function(){var f=this;f.$mobileScreenOverlay=c('<div class="modal-backdrop mobile-screen-overlay opacity0" />').appendTo(c("#page-wrap-inner"));setTimeout(function(){f.$mobileScreenOverlay.removeClass("opacity0").addClass("opacity1")},1)},hideMobileBackdrop:function(){var f=this;f.$mobileScreenOverlay.one(f.transitionEnd,function(){f.$mobileScreenOverlay.remove()});f.$mobileScreenOverlay.removeClass("opacity1").addClass("opacity0")},initFooter:function(g){var f=this;if(g){}c("#country-selector").on("mouseenter mouseleave",function(){var i=c(this).closest(".grid-footer").width();c(this).find(".dropdown-hover-menu-lists-w").width(i)});var h=49;c("#footer-wrapper .footer-mobile-section h5").on(f.tapOrClick,function(){if(c(a).width()<=767){var j=c(this).parent();if(j.hasClass("collapsed")){j.height(j.data("expHeight")).removeClass("collapsed")}else{var i=j.height();j.data("expHeight",i).height(i);setTimeout(function(){j.addClass("transition-height");setTimeout(function(){j.height(h).addClass("collapsed")},1)},1)}}})}};c.fn.globalNav=function(g){var f=Array.prototype.slice.apply(arguments);return this.each(function(){var h=c(this),i=h.data("globalNav");if(!i){i=new b(h);h.data("globalNav",i)}if(typeof g==="string"){i[g].apply(i,f.slice(1))}})};c.fn.globalNav.options={sampleOption:0};c.fn.globalNav.settings={isTouch:!!("ontouchstart" in a),isInitialized:false}})(jQuery,Modernizr,window);$(function(){$(".nav-wrapper").globalNav()});(function(J,aj,L){J.images=[];J.resizeFlaggedImages=[];J.options=J.options||{};function ag(aF,aG){var aD,aA,aB,aH,aC=0;function aE(){aC=new Date;aH=null;aF.apply(aB,aD)}return function(){var aI=new Date,aJ=aG-(aI-aC);aD=arguments;aB=this;if(aJ<=0){aC=aI;aA=aF.apply(aB,aD)}else{if(!aH){aH=Y(aE,aJ)}}return aA}}function az(aF,aG,aC){var aE,aA,aB,aH;function aD(){aH=null;if(!aC){aF.apply(aB,aE)}}return function(){var aI=aC&&!aH;aE=arguments;aB=this;clearTimeout(aH);aH=Y(aD,aG);if(aI){aA=aF.apply(aB,aE)}return aA}}var t="iqjs",W="high",s="low",Q="length",i="scroll",T="resize",ap="complete",N=200,af="",ad="on",P="load",l=ad+ap,M="orientation",j="EventListener",c="add"+j,au=M+"change",aw=J.options,U=aw.jquerySelector||".iq-img",n=aw.minDevicePixelRatio||2,ax=aw.highResPathSuffix||"@2x",G=aw.asyncDistance||0,q=aw.base||"",X=aw.pathTemplate||"{fileName}-{breakpoint}{highRes}.{ext}",V=/\?/,ah=/\{breakpoint\}/gi,o=/\{highRes\}/gi,aq=/\{fileName\}/gi,b=/\{ext\}/gi,al,y,ao=aw.breakpoints||[{name:"phone",maxWidth:480},{name:"tablet",minWidth:481,maxWidth:960},{name:"desktop",minWidth:961,defaultBreakpoint:true}],at=s,an,ae,av,p=aw.minKbps||300,I=aw.speedTestUri||"http://foresightjs.appspot.com/speed-test/50K",k=aw.speedTestKB||50,d=aw.speedTestExpireMinutes||30,am=aw.updateOnResize||false,aa=aw.resizeFlag||"update-always",S=window,r=S.document,ay=r.documentElement,Y=S.setTimeout,D=c in r,A=D?af:ad,g=D?c:"attachEvent",B=D?"remove"+j:"detachEvent",e=M in S&&ad+au in S,O,u=S.screen.width,f=S.devicePixelRatio||1,x,v=ag(function(){ab(false)},N),C=az(function(){ab(true)},N),a=az(function(){if(S[M]!==x){x=S[M];ab(true)}},N),F=function(){O=O||Z();al=z(ao,O);y=al.name;ab()},ak=function(aA){ab(false,aA!==false)},ab=function(aA,aD){var aC,aB;if(!J.images[Q]||aD===true||(am===true&&aA)){ac();J.images=[];aj(U).each(function(aE,aF){J.images.push(aF);aj(aF).hasClass(aa)&&J.resizeFlaggedImages.push(aF)})}if(J.images[Q]){aB=0;while(aC=J.images[aB]){if(aC&&h(aC,G)){K(aC,aB);J.images.splice(aB,1);aB--}aB++}}if(J.resizeFlaggedImages[Q]){aB=0;while(aC=J.resizeFlaggedImages[aB]){if(aC&&h(aC,G)){K(aC,aB)}aB++}}!J.images[Q]&&!J.resizeFlaggedImages[length]&&R();!J.images[Q]&&l in J.options&&J.options[l]();aC=null},K=function(aA){O=Z();al=z(ao,O);y=al.name;var aB=ai(aA,y);if(aj(aA).data("current")!==aB){aj(aA).data("current",aB);ar(aA,aB)}},ar=function(aA,aB){if(aj(aA).is("img")){aA.src=aB}else{if(aj(aA).is("div")){aj(aA).css("background-image","url("+aB+")")}}},ac=function(){E(S,i,v);E(S,T,C);if(e){x=S[M];E(S,au,a)}},R=function(){H(S,i,v);!am&&H(S,T,C);e&&H(S,au,a)},w=function(){if(ae){return}if(aw.forceBandwidth){at=aw.forceBandwidth;an="force";ae=ap;return}if(f===1){an="skip";ae=ap;return}var aC=navigator.connection||{type:"unknown"};var aF=aC.type===3||aC.type===4||/^[23]g$/.test(aC.type);if(aF){an="connTypeSlow";ae=ap;return}try{var aA=JSON.parse(localStorage.getItem(t));if(aA!==null){if((new Date()).getTime()<aA.exp){at=aA.bw;av=aA.kbps;an="localStorage";ae=ap;return}}}catch(aH){}var aE=document.createElement("img"),aB,aG,aD;aE.onload=function(){aB=(new Date()).getTime();var aI=(aB-aG)/1000;aI=(aI>1?aI:1);av=((k*1024*8)/aI)/1024;at=(av>=p?W:s);m("networkSuccess")};aE.onerror=function(){m("networkError",5)};aE.onabort=function(){m("networkAbort",5)};aG=(new Date()).getTime();ae="loading";if(document.location.protocol==="https:"){I=I.replace("http:","https:")}aE.src=I+"?r="+Math.random();aD=(((k*8)/p)*1000)+350;Y(function(){m("networkSlow")},aD)},m=function(aD,aB){if(ae===ap){return}ae=ap;aD=aD;try{if(!aB){aB=d}var aA={kbps:av,bw:at,exp:(new Date()).getTime()+(aB*60000)};localStorage.setItem(t,JSON.stringify(aA))}catch(aC){}},z=function(aD,aA){var aE=aA,aC=0,aF={},aI,aB,aG,aH;while(aI=aD[aC]){aB=aI.minWidth;aG=aI.maxWidth;aH=aI.defaultBreakpoint?aI:aH;if(aA>0){if(aB&&aG&&aA>=aB&&aA<=aG||aB&&!aG&&aA>=aB||aG&&!aB&&aA<=aG){aF=aI}}else{if(aE<=0||aB<aE||aG<aE){aE=aB||aG||aE;aF=aI}}aC++}return L.mediaqueries?aF:aH},Z=function(){var aD=[ay.clientWidth,ay.offsetWidth,r.body.clientWidth],aA=aD[Q],aB=0,aC;for(;aB<aA;aB++){if(isNaN(aD[aB])){aD.splice(aB,1);aB--}}if(aD[Q]){aC=Math.max.apply(Math,aD);if(!isNaN(u)){aC=Math.min(u,aC)}}return aC||u||0},ai=function(aA,aB,aC){var aD=(aj(aA).data("base")||q)+X,aE=(aj(aA).data("src")||af).split(".");aD=aD.replace(ah,aB);aD=aD.replace(aq,aE[0]);aD=aD.replace(b,aE[1]);aD=aD.replace(o,(at===W&&f>=n)?ax:af);if(aC){aD+=(V.test(aD)?"&":"?");aD+="riloadrts="+(new Date).getTime()}return aD},h=function(aG,aM){var aF=aj(window);var aC=aF[0]===window,aL=(aC?{top:0,left:0}:aF.offset()),aD=aL.top+(aC?aF.scrollTop():0),aE=aL.left+(aC?aF.scrollLeft():0),aB=aE+aF.width(),aH=aD+aF.height(),aK=aj(aG).offset(),aJ=aj(aG).width(),aA=aj(aG).height();var aI=(aD-aM)<=(aK.top+aA)&&(aH+aM)>=aK.top&&(aE-aM)<=(aK.left+aJ)&&(aB+aM)>=aK.left;return aI};function E(aC,aB,aA){aC[g](A+aB,aA,false)}function H(aC,aB,aA){aC[B](A+aB,aA,false)}J.ready=function(){if(!document.body){return window.setTimeout(J.ready,1)}F()};if(document.readyState===ap){Y(J.ready,1)}else{E(S,P,J.ready)}if(aw.forcePixelRatio){f=aw.forcePixelRatio}J.update=ak;w()}(this.iQ=this.iQ||{},jQuery,Modernizr));(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(m,l,a,b){var c,n=0;if(typeof l!=="boolean"){b=a;a=l;l=g}function k(){var p=this,h=+new Date()-n,q=arguments;function i(){n=+new Date();a.apply(p,q)}function j(){c=g}if(b&&!c){i()}c&&clearTimeout(c);if(b===g&&h>m){i()}else{if(l!==true){c=setTimeout(b?j:i,b===g?m-h:m)}}}if(f.guid){k.guid=a.guid=a.guid||f.guid++}return k};f.debounce=function(c,b,a){return a===g?e(c,b,false):e(c,a,b!==false)}})(this);
/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 * Modified: 01/07/2013 by Glen Cheney (added onAnimate + more cleanup in destroy())
 */
(function(l,I){function y(m){if(D===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return D+m}var z=Math,q=I.createElement("div").style,D=(function(){var L="t,webkitT,MozT,msT,OT".split(","),K,J=0,m=L.length;for(;J<m;J++){K=L[J]+"ransform";if(K in q){return L[J].substr(0,L[J].length-1)}}return false})(),H=D?"-"+D.toLowerCase()+"-":"",p=y("transform"),B=y("transitionProperty"),o=y("transitionDuration"),r=y("transformOrigin"),F=y("transitionTimingFunction"),h=y("transitionDelay"),E=(/android/gi).test(navigator.appVersion),k=(/iphone|ipad|ipod/gi).test(navigator.appVersion),w=(/hp-tablet/gi).test(navigator.appVersion),n=y("perspective") in q,C="ontouchstart" in l&&!w,g=D!==false,i=y("transition") in q,b="addEventListener" in I,u=b?"":"on",s=b?"addEventListener":"attachEvent",c=b?"removeEventListener":"detachEvent",j="onorientationchange" in l?"orientationchange":"resize",d=C?"touchstart":"mousedown",x=C?"touchmove":"mousemove",f=C?"touchend":"mouseup",A=C?"touchcancel":"mouseup",a=(function(){if(D===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[D]})(),v=(function(){return l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),t=(function(){return l.cancelRequestAnimationFrame||l.webkitCancelAnimationFrame||l.webkitCancelRequestAnimationFrame||l.mozCancelRequestAnimationFrame||l.oCancelRequestAnimationFrame||l.msCancelRequestAnimationFrame||clearTimeout})(),G=n?" translateZ(0)":"",e=function(K,m){var L=this,J;L.wrapper=typeof K==="object"?K:I.getElementById(K);L.wrapper.style.overflow="hidden";L.scroller=L.wrapper.children[0];L.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:E,hideScrollbar:k,fadeScrollbar:k&&n,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(M){M.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(J in m){L.options[J]=m[J]}L.x=L.options.x;L.y=L.options.y;L.options.useTransform=g&&L.options.useTransform;L.options.hScrollbar=L.options.hScroll&&L.options.hScrollbar;L.options.vScrollbar=L.options.vScroll&&L.options.vScrollbar;L.options.zoom=L.options.useTransform&&L.options.zoom;L.options.useTransition=i&&L.options.useTransition;if(L.options.zoom&&E){G=""}L.scroller.style[B]=L.options.useTransform?H+"transform":"top left";L.scroller.style[o]="0";L.scroller.style[r]="0 0";if(L.options.useTransition){L.scroller.style[F]="cubic-bezier(0.33,0.66,0.66,1)"}if(L.options.useTransform){L.scroller.style[p]="translate("+L.x+"px,"+L.y+"px)"+G}else{L.scroller.style.cssText+=";position:absolute;top:"+L.y+"px;left:"+L.x+"px"}if(L.options.useTransition){L.options.fixedScrollbar=true}L.refresh();L._bind(j,l);L._bind(d);if(!C){if(L.options.wheelAction!=="none"){L._bind("DOMMouseScroll");L._bind("mousewheel")}}if(L.options.checkDOMChanges){L.checkDOMTime=setInterval(function(){L._checkDOMChanges()},500)}};e.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(J){var m=this;switch(J.type){case d:if(!C&&J.button!==0){return}m._start(J);break;case x:m._move(J);break;case f:case A:m._end(J);break;case j:m._resize();break;case"DOMMouseScroll":case"mousewheel":m._wheel(J);break;case a:m._transitionEnd(J);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW===this.scroller.offsetWidth*this.scale&&this.scrollerH===this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var K=this,J;if(!K[m+"Scrollbar"]){if(K[m+"ScrollbarWrapper"]){if(g){K[m+"ScrollbarIndicator"].style[p]=""}K[m+"ScrollbarWrapper"].parentNode.removeChild(K[m+"ScrollbarWrapper"]);K[m+"ScrollbarWrapper"]=null;K[m+"ScrollbarIndicator"]=null}return}if(!K[m+"ScrollbarWrapper"]){J=I.createElement("div");if(K.options.scrollbarClass){J.className=K.options.scrollbarClass+m.toUpperCase()}else{J.style.cssText="position:absolute;z-index:100;"+(m==="h"?"height:7px;bottom:1px;left:2px;right:"+(K.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(K.hScrollbar?"7":"2")+"px;top:2px;right:1px")}J.style.cssText+=";pointer-events:none;"+H+"transition-property:opacity;"+H+"transition-duration:"+(K.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(K.options.hideScrollbar?"0":"1");K.wrapper.appendChild(J);K[m+"ScrollbarWrapper"]=J;J=I.createElement("div");if(!K.options.scrollbarClass){J.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+H+"background-clip:padding-box;"+H+"box-sizing:border-box;"+(m==="h"?"height:100%":"width:100%")+";"+H+"border-radius:3px;border-radius:3px"}J.style.cssText+=";pointer-events:none;"+H+"transition-property:"+H+"transform;"+H+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+H+"transition-duration:0;"+H+"transform: translate(0,0)"+G;if(K.options.useTransition){J.style.cssText+=";"+H+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}K[m+"ScrollbarWrapper"].appendChild(J);K[m+"ScrollbarIndicator"]=J}if(m==="h"){K.hScrollbarSize=K.hScrollbarWrapper.clientWidth;K.hScrollbarIndicatorSize=z.max(z.round(K.hScrollbarSize*K.hScrollbarSize/K.scrollerW),8);K.hScrollbarIndicator.style.width=K.hScrollbarIndicatorSize+"px";K.hScrollbarMaxScroll=K.hScrollbarSize-K.hScrollbarIndicatorSize;K.hScrollbarProp=K.hScrollbarMaxScroll/K.maxScrollX}else{K.vScrollbarSize=K.vScrollbarWrapper.clientHeight;K.vScrollbarIndicatorSize=z.max(z.round(K.vScrollbarSize*K.vScrollbarSize/K.scrollerH),8);K.vScrollbarIndicator.style.height=K.vScrollbarIndicatorSize+"px";K.vScrollbarMaxScroll=K.vScrollbarSize-K.vScrollbarIndicatorSize;K.vScrollbarProp=K.vScrollbarMaxScroll/K.maxScrollY}K._scrollbarPos(m,true)},_resize:function(){var m=this;m.resizeTimer=setTimeout(function(){m.refresh()},E?400:250)},_pos:function(m,J){if(this.zoomed){return}m=this.hScroll?m:0;J=this.vScroll?J:0;if(this.options.useTransform){this.scroller.style[p]="translate("+m+"px,"+J+"px) scale("+this.scale+")"+G}else{m=z.round(m);J=z.round(J);this.scroller.style.left=m+"px";this.scroller.style.top=J+"px"}this.x=m;this.y=J;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,L){var K=this,M=m==="h"?K.x:K.y,J;if(!K[m+"Scrollbar"]){return}M=K[m+"ScrollbarProp"]*M;if(M<0){if(!K.options.fixedScrollbar){J=K[m+"ScrollbarIndicatorSize"]+z.round(M*3);if(J<8){J=8}K[m+"ScrollbarIndicator"].style[m==="h"?"width":"height"]=J+"px"}M=0}else{if(M>K[m+"ScrollbarMaxScroll"]){if(!K.options.fixedScrollbar){J=K[m+"ScrollbarIndicatorSize"]-z.round((M-K[m+"ScrollbarMaxScroll"])*3);if(J<8){J=8}K[m+"ScrollbarIndicator"].style[m==="h"?"width":"height"]=J+"px";M=K[m+"ScrollbarMaxScroll"]+(K[m+"ScrollbarIndicatorSize"]-J)}else{M=K[m+"ScrollbarMaxScroll"]}}}K[m+"ScrollbarWrapper"].style[h]="0";K[m+"ScrollbarWrapper"].style.opacity=L&&K.options.hideScrollbar?"0":"1";K[m+"ScrollbarIndicator"].style[p]="translate("+(m==="h"?M+"px,0)":"0,"+M+"px)")+G},_start:function(O){var N=this,J=C?O.touches[0]:O,K,m,P,M,L;if(!N.enabled){return}if(N.options.onBeforeScrollStart){N.options.onBeforeScrollStart.call(N,O)}if(N.options.useTransition||N.options.zoom){N._transitionTime(0)}N.moved=false;N.animating=false;N.zoomed=false;N.distX=0;N.distY=0;N.absDistX=0;N.absDistY=0;N.dirX=0;N.dirY=0;if(N.options.zoom&&C&&O.touches.length>1){M=z.abs(O.touches[0].pageX-O.touches[1].pageX);L=z.abs(O.touches[0].pageY-O.touches[1].pageY);N.touchesDistStart=z.sqrt(M*M+L*L);N.originX=z.abs(O.touches[0].pageX+O.touches[1].pageX-N.wrapperOffsetLeft*2)/2-N.x;N.originY=z.abs(O.touches[0].pageY+O.touches[1].pageY-N.wrapperOffsetTop*2)/2-N.y;if(N.options.onZoomStart){N.options.onZoomStart.call(N,O)}}if(N.options.momentum){if(N.options.useTransform){K=getComputedStyle(N.scroller,null)[p].replace(/[^0-9\-.,]/g,"").split(",");m=+(K[12]||K[4]);P=+(K[13]||K[5])}else{m=+getComputedStyle(N.scroller,null).left.replace(/[^0-9\-]/g,"");P=+getComputedStyle(N.scroller,null).top.replace(/[^0-9\-]/g,"")}if(m!==N.x||P!==N.y){if(N.options.useTransition){N._unbind(a)}else{t(N.aniTime)}N.steps=[];N._pos(m,P);if(N.options.onScrollEnd){N.options.onScrollEnd.call(N)}}}N.absStartX=N.x;N.absStartY=N.y;N.startX=N.x;N.startY=N.y;N.pointX=J.pageX;N.pointY=J.pageY;N.startTime=O.timeStamp||Date.now();if(N.options.onScrollStart){N.options.onScrollStart.call(N,O)}N._bind(x,l);N._bind(f,l);N._bind(A,l)},_move:function(Q){var O=this,R=C?Q.touches[0]:Q,M=R.pageX-O.pointX,K=R.pageY-O.pointY,m=O.x+M,S=O.y+K,N,L,J,P=Q.timeStamp||Date.now();if(O.options.onBeforeScrollMove){O.options.onBeforeScrollMove.call(O,Q)}if(O.options.zoom&&C&&Q.touches.length>1){N=z.abs(Q.touches[0].pageX-Q.touches[1].pageX);L=z.abs(Q.touches[0].pageY-Q.touches[1].pageY);O.touchesDist=z.sqrt(N*N+L*L);O.zoomed=true;J=1/O.touchesDistStart*O.touchesDist*this.scale;if(J<O.options.zoomMin){J=0.5*O.options.zoomMin*Math.pow(2,J/O.options.zoomMin)}else{if(J>O.options.zoomMax){J=2*O.options.zoomMax*Math.pow(0.5,O.options.zoomMax/J)}}O.lastScale=J/this.scale;m=this.originX-this.originX*O.lastScale+this.x,S=this.originY-this.originY*O.lastScale+this.y;this.scroller.style[p]="translate("+m+"px,"+S+"px) scale("+J+")"+G;if(O.options.onZoom){O.options.onZoom.call(O,Q)}return}O.pointX=R.pageX;O.pointY=R.pageY;if(m>0||m<O.maxScrollX){m=O.options.bounce?O.x+(M/2):m>=0||O.maxScrollX>=0?0:O.maxScrollX}if(S>O.minScrollY||S<O.maxScrollY){S=O.options.bounce?O.y+(K/2):S>=O.minScrollY||O.maxScrollY>=0?O.minScrollY:O.maxScrollY}O.distX+=M;O.distY+=K;O.absDistX=z.abs(O.distX);O.absDistY=z.abs(O.distY);if(O.absDistX<6&&O.absDistY<6){return}if(O.options.lockDirection){if(O.absDistX>O.absDistY+5){S=O.y;K=0}else{if(O.absDistY>O.absDistX+5){m=O.x;M=0}}}O.moved=true;O._pos(m,S);O.dirX=M>0?-1:M<0?1:0;O.dirY=K>0?-1:K<0?1:0;if(P-O.startTime>300){O.startTime=P;O.startX=O.x;O.startY=O.y}if(O.options.onScrollMove){O.options.onScrollMove.call(O,Q)}},_end:function(Q){if(C&&Q.touches.length!==0){return}var O=this,W=C?Q.changedTouches[0]:Q,R,V,K={dist:0,time:0},m={dist:0,time:0},N=(Q.timeStamp||Date.now())-O.startTime,S=O.x,P=O.y,U,T,J,M,L;O._unbind(x,l);O._unbind(f,l);O._unbind(A,l);if(O.options.onBeforeScrollEnd){O.options.onBeforeScrollEnd.call(O,Q)}if(O.zoomed){L=O.scale*O.lastScale;L=Math.max(O.options.zoomMin,L);L=Math.min(O.options.zoomMax,L);O.lastScale=L/O.scale;O.scale=L;O.x=O.originX-O.originX*O.lastScale+O.x;O.y=O.originY-O.originY*O.lastScale+O.y;O.scroller.style[o]="200ms";O.scroller.style[p]="translate("+O.x+"px,"+O.y+"px) scale("+O.scale+")"+G;O.zoomed=false;O.refresh();if(O.options.onZoomEnd){O.options.onZoomEnd.call(O,Q)}return}if(!O.moved){if(C){if(O.doubleTapTimer&&O.options.zoom){clearTimeout(O.doubleTapTimer);O.doubleTapTimer=null;if(O.options.onZoomStart){O.options.onZoomStart.call(O,Q)}O.zoom(O.pointX,O.pointY,O.scale===1?O.options.doubleTapZoom:1);if(O.options.onZoomEnd){setTimeout(function(){O.options.onZoomEnd.call(O,Q)},200)}}else{if(this.options.handleClick){O.doubleTapTimer=setTimeout(function(){O.doubleTapTimer=null;R=W.target;while(R.nodeType!==1){R=R.parentNode}if(R.tagName!=="SELECT"&&R.tagName!=="INPUT"&&R.tagName!=="TEXTAREA"){V=I.createEvent("MouseEvents");V.initMouseEvent("click",true,true,Q.view,1,W.screenX,W.screenY,W.clientX,W.clientY,Q.ctrlKey,Q.altKey,Q.shiftKey,Q.metaKey,0,null);V._fake=true;R.dispatchEvent(V)}},O.options.zoom?250:0)}}}O._resetPos(400);if(O.options.onTouchEnd){O.options.onTouchEnd.call(O,Q)}return}if(N<300&&O.options.momentum){K=S?O._momentum(S-O.startX,N,-O.x,O.scrollerW-O.wrapperW+O.x,O.options.bounce?O.wrapperW:0):K;m=P?O._momentum(P-O.startY,N,-O.y,(O.maxScrollY<0?O.scrollerH-O.wrapperH+O.y-O.minScrollY:0),O.options.bounce?O.wrapperH:0):m;S=O.x+K.dist;P=O.y+m.dist;if((O.x>0&&S>0)||(O.x<O.maxScrollX&&S<O.maxScrollX)){K={dist:0,time:0}}if((O.y>O.minScrollY&&P>O.minScrollY)||(O.y<O.maxScrollY&&P<O.maxScrollY)){m={dist:0,time:0}}}if(K.dist||m.dist){J=z.max(z.max(K.time,m.time),10);if(O.options.snap){U=S-O.absStartX;T=P-O.absStartY;if(z.abs(U)<O.options.snapThreshold&&z.abs(T)<O.options.snapThreshold){O.scrollTo(O.absStartX,O.absStartY,200)}else{M=O._snap(S,P);S=M.x;P=M.y;J=z.max(M.time,J)}}O.scrollTo(z.round(S),z.round(P),J);if(O.options.onTouchEnd){O.options.onTouchEnd.call(O,Q)}return}if(O.options.snap){U=S-O.absStartX;T=P-O.absStartY;if(z.abs(U)<O.options.snapThreshold&&z.abs(T)<O.options.snapThreshold){O.scrollTo(O.absStartX,O.absStartY,200)}else{M=O._snap(O.x,O.y);if(M.x!==O.x||M.y!==O.y){O.scrollTo(M.x,M.y,M.time)}}if(O.options.onTouchEnd){O.options.onTouchEnd.call(O,Q)}return}O._resetPos(200);if(O.options.onTouchEnd){O.options.onTouchEnd.call(O,Q)}},_resetPos:function(K){var m=this,L=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,J=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(L===m.x&&J===m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(D==="webkit"){m.hScrollbarWrapper.style[h]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(D==="webkit"){m.vScrollbarWrapper.style[h]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(L,J,K||0)},_wheel:function(N){var L=this,M,K,J,m,O;if("wheelDeltaX" in N){M=N.wheelDeltaX/12;K=N.wheelDeltaY/12}else{if("wheelDelta" in N){M=K=N.wheelDelta/12}else{if("detail" in N){M=K=-N.detail*3}else{return}}}if(L.options.wheelAction==="zoom"){O=L.scale*Math.pow(2,1/3*(K?K/Math.abs(K):0));if(O<L.options.zoomMin){O=L.options.zoomMin}if(O>L.options.zoomMax){O=L.options.zoomMax}if(O!==L.scale){if(!L.wheelZoomCount&&L.options.onZoomStart){L.options.onZoomStart.call(L,N)}L.wheelZoomCount++;L.zoom(N.pageX,N.pageY,O,400);setTimeout(function(){L.wheelZoomCount--;if(!L.wheelZoomCount&&L.options.onZoomEnd){L.options.onZoomEnd.call(L,N)}},400)}return}J=L.x+M;m=L.y+K;if(J>0){J=0}else{if(J<L.maxScrollX){J=L.maxScrollX}}if(m>L.minScrollY){m=L.minScrollY}else{if(m<L.maxScrollY){m=L.maxScrollY}}if(L.maxScrollY<0){L.scrollTo(J,m,0)}},_transitionEnd:function(J){var m=this;if(J.target!==m.scroller){return}m._unbind(a);m._startAni()},_startAni:function(){var O=this,J=O.x,m=O.y,M=Date.now(),N,L,K;if(O.animating){return}if(!O.steps.length){O._resetPos(400);return}N=O.steps.shift();if(N.x===J&&N.y===m){N.time=0}O.animating=true;O.moved=true;if(O.options.useTransition){O._transitionTime(N.time);O._pos(N.x,N.y);O.animating=false;if(N.time){O._bind(a)}else{O._resetPos(0)}return}K=function(){var P=Date.now(),R,Q;if(P>=M+N.time){O._pos(N.x,N.y);O.animating=false;if(O.options.onAnimationEnd){O.options.onAnimationEnd.call(O)}O._startAni();return}P=(P-M)/N.time-1;L=z.sqrt(1-P*P);R=(N.x-J)*L+J;Q=(N.y-m)*L+m;O._pos(R,Q);if(O.options.onAnimate){O.options.onAnimate.call(O)}if(O.animating){O.aniTime=v(K)}};K()},_transitionTime:function(m){m+="ms";this.scroller.style[o]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[o]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[o]=m}},_momentum:function(P,J,N,m,R){var O=0.0006,K=z.abs(P)/J,L=(K*K)/(2*O),Q=0,M=0;if(P>0&&L>N){M=R/(6/(L/K*O));N=N+M;K=K*N/L;L=N}else{if(P<0&&L>m){M=R/(6/(L/K*O));m=m+M;K=K*m/L;L=m}}L=L*(P<0?-1:1);Q=K/O;return{dist:L,time:z.round(Q)}},_offset:function(m){var K=-m.offsetLeft,J=-m.offsetTop;while(m=m.offsetParent){K-=m.offsetLeft;J-=m.offsetTop}if(m!==this.wrapper){K*=this.scale;J*=this.scale}return{left:K,top:J}},_snap:function(Q,P){var N=this,M,L,O,K,J,m;O=N.pagesX.length-1;for(M=0,L=N.pagesX.length;M<L;M++){if(Q>=N.pagesX[M]){O=M;break}}if(O===N.currPageX&&O>0&&N.dirX<0){O--}Q=N.pagesX[O];J=z.abs(Q-N.pagesX[N.currPageX]);J=J?z.abs(N.x-Q)/J*500:0;N.currPageX=O;O=N.pagesY.length-1;for(M=0;M<O;M++){if(P>=N.pagesY[M]){O=M;break}}if(O===N.currPageY&&O>0&&N.dirY<0){O--}P=N.pagesY[O];m=z.abs(P-N.pagesY[N.currPageY]);m=m?z.abs(N.y-P)/m*500:0;N.currPageY=O;K=z.round(z.max(J,m))||200;return{x:Q,y:P,time:K}},_bind:function(K,J,m){J=J||this.scroller;J[s](u+K,this,!!m)},_unbind:function(K,J,m){J=J||this.scroller;J[c](u+K,this,!!m)},destroy:function(){var m=this;m.scroller.style[p]="";m.scroller.style[B]="";m.scroller.style[o]="";m.scroller.style[r]="";m.wrapper.style.overflow="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(j,l);m._unbind(d);m._unbind(x,l);m._unbind(f,l);m._unbind(A,l);if(!m.options.hasTouch){m._unbind("DOMMouseScroll");m._unbind("mousewheel")}if(m.resizeTimer){clearTimeout(m.resizeTimer)}if(m.options.useTransition){m._unbind(a)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var L=this,N,K,m,J,O=0,M=0;if(L.scale<L.options.zoomMin){L.scale=L.options.zoomMin}L.wrapperW=L.wrapper.clientWidth||1;L.wrapperH=L.wrapper.clientHeight||1;L.minScrollY=-L.options.topOffset||0;L.scrollerW=z.round(L.scroller.offsetWidth*L.scale);L.scrollerH=z.round((L.scroller.offsetHeight+L.minScrollY)*L.scale);L.maxScrollX=L.wrapperW-L.scrollerW;L.maxScrollY=L.wrapperH-L.scrollerH+L.minScrollY;L.dirX=0;L.dirY=0;if(L.options.onRefresh){L.options.onRefresh.call(L)}L.hScroll=L.options.hScroll&&L.maxScrollX<0;L.vScroll=L.options.vScroll&&(!L.options.bounceLock&&!L.hScroll||L.scrollerH>L.wrapperH);L.hScrollbar=L.hScroll&&L.options.hScrollbar;L.vScrollbar=L.vScroll&&L.options.vScrollbar&&L.scrollerH>L.wrapperH;N=L._offset(L.wrapper);L.wrapperOffsetLeft=-N.left;L.wrapperOffsetTop=-N.top;if(typeof L.options.snap==="string"){L.pagesX=[];L.pagesY=[];J=L.scroller.querySelectorAll(L.options.snap);for(K=0,m=J.length;K<m;K++){O=L._offset(J[K]);O.left+=L.wrapperOffsetLeft;O.top+=L.wrapperOffsetTop;L.pagesX[K]=O.left<L.maxScrollX?L.maxScrollX:O.left*L.scale;L.pagesY[K]=O.top<L.maxScrollY?L.maxScrollY:O.top*L.scale}}else{if(L.options.snap){L.pagesX=[];while(O>=L.maxScrollX){L.pagesX[M]=O;O=O-L.wrapperW;M++}if(L.maxScrollX%L.wrapperW){L.pagesX[L.pagesX.length]=L.maxScrollX-L.pagesX[L.pagesX.length-1]+L.pagesX[L.pagesX.length-1]}O=0;M=0;L.pagesY=[];while(O>=L.maxScrollY){L.pagesY[M]=O;O=O-L.wrapperH;M++}if(L.maxScrollY%L.wrapperH){L.pagesY[L.pagesY.length]=L.maxScrollY-L.pagesY[L.pagesY.length-1]+L.pagesY[L.pagesY.length-1]}}}L._scrollbar("h");L._scrollbar("v");if(!L.zoomed){L.scroller.style[o]="0";L._resetPos(400)}},scrollTo:function(m,P,O,N){var M=this,L=m,K,J;M.stop();if(!L.length){L=[{x:m,y:P,time:O,relative:N}]}for(K=0,J=L.length;K<J;K++){if(L[K].relative){L[K].x=M.x-L[K].x;L[K].y=M.y-L[K].y}M.steps.push({x:L[K].x,y:L[K].y,time:L[K].time||0})}M._startAni()},scrollToElement:function(m,K){var J=this,L;m=m.nodeType?m:J.scroller.querySelector(m);if(!m){return}L=J._offset(m);L.left+=J.wrapperOffsetLeft;L.top+=J.wrapperOffsetTop;L.left=L.left>0?0:L.left<J.maxScrollX?J.maxScrollX:L.left;L.top=L.top>J.minScrollY?J.minScrollY:L.top<J.maxScrollY?J.maxScrollY:L.top;K=K===undefined?z.max(z.abs(L.left)*2,z.abs(L.top)*2):K;J.scrollTo(L.left,L.top,K)},scrollToPage:function(K,J,M){var L=this,m,N;M=M===undefined?400:M;if(L.options.onScrollStart){L.options.onScrollStart.call(L)}if(L.options.snap){K=K==="next"?L.currPageX+1:K==="prev"?L.currPageX-1:K;J=J==="next"?L.currPageY+1:J==="prev"?L.currPageY-1:J;K=K<0?0:K>L.pagesX.length-1?L.pagesX.length-1:K;J=J<0?0:J>L.pagesY.length-1?L.pagesY.length-1:J;L.currPageX=K;L.currPageY=J;m=L.pagesX[K];N=L.pagesY[J]}else{m=-L.wrapperW*K;N=-L.wrapperH*J;if(m<L.maxScrollX){m=L.maxScrollX}if(N<L.maxScrollY){N=L.maxScrollY}}L.scrollTo(m,N,M)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(x,l);this._unbind(f,l);this._unbind(A,l)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(a)}else{t(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,N,M,L){var J=this,K=M/J.scale;if(!J.options.useTransform){return}J.zoomed=true;L=L===undefined?200:L;m=m-J.wrapperOffsetLeft-J.x;N=N-J.wrapperOffsetTop-J.y;J.x=m-m*K+J.x;J.y=N-N*K+J.y;J.scale=M;J.refresh();J.x=J.x>0?0:J.x<J.maxScrollX?J.maxScrollX:J.x;J.y=J.y>J.minScrollY?J.minScrollY:J.y<J.maxScrollY?J.maxScrollY:J.y;J.scroller.style[o]=L+"ms";J.scroller.style[p]="translate("+J.x+"px,"+J.y+"px) scale("+M+")"+G;J.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};q=null;if(typeof exports!=="undefined"){exports.IScroll=e}else{l.IScroll=e}})(window,document);