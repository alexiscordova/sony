---
desc: 'Here are some modules with unique data:'
layout1: [ "plate", "normal" , "medium"  , "normal" , "normal" , "normal"]
layout2: [ "plate", "medium" , "normal" , "normal" , "normal" , "blank-normal"]
layout3: [ "plate", "medium" , "normal"  , "blank-normal", "normal"]
layout4: ["suggested" , "suggested"]
layout5: ["normal" , "normal"  , "normal" , "normal" , "normal" , "normal" , "normal" , "normal" , "normal" , "normal"]
---
if data.config.tabbedLayout
  .container
    .grid
      .span12
        .rp-tabs
          for tab in data.config.tabbedLayout
            a.rp-tab(href='#' , class='lt4 no-hover-transition' , data-rp-panel-id=tab.panelId)
              strong= tab.title

  .container(class='full-bleed-no-max rp-container-tabbed')
    for tab in data.config.tabbedLayout
      if data.config.mode == 'full'
        - clss = data.config.mode
        section.related-products( class=clss , data-mode=data.config.mode , data-variation=data.config.variation ,  data-rp-panel-id=tab.panelId )
          .rp-overflow
            .rp-container
              j = 0
              for slide in data.slideContent
                mdata = locals.data(slide.data)
                .rp-slide(data-variation=mdata.config.variation , class=mdata.config.variation)
                  .shuffle-container.slimgrid5
                    i = 0
                    for module in mdata.submodules
                      d = locals.data(module.data)
                      if d.type == 'product' && d.featured
                        - d.layout = document[mdata.config.layout][i++]
                        - d.view = d.layout == 'blank-normal' ? 'blank' : 'basic'
                        e = { 'locals' : locals , 'data' : d }
                        !{locals.partial('modules/'+module.type , e )}


else if data.config.standalone != true
  if data.config.mode == 'full'
    - clss = data.config.mode
    .container
      .grid
        h2(class='l1 rp-title')= data.config.headerTitle
    section.related-products( class=clss , data-mode=data.config.mode , data-variation=data.config.variation )
      .rp-overflow
        .rp-container
          j = 0
          for slide in data.slideContent
            mdata = locals.data(slide.data)
            .rp-slide(data-variation=mdata.config.variation , class=mdata.config.variation)
              .shuffle-container.slimgrid5
                i = 0
                for module in mdata.submodules
                  d = locals.data(module.data)
                  if d.type == 'product' && d.featured
                    - d.layout = document[mdata.config.layout][i++]
                    - d.view = d.layout == 'blank-normal' ? 'blank' : 'basic'
                    e = { 'locals' : locals , 'data' : d }
                    !{locals.partial('modules/'+module.type , e )}

else if data.config.standalone == true
  if data.config.mode == 'full'
    - clss = data.config.mode
    .container
      .grid
        h2(class='l1 rp-title')= data.config.headerTitle
    section.related-products(data-mode=data.config.mode , data-variation=data.config.variation , class=clss)
      .rp-overflow
        .rp-container
          .rp-slide(class=data.config.variation , data-variation=data.config.variation)
            .shuffle-container.slimgrid5
              i = 0
              for module in data.submodules
                d = locals.data(module.data)
                if d.type == 'product' && d.featured
                  - d.layout = document[data.config.layout][i++]
                  - d.view = d.layout == 'blank-normal' ? 'blank' : 'basic'
                  e = { 'locals' : locals , 'data' : d }
                  !{locals.partial('modules/'+module.type , e )}

  else if data.config.mode == 'suggested'
    - clss = data.config.mode
    .container
      .grid
        h2(class='l1 rp-title')= data.config.headerTitle
    .container
      .grid
        section.related-products(data-mode=data.config.mode , data-variation=data.config.variation , class=clss)
          i = 0
          for module in data.submodules
            d = locals.data(module.data)
            - d.layout = document[data.config.layout][i++]
            - d.view = 'suggested'
            e = { 'locals' : locals , 'data' : d }
            !{locals.partial('modules/'+module.type , e )}

  else if data.config.mode == 'strip'
    - clss = data.config.mode + ' ' + 'span12'
    .container
      .grid
        h2(class='l1 rp-title')= data.config.headerTitle
    .container
      .grid
        section.related-products(class=clss , data-mode=data.config.mode , data-variation=data.config.variation )
          .rp-overflow
            .rp-container
              i = 0
              for module in data.submodules
                d = locals.data(module.data)
                if d.type == 'product' && d.featured
                  - d.layout = document[data.config.layout][i++]
                  - d.view = 'basic'
                  e = { 'locals' : locals , 'data' : d }
                  !{locals.partial('modules/'+module.type , e )}
























