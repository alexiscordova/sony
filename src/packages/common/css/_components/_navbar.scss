//
// Navbars (Redux) -- THIS IS NOW THE GLOBAL NAV
// --------------------------------------------------

// COMMON STYLES
// -------------

// Base class and wrapper
// This has been modified just for Sony Global Nav
// If you need to use the regular Bootstrap nav module, use simple-nav.

// .nav-wrapper extends the full width of the browser,
// even when the navbar is at a set width for a particular breakpoint.
//
// All widths and sizes that change at breakpoints are in _responsive-navbar.scss
//  -- even their default values, so it's all kept together.

.nav-wrapper { // encompasses the entire nav, including the navbar and navtrays, to 100% width of the page.
  background:$navbarBackground;

  // Brand: website name
  // -------------------------
  .sprite-32a-sony-logo { // desktop version (inside navbar)
    float: left;
    display: block;
    margin: 16px 0 0;
    overflow: hidden;
    -webkit-transform: translate3d(0,0,0); // flicker fix on iPad
  }
}

.navbar {
  overflow: visible;
  color: $navbarText;
  position: relative;

  &.container {
    // max-width: $navMaxWidth;
  }

  // Prevent floats from breaking the navbar
  @include clearfix();

  // Override the default collapsed state
  &.nav-collapse.collapse {
    height: auto;
  }

  .btn-mobile-nav,
  .btn-mobile-cart { // only visible on mobile
    display: none;
  }

  .btn-mobile-cart {
    font-family: $sansFontFamilyBold;
    height: 25px;
    padding: 4px;
    margin: 19px 0px 0 6px;
    line-height: 1.5;
  }

  // Buttons in navbar
  // -------------------------
  .btn,
  .btn-group {
    @include navbarVerticalAlign(30px); // Vertically center in navbar
  }
  .btn-group .btn,
  .input-prepend .btn,
  .input-append .btn {
    margin-top: 0; // then undo the margin here so we don't accidentally double it
  }

  .fonticon-10-arrowhead-down,
  .fonticon-10-arrowhead-up {
    color:$gray40;
  }
  .nav-li-link {
    -webkit-backface-visibility: hidden; // fixes phantom blue select box
    &:hover, &:active, &:focus, &.active {
      .fonticon-10-arrowhead-down,
      .fonticon-10-arrowhead-up {
        color:$white;
      }
    }
  }

  .nav-li-favorites .nav-li-link:hover i {
    color:$buttonOrangeHover;
    .lt-ie9:not(.lt-ie8) & {
      color:$white; // ie8 hover pseudoelement fix
    }
  }
  .nav-li-universal .nav-li-linkBtn {
    .fonticon-10-arrowhead-up {
      margin-left: 4px;
      position: relative;
      top:-1px;
      -webkit-transform: translate3d(0,0,0); // make the icon show up on Android
    }
  }


  &.navbar-form {
    margin-bottom: 0; // remove default bottom margin
    @include clearfix();
    input,
    select,
    .radio,
    .checkbox {
      @include navbarVerticalAlign(30px); // Vertically center in navbar
    }
    input,
    select,
    .btn {
      display: inline-block;
      margin-bottom: 0;
    }
    input[type="image"],
    input[type="checkbox"],
    input[type="radio"] {
      margin-top: 3px;
    }
    .input-append,
    .input-prepend {
      margin-top: 6px;
      white-space: nowrap; // preven two  items from separating within a .navbar-form that has .pull-left
      input {
        margin-top: 0; // remove the margin on top since it's on the parent
      }
    }
  }

  &.navbar-search {
    position: relative;
    float: left;
    @include navbarVerticalAlign(30px); // Vertically center in navbar
    margin-bottom: 0;
    .search-query {
      margin-bottom: 0;
      padding: 4px 14px;
      @include border-radius(15px); // redeclare because of specificity of the type attribute

      color: $white;
      background-color: $navbarInverseSearchBackground;
      border-color: $navbarInverseSearchBorder;
      @include box-shadow(inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15));
      @include transition(none);
      @include placeholder($navbarInverseSearchPlaceholderColor);

      // Focus states (we use .focused since IE7-8 and down doesn't support :focus)
      &:focus,
      &.focused {
        padding: 5px 15px;
        color: $grayDark;
        text-shadow: 0 1px 0 $white;
        background-color: $navbarInverseSearchBackgroundFocus;
        border: 0;
        @include box-shadow(0 0 3px rgba(0,0,0,.15));
        outline: 0;
      }
    }
  } // end .navbar-search

  &.navbar-static-top {
    position: static;
    width: 100%;
  }
} // end .navbar


// IE8 icon hover color fix, because sometimes it changes to the hover color, and not switch back after.
// This forces it to always have the non-hover color.
.lt-ie9:not(.lt-ie8) .nav-li-link {
  &:hover, &:active, &:focus, &.active {
    .fonticon-10-arrowhead-down,
    .fonticon-10-arrowhead-up {
      color:$gray40;
    }
  }
}





.navbar-mobile.container {
  width: 100%;
}











// -----------------------------------------
// RESPONSIVE DEFAULTS: 980px - 1199px;
// -----------------------------------------
//  .d8888b.   .d8888b.   .d8888b.                         d888    d888   .d8888b.   .d8888b.
// d88P  Y88b d88P  Y88b d88P  Y88b                       d8888   d8888  d88P  Y88b d88P  Y88b
// 888    888 Y88b. d88P 888    888                         888     888  888    888 888    888
// Y88b. d888  "Y88888"  888    888 88888b.  888  888       888     888  Y88b. d888 Y88b. d888 88888b.  888  888
//  "Y888P888 .d8P""Y8b. 888    888 888 "88b `Y8bd8P'       888     888   "Y888P888  "Y888P888 888 "88b `Y8bd8P'
//        888 888    888 888    888 888  888   X88K  888888 888     888         888        888 888  888   X88K
// Y88b  d88P Y88b  d88P Y88b  d88P 888 d88P .d8""8b.       888     888  Y88b  d88P Y88b  d88P 888 d88P .d8""8b.
//  "Y8888P"   "Y8888P"   "Y8888P"  88888P"  888  888     8888888 8888888 "Y8888P"   "Y8888P"  88888P"  888  888
//                                  888                                                        888
//                                  888                                                        888
//                                  888
// -----------------------------------------

.navbar-outer {
  background: $navbarBackground;
  position: relative;
  z-index: 222;
  -webkit-transform: translate3d(0,0,0); // needed for Android, otherwise the navtrays, which have translate3d, will half-appear in front of the navbar.
}
.nav-wrapper{
  z-index: $zindexGlobalNav;
  height: $navbarHeight;
}
.navbar {
  height: $navbarHeight;
}
.navtray-w {
  top: -475px;
}
.navmenu-w {
  top: $navbarHeight;
}
.nav {
  .btn-mobile-cart {
    display: none;
  }
}

.lt-ie10 .nav-outer-container {
  z-index: 999;
  position: relative;
}

.nav-primary {
  margin-left: 2%;

  .nav-li {
    margin: 0 0 0 px-em(10);

    &.nav-li-electronics {
      margin-left: px-em(13);
    }
  }
  .nav-li-link {
    line-height:$navbarLineHeight;
    padding: 0 5px 4px;
    &:hover, &:active, &:focus, &.active {
      color: $navbarLinkColor;
    }
    // freakin' Android, trying to figure out why these links don't trigger a touchstart SOMETIMES.
    -webkit-transform:translate3d(0,0,0);
    -webkit-backface-visibility:hidden;
    -webkit-perspective: 1000;
    -webkit-transform: translateZ(0);
    z-index:5000;
    .lbl {
      padding: 0 4px;
    }
  }
}
.nav-li-store,
.nav-li-support {
  .nav-li-link {
    font-size:$font_15_16;
  }
}

.nav-li-link.nav-dropdown-toggle:not(.nav-dropdown-toggle-btn){
  padding-right: 0;
  margin-right: 0;
  font-size: px-em(15);
  color:$navbarLinkColor;

  .fonticon-10-arrowhead-down {
    font-size: px-em(16,15);
    position: relative;
    top:-2px;
    margin-bottom: -5px;
    margin-left: 4px;
    margin-right:-2px;
    overflow: hidden;

    -webkit-font-smoothing:antialiased;
    -webkit-transform: translate3d(0,0,0); // make the icon show up on Android

    .lt-ie9 & {
      font-size:16px; // some kind of pseudo-element bug in lt-ie8 that shrinks the icon when you hover. Since it's decoration only, we don't have to worry about client zooming.
      left:-1px; // pseudo-element alignment adjustment
    }
    .lt-ie8 & {
      left:2px; // pseudo-element alignment adjustment
    }

  }
}


.nav-primary .nav-li-link,
.nav-li-link.nav-dropdown-toggle:not(.nav-dropdown-toggle-btn){

  &:hover, &:active, &:focus, &.active {
    color:$navbarLinkColorHover;
  }
}

.nav-li-linkBtn {
  @include fontMedium;
  font-size: px-em(11);

  .fonticon-10-arrowhead-up,
  .fonticon-10-search {
    font-size: px-em(16,11);
  }

  height: 36px;
  margin: 14px 0 14px 2px;
  padding: 10px 9px 0px 14px;

  line-height: 1;
  @include border-radius(1px);

  background-color: $navbarBackground;
  border-color: $navbarBackground;

  &:hover,
  &:active,
  &:focus,
  &.active {
    background-color: $navbarLinkBtnBgHover;
    border-color: $navbarLinkBtnBgHover;
    color:$navbarLinkColorHover;
  }

  .nav-li-count {
    display: inline-block;
    @include fonticon-text-px-to-em(12px);
    @include fontMedium;
    margin-top: 2px;
    margin-left: 3px;
  }

  [class^="fonticon-10-"],
  [class*=" fonticon-10-"]{
    margin: 0;
    -webkit-font-smoothing: antialiased;
    // overflow: hidden;
  }

  .lt-ie8 & {
    height:26px;
  }
}

.nav-primary {
  .nav-li-store .fonticon-10-cart,
  .nav-li-support .fonticon-10-support,
  .nav-li-universal-mobile {
    display: none;
  }
}

.nav-li-account {
  .nav-li-link.nav-dropdown-toggle {
    font-size: px-em(11px);
    padding-right: 6px;
    padding-top: 10px;
    -webkit-backface-visibility: hidden; // fix rogue focus rectangle

    .fonticon-10-arrowhead-down {
      margin-left: 3px;
      position: relative;
      top:-2px;
      font-size: px-em(16,10);
    }
  }
}
.nav-li-favorites .nav-li-link {
  padding: 8px 7px 0 8px;
  font-size: 1em;
}
.nav-li-cart .nav-li-link {
  padding: 9px 9px 0 8px;
  font-size: 1em;
  -webkit-transform: translate3d(0,0,0); // make the icon show up on Android
  i {
    position: relative;
    top:-1px;
  }
}
.nav-li-search .nav-li-linkBtn {
  background-color: $navbarTertiaryColor;
  border-color: $navbarTertiaryColor;
  @include border-radius(1px);
  padding-right: 12px;
  padding-left: 15px;
  margin-bottom: 0;
  -webkit-backface-visibility: hidden;

  .fonticon-10-search {
    padding-left: 6px;
    @include backface-visibility();
  }

  &:hover,
  &:active,
  &.active {
    background-color: $linkColor;
    border-color: $linkColor;
    color:$navbarLinkColor;
  }
}
.nav-li-universal .nav-li-linkBtn {
  background:$navbarLinkBtnBgHover;
  border-color:$navbarLinkBtnBgHover;

  &:hover,
  &:active,
  &:focus,
  &.active {
    background:$navbarTertiaryColor;
    border-color:$navbarTertiaryColor;
  }
}

.navtray-w-tall:after { // background gray under the right side -- just needs to cover up the right margin
  //left:$navTrayDividerPosition;
}

.navtray {
  width: 100%;

  .nav-view-all-tl {
    display: block;
    width: 200px;
    margin: 20px auto 0;
    text-align: center;
  }
} // end .navtray






.navtray-section-main { // section left
  padding-top: 50px;
  width: $navTrayDividerPosition;

  .navtray-w-short &{
    min-height: 260px;
  }

  .navtray-list-main {
    margin: 0 4.0% 1.0% 4.0%;
    overflow: hidden;

    .navtray-li {
      width: 24.8%;
    }

    .navtray-li-link {
      margin: 2% 3.3% 0 0;
      padding: 20px 0 0 0;
      -webkit-backface-visibility: hidden; // images jump on hover otherwise
      height: 170px; /* only for non-responsive browsers - is overridden for responsive, which is good, because it's too high */
      .navtray-w-short & {
        padding-top: 25px;
      }

      &:hover,
      &:active,
      &:focus {
        background:$grayLightFieldSmall;
      }
      .nav-img-w img {
        width: 83%;
      }
    }

    &:after { // HR
      width: 98.4%;
      height: 1px;
    }
  }
} // end .navtray-section-main


.navtray-section-featured { // section right
  padding-top: 47px;
  &.navtray-section-featured-short {
    padding-top: 0;
  }
  width: (100-$navTrayDividerPosition);
  padding-left: 3.6%;
  .navtray-secondary-promo {
    max-width: 218px;
    margin-top: 32px;
    margin-right: 11%;

    img {
      padding-bottom: px-em(9);
    }
    .p2,
    .p3 {
      // padding: 3px 15px 0 0;
    }
    .p2 {
      margin-bottom: px-em(5);
    }
    .p4 {
      display: inline-block;
      line-height: 1.3;
      padding-right: px-em(27);
    }
  }
}



.navmenu-w {
  z-index: 190;
  position: absolute;
  overflow: visible;
  background: $navMenuBackground;
  @include box-shadow(0px 3px 3px 0px rgba(0, 0, 0, .3));
  @include border-bottom-radius(2px);

  .fonticon-10-arrowhead-up.nav-indicator {
  }
}


.navmenu-w-search {
  @include hideshow-navmenu-hide(left);
  .lt-ie10 &{
    height: 100%;
    overflow: visible;
  }
  .reveal-transition-container {
    overflow: hidden;
  }
  .fonticon-10-arrowhead-up.nav-indicator {
    right: 17px;
  }
  .btn-clear-search-input {
    right: 30px;
    top: 22px;
  }
  .fonticon-10-search {
    top: 25px;
    left: 46px;
  }
}

.navmenu-w-account {
  @include hideshow-navmenu-hide(left);

  .fonticon-10-arrowhead-up.nav-indicator {
    left: 25px;
  }

  .reveal-transition-container {
    width: 215px;
    padding: 11px 0 9px;
    overflow: hidden;
    background:$white;

    .navmenu-list-prefixed {
      // border-bottom: solid 1px $grayLightish;
      // padding-bottom: 6px;
      display: none;
    }
  }
}


.nav-wrapper.nav-wrapper-minimal .btn-mobile-nav {
  // position: relative;
  // left:-999px; // still want to use its height for the nav..?
}
