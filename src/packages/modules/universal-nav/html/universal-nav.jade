include ../../../common/html/jade-helpers.jade

//- In the JSON, the "Featured" label_tag text can be changed, or the tag can be disabled by setting its "label" value to "false".

div#universal-nav.u-nav-wrapper(role='navigation')
  div.u-nav.container
    div.u-nav-head.grid
      a#u-nav-close-btn.u-nav-close-btn(href="#", style="background-image:url(" + data.close_btn.img_src + ")")
        | !{data.close_btn.label}
      h5.l1
        | !{data.title}
      a#u-nav-all-sites-link.u-nav-all-sites-link(href=data.all_sites_link.link)
        | !{data.all_sites_link.label}

    //- the row of image-heavy links
    if data.primary_columns[0].double_wide === "true"
      - u_nav_primary_classes = "u-nav-primary u-nav-primary-3up grid"
    else if data.primary_columns[0].double_tall === "true"
      - u_nav_primary_classes = "u-nav-primary u-nav-primary-5up grid"
    else 
      - u_nav_primary_classes = "u-nav-primary u-nav-primary-6up grid"

    div(class=u_nav_primary_classes)

      //- each column
      - col_count = 1
      - each col, i in data.primary_columns
        - feat_class1 = "u-nav-primary-feat u-nav-primary-col" + col_count
        if col.double_wide === "true"
          - feat_class1 += " span8"
          - col_count += 2
        else
          - feat_class1 += " span4"
          - col_count ++

        //- For each feature per column
        - each feat, j in col.features
          - feat_class2 = feat_class1
          if col.double_tall === "true" && j === 0
            - feat_class2 += " u-nav-primary-2high"
          else 
            if j === 0
              - feat_class2 += " u-nav-primary-row1"
            else 
              - feat_class2 += " u-nav-primary-row2"

          div(class=feat_class2)
            a.u-nav-primary-link.l2(href=feat.link)
              if col.double_tall === "true" || col.double_wide === "true"
                if data.label_tag.label != "false"
                  span.label.label-success !{data.label_tag.label}
              span.u-nav-primary-img-wrap 
                img.u-nav-primary-img(src="", data-src=feat.img.src, title=feat.alt)
              span.u-nav-primary-caption !{feat.caption}

    //- the row of text links
    ul.u-nav-secondary.grid
      //- each column
      - feat_count = 1
      - each feat, i in data.secondary_columns
        li.u-nav-secondary-li.span3
          a.p3.u-nav-secondary-link(href=feat.link) !{feat.caption}
          span.p4.u-nav-secondary-desc !{feat.desctiption}



