include ../../../common/html/jade-helpers.jade
+includeCSS('ux-marketing-convergence-e14')
+includeJavascriptModule('ux-marketing-convergence-e14')

- uxmcModuleClasses = ['container', 'uxmc']
- uxmcContainerClasses = ['grid', 'uxmc-container', 'mode-'+data.mode.toLowerCase()]

if(!data.header)
  //- needed to margin changes when no header
  - uxmcModuleClasses.push("no-header")

+mainElement(uxmcModuleClasses)
  if(data.header)
    div.grid
      p.l1 #{data.header}

  div(class=uxmcContainerClasses)
    div.btn-reload-container
      span.fonticon-30-plus.btn-reload

    div.base-product
      div.uxmc-image-wrapper.iq-img(data-src-desktop=data.baseProduct.img.srcDesktop, data-src-tablet=data.baseProduct.img.srcTablet, data-src-phone=data.baseProduct.img.srcPhone, data-src-desktop-highres=data.baseProduct.img.srcDesktopHighRes, data-src-tablet-highres=data.baseProduct.img.srcTabletHighRes, data-src-phone-highres=data.baseProduct.img.srcPhoneHighRes)
        //- span prevents div glitch on transition
        span

    div.uxmc-carousel-wrapper
      div.uxmc-carousel
        for product in data.partnerProducts
          - slideClasses = ["sony-carousel-slide",['theme-'+product.theme.toLowerCase()]]
          - slideChildClasses = ["sony-carousel-slide-children"]
          div(class= slideClasses)
            div(class= slideChildClasses)

              if(product.topLine || product.link)
                div.uxmc-overlay
                  if(product.topLine)
                    p.l-o-d #{product.topLine}
                  if(product.link.href)
                    +link(product.link , [ "l-o-d","uxmc-link"], "fonticon-10-chevron--after" )

              div.uxmc-image-wrapper.iq-img(data-src-desktop=product.img.srcDesktop, data-src-tablet=product.img.srcTablet, data-src-phone=product.img.srcPhone, data-src-desktop-highres=product.img.srcDesktopHighRes, data-src-tablet-highres=product.img.srcTabletHighRes, data-src-phone-highres=product.img.srcPhoneHighRes)
                //- span prevents div glitch on transition
                span

    div.progress-indicators
      div
        - for (i = 1; i <= data.partnerProducts.length; i++)
          div.uxmc-dial-wrapper
            span.uxmc-dial-label
            input.uxmc-dial(type='text', value='0', data-angleOffset=1)