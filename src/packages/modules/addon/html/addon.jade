include ../../../common/html/jade-helpers.jade

+includeCSS('addon')

//- Views:
  //- 1. Video
  //- 2. Audio
  //- 3. Quote
  //- 4. Tweet
  //- 5. Logo
  //- 6. Story
  //- 7. Slideshow


//- Used for everything except quotes and tweets
mixin mediaObject( data )
  iconClass = false
  logo = false

  if data.type == "video"
    iconClass = "fonticon-15-circle-play"

  else if data.type == "audio"
    iconClass = "fonticon-10-speaker"

  else if data.type == "slideshow"
    iconClass = "fonticon-15-popup"

  else if data.type == "logo"
    logo = data.logo

  .media
    +link( data.link, [ "addon-media", "pull-left" ], undefined, undefined, true )
      //- .table-center-wrap.v-wrap
      //-   .table-center
      +iQBackgroundImage( data.img, "media-object" )
      if iconClass
        i(class=iconClass + "--after")

    .media-body
      p.t7 !{ data.copy }
      if logo
        +iQImage( logo )
      if data.link
        +link( data.link, [ "lt3" ] )


//- See here for details: http://alistapart.com/blog/post/more-thoughts-about-blockquotes-than-are-strictly-required
mixin quote( quote )
  href = quote.href ? quote.href : false
  target = quote.target ? quote.target : false
  medium = quote.medium
  iconClass = ''
  iconClasses = []

  //- The facebook icon has two different sizes
  case medium
    when 'facebook'
      iconClass = 'fonticon-15-facebook-sm'
    default
      iconClass = 'fonticon-15-' + medium

  - iconClasses.push( iconClass, medium + '-color', 'ghost-center' )

  .quote.ghost-center-wrap
    figure.ghost-center
      blockquote.bq6-bold(cite=href)
        p !{ quote.text }
      figcaption
        span.social-icon.ghost-center-wrap
          i(class=iconClasses)
        if href
          a(class="author p4", href=href, target=target) !{ quote.screenname }
        else
          span(class="author p4") !{ quote.screenname }


//- Testing purposes only
data = data.addon


type = data.type
addonClasses = [ "addon", "addon-" + type ]
if data.variation && data.variation.background
  - addonClasses.push( data.variation.background )

div(class=addonClasses)
  if type == "video" || type == "audio" || type == "slideshow" || type == "story" || type == "logo"
    +mediaObject( data )
  else if type == "quote" || type == "tweet"
    +quote( data )





