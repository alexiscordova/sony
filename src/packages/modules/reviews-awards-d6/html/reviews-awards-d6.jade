
.raa-module
  .container.raa-header
    .grid
      h2.l1 #{data.config.title}

  .container.raa-content(class=(data.userReviews.count <= 0) ? "no-user-reviews" : "has-user-reviews")(class=(data.expertReviews) ? "has-expert-reviews" : "no-expert-reviews")
    .grid

      userReviewColumns = 8;
      if ((!data.expertReviews && !data.awards) || !data.userReviews || data.userReviews.count <= 0)
        userReviewTakeover = true
        userReviewColumns = 12;

      .raa-user-reviews(class='span'+ userReviewColumns)
        div
          h3.l3 Users Say
          div.user-ratings

            if data.userReviews && data.userReviews.count > 0
              div.raa-overall
                div.raa-stars
                  - for ( i = 1; i <= 5; i++ ) {
                    - starClass = "star"+i
                    if i < data.userReviews.average
                      - starClass += " on"
                    i.fonticon-10-star.star(class=starClass)
                  - }
                p
                  span.p2 #{data.userReviews.average}
                  span.p3  based on
                    a(href=data.userReviews.reviewPageLink)  #{data.userReviews.count} reviews
              div.raa-breakdown
                for item in data.userReviews.criteria
                  dl
                    dt.l3 #{item.name}
                    div.raa-rating-bar
                      div.raa-rating-bar-score(class = "score-" + Math.round(item.score))
                    dd #{Math.round(item.score)}

            else
              div.raa-overall
                div.raa-stars
                  - for ( i = 1; i <= 5; i++ ) {
                    i.fonticon-10-star.star(class="star"+i)
                  - }
                p Currently there are no reviews. Would you like to be the first?

            div.cta
              a.btn(href="#") Add your own review

          if data.userSocialMentions
            div.raa-social-mentions
              for item in data.userSocialMentions
                div
                  aside
                    blockquote.bq4
                      p #{item.message}
                    div.p4.lt
                      a(href=item.profileLink)
                        img(src=item.profileImage)
                        | #{item.name}

      if !userReviewTakeover
        .span4
          if data.expertReviews
            .l3 Experts Say
            div.raa-expert-reviews
              div
                for item in data.expertReviews
                  div.raa-expert-review
                    a(href=item.link)
                      img(src=item.logoImage, alt=item.reviewer)
                    blockquote.bq4
                      p #{item.blurb}
                    div.p4.lt
                      a(href=item.link) Read Review

          if data.awards
            .l3 Awards
            ul.raa-awards
              for item in data.awards
                li
                  a(href=item.link)
                    img(src=item.badgeImage)
                  p
                    span.award-org #{item.awardedBy} #{''}
                    span.award-name #{item.title} #{''}
                    span.award-year #{" "+item.year} #{''}

    if userReviewTakeover
      .grid
        .span12
          if data.awards
            .l3 Awards
            ul.raa-awards
              for item in data.awards
                li
                  a(href=item.link)
                    img(src=item.badgeImage)
                  p
                    span.award-org #{item.awardedBy} #{''}
                    span.award-name #{item.title} #{''}
                    span.award-year #{" "+item.year} #{''}
