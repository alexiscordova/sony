include ../../../common/html/jade-helpers.jade
+includeCSS('search-results')
+includeCSS('recently-viewed')
+includeJavascriptModule('recently-viewed')


.featured-result
  h3.p3.results
    span.bold-dark #{data.results.count}
    |  Results
  form.visible-phone.select-narrow
    select
      option= data.narrowResultsPlaceholderText

  - data.view = "search-results"
  e = { "locals" : locals, "data" : data }
  !{locals.partial( 'packages/modules/product/html/product.jade', e )}

  .accessories-hd
    h4.l3= data.results.product.popularAccessoriesTitle
    .rv-module
      .container.m-container
        .sony-carousel-wrapper
          .sony-carousel

            slides = [ [], [], [], [], [], [] ]
            each accessory, i in data.results.product.popularAccessories
              index = Math.floor( i / 6 )
              - slides[ index ].push( accessory )

            each slide in slides
              if slide.length > 0
                .sony-carousel-slide
                  .container
                    .slimgrid
                      each accessory in slide
                        d = accessory
                        - d.view = "simple"
                        e = { "locals" : locals, "data" : d }
                        !{locals.partial( accessory.type, e )}

ul.results-list
  each item in data.results.items
    li
      a(href="#")
        .media
          .img
            +iQImage(item.image)
          .bd
            h4.lt3
              a(href= item.url)= item.headline

            if item.question
              h5.lt4.italic-hd
                a(href= item.question.url)= item.question.text

            p.p4= item.body

            if item.related
              ul.h-list.h-list-md
                each link in item.related
                  li.lt4
                    a(href= link.url)= link.text
