include ../../../common/html/jade-helpers.jade
+includeCSS('product-summary-d1-d2')
+includeJavascriptModule('product-summary-d1-d2')

+mainElement( ["ps-module"] )

  //- Here we're using a submodule because it has the mixins defined already in the file
  module = data.submodules[0]
  productData = locals.data(module.data)
  buyLink = data.buyLink
  - buyLink.href = productData.storeLink

  //- Set the view
  - productData.view = 'summary'

  //- Pass data from the product summary json file to the product json file
  - productData.collectionLink = data.titleLink
  - productData.buyLink = buyLink
  - productData.shortLink = data.shortLink
  - productData.socialButtons = data.socialButtons

  //- Text that could need to be translated
  - productData.favoriteText = data.favoriteText
  - productData.shareText = data.shareText
  - productData.startingAtText = data.startingAtText
  - productData.msrp = data.msrp
  - productData.priceUnit = data.priceUnit

  e = { "locals" : locals, "data" : productData }
  !{locals.partial( module.type, e )}

  .container
    .grid.no-grid-at-767
      ul.jump-links.inline
        each link, i in data.internalLinks
          - clss = i ? '' : 'active'
          li(class=clss)
            a.lt3.no-hover-transition(href=link.href)= link.text


  section.sticky-nav.ps-sticky-nav
    .container.m-full-bleed
      .grid.m-grid-at-767
        .span7.m-span4
          .pull-left.product-img.space-right
            +iQImage( productData.imgSmall )
          .pull-left
            h2.t6.sticky-nav-title= productData.title
            ul.jump-links.inline.nav
              each link, i in data.internalLinks
                - clss = i ? '' : 'active'
                li(class=clss)
                  a.lt3.no-hover-transition(href=link.href, tabindex="-1")= link.text

        .span3#desktop-sticky-price
          .text-right.price-text
            p.p4.price-prefix= data.startingAtText
            span.space !{ ' ' }
            span.p5.msrp= data.msrp
            span.p1.price
              strong.text-dark !{ data.priceUnit + productData.price }
              span.space !{ ' ' }

        .span2.m-span2.buy-btn
          +link( buyLink, [ "btn", "pull-right" ] )

