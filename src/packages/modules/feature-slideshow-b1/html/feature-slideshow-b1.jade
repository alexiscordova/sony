include ../../../common/html/jade-helpers.jade
+includeCSS('feature-slideshow-b1')
+includeJavascriptModule('feature-slideshow-b1')

//- Mixin for slides
mixin featureSlides(data)
  if data.submodules
    for slide in data.submodules
      slideData = locals.data( slide.data )
      +featureSlide( slideData )


mixin featureSlide( data )
  innerClasses = [ "fs-slide-inner" ]

  if !isSlideshowMode
    - innerClasses.push( "container" )

  .fs-slide.sony-fade-slide
    div(class=innerClasses)
      if data.img
        +iQBackgroundImage( data.img )
      +caption( data.caption )


mixin caption( caption )
  caption = caption ? caption : {}
  stat = caption.stat ? caption.stat : {}
  statValue = stat.value ? stat.value : "0.00"
  statUnit = stat.unit ? stat.unit : false
  isSuperScript = stat.superscript != null ? stat.superscript : false
  statDescription = caption.description ? caption.description : "Finder terminal vmware fusion ios simulator firefox nightly webkit"

  .caption
    div(class=isSlideshowMode ? "container" : false)
      .media.caption-inner
        div(class=[ "pull-left", "text-center", "stat-wrap", "js-even-col" ])
          .table-center-wrap.v-wrap
            .table-center
              span.t1-light.stat.value !{ statValue }
              if statUnit && isSuperScript
                sup
                  span.t1-light.stat.unit !{ statUnit }
              else if statUnit
                span.t1-light.stat.unit !{ statUnit }
        .media-body.caption-body.table-center-wrap.js-even-col
          .table-center
            p.t5-light.text-dark !{ statDescription }


mixin copyGrid( data )
  copyStyle = data.style ? data.style : "dark-text-trans-box"

  div(class=[ "grid", "no-grid-at-767", "relative", copyStyle ])
    .span6.box
      block


mixin copyBlock( data )
  titleClass = "t2"
  //- subtitleClass = "t6"
  bodyClass = "p1"
  linkClass = "lt3"

  +copyGrid( data )
    if data.title
      h2(class=titleClass) !{data.title}
    //- if data.subtitle
    //-   h3(class=subtitleClass) !{data.subtitle}
    if data.body
      p(class=bodyClass) !{data.body}
  if data.link
    .link
      linktextsize = data.link.type == "txt" ? linkClass : ""
      +link(data.link, [data.link.type, linktextsize])


//- Default mode to slideshow
isSlideshowMode = data.mode && data.mode != "editorial"
mode = data.mode ? data.mode : "slideshow"
mode = "fs-" + mode

mainElementClasses = [ mode, "fs-module" ]

crossfade = data.crossfade ? data.crossfade : false
threshold = data.threshold ? data.threshold : false
delay = data.delay ? data.delay : false
speed = data.speed ? data.speed : false

if data.variation && data.variation.background
  - mainElementClasses.push( data.variation.background )

//- Main section wrapper for slides
+mainElement( mainElementClasses )
  if data.backdrop
    +iQBackgroundImage( data.backdrop, 'update-always fs-backdrop' )
  .container.copy-grid
    +copyBlock( data )
  .fs-carousel-wrapper.sony-fade-wrapper
    .fs-carousel.sony-fade(data-crossfade=crossfade, data-delay=delay, data-threshold=threshold, data-speed=speed)
      +featureSlides( data )









