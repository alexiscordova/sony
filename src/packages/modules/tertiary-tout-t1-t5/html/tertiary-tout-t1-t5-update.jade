include ../../../common/html/jade-helpers.jade
+includeCSS('tertiary-t1-t5')
+includeJavascriptModule('tertiary-tout-t1-t5')

mixin copyblock(module)
  .tcc-copy
    if (module.title)
      p.p2
        strong= module.title

    if (module.bodyCopy)
      p.p4= module.bodyCopy

    if (module.articleLink)
      p.lt3
        a(href= module.articleLink) Read More

mixin socialButton(link, label)
  .social-btn
    a.btn.btn-small(href= link)= label


mixin article(type, data)

  if(type == "featured")
    +featured(data)
  else
    +default(data)


  +copyblock(data)

mixin default(data)
  .img-container
    +iQImage(data.image)

    if(data.mode == "event")
      +event(data.attendanceCount)

    if(data.mode == "news")
      +news(data.date)

mixin event(count)
  .attendance
    .details
      p.t3= count
      p.l3-light attending

mixin news(date)
  //- date
  p.l3-light= date

mixin featured(data)
  //- assumes there only ever be one image
  .featured-image.tcc-image(data-src-desktop= data.images[0].srcDesktop, data-src-tablet= data.images[0].srcTablet, data-src-phone= data.images[0].srcPhone, data-src-desktop-highres= data.images[0].srcDesktopHighRes, data-src-tablet-highres= data.images[0].srcTabletHighRes, data-src-phone-highres= data.images[0].srcPhoneHighRes)
  article
    .feature-copy.light-text-dark-box
      p.t5-light= data.title
      p.lt3
        a(href= data.articleLink) Read More

mixin expertQuote(module)
  .title.l3= module.title

  blockquote.bq3
    p= module.quote

  .credits
    .avatar
      +iQImage(module.images[0],'tcc-image')
    p.author.p4
      a(href= module.author.link)= module.author.name

mixin userQuote(module)
  .title.l3= module.title

  blockquote.bq3
    p= module.quote

  .credits
    .avatar
      +iQImage(module.images[0],'tcc-image')

    p.handle.p4
      a(href= module.author.link)= module.author.handle

    p.author.p4= module.author.name

mixin question(module)
  .credits
    .avatar
      +iQImage(module.images[0],'tcc-image')

    p.author.p4
      a(href= module.author.link)
        | #{module.author.handle}
      | #{module.title}

  blockquote.bq3
    p
      | #{module.question}

  p.lt3
    a(href= module.repliesLink)
      | See Replies

  .answer-btn
    a.btn.btn-small(href= module.answerLink)
      | Answer this Question

mixin twitter(module)
  blockquote.bq4
    p= module.quote

mixin facebook(module)
  .post-image
    +iQImage(module.images[0],'tcc-image')

  blockquote.post-copy.bq6
      p= module.postCopy
        a= module.postLink

mixin instagram(module)
  div.left
    div.tcc-image(data-src-desktop= module.images[1].srcDesktop, data-src-tablet= module.images[1].srcTablet, data-src-phone= module.images[1].srcPhone, data-src-desktop-highres= module.images[1].srcDesktopHighRes, data-src-tablet-highres= module.images[1].srcTabletHighRes, data-src-phone-highres= module.images[1].srcPhoneHighRes)
    div.tcc-image.last(data-src-desktop= module.images[2].srcDesktop, data-src-tablet= module.images[2].srcTablet, data-src-phone= module.images[2].srcPhone, data-src-desktop-highres= module.images[2].srcDesktopHighRes, data-src-tablet-highres= module.images[2].srcTabletHighRes, data-src-phone-highres= module.images[2].srcPhoneHighRes)
  div.right
    div.tcc-image(data-src-desktop= module.images[0].srcDesktop, data-src-tablet= module.images[0].srcTablet, data-src-phone= module.images[0].srcPhone, data-src-desktop-highres= module.images[0].srcDesktopHighRes, data-src-tablet-highres= module.images[0].srcTabletHighRes, data-src-phone-highres= module.images[0].srcPhoneHighRes)

mixin sonysVoiceTop(icon, meta)
  .icon-container
    .white-bg.fonticon-10-dot
    div(class= icon)

  if (meta)
    .meta
      p.p4
        span.user= meta.user
        span.timestamp= meta.timestamp

mixin sonysVoiceCenter(mode, module)
  .center-container
    case mode
      when "twitter"
        +twitter(module)
      when "facebook"
        +facebook(module)
      when "instagram"
        +instagram(module)

mixin sonysVoiceBottom(mode, module)
  case mode
    when "twitter"
      - label = "Follow Us on Twitter"
    when "facebook"
      - label = "Like Us on Facebook"
    when "instagram"
      - label = "Follow Us on Instagram"

  +socialButton( module.socialBtnLink, label )

mixin flickrContent(meta, images, btnLink, btnLabel)
  if (contentMode == "default")
    .top
      .icon-container
        .white-bg.fonticon-10-dot
        .left.fonticon-10-dot
        .right.fonticon-10-dot

      .meta.p4
        for info in meta
          if (info.user)
            span.user= info.user

          if (info.title)
            span= info.title

    .center
      .center-container
        .top-row
            - for (i = 0; i <= 2; i++) {
            if(images[i])
              div
                +iQImage(images[i],'tcc-image')
            -}
        .bottom-row
            - for (i = 3; i <= 5; i++) {
            if(images[i])
              div
                +iQImage(images[i],'tcc-image')
            -}
    .bottom
      +socialButton( btnLink, btnLabel )


//- START TCC MODULE
section.tcc-module.container.full-bleed-no-max
  for header in data.header
    .tcc-header-wrapper
      .container
        .tcc-header.grid
          .span6
            p.tcc-header-title.l1 #{header.title}
          .span6
            p.tcc-header-link.lt3
              a(href="#{header.link}") #{header.linkText}

    div#three-up
      div.tcc-carousel-wrapper
        div.tcc-carousel
          div.sony-carousel-slide
            .container
              .grid
                for module in data.contentBlocks
                  - type = module.type
                  - mode = module.mode
                  - contentBlocksClassNames = [type, mode, "sony-carousel-slide-children"]
                  .span4
                    div(class=contentBlocksClassNames)
                      case type
                        when "article"
                          +article(mode, module)

                        when "users-voice"
                          if (mode == "expert-quote")
                           +expertQuote(module)

                          if (mode == "user-quote")
                            +userQuote(module)

                          if (mode == "question")
                            +question(module)

                        when "sonys-voice"
                          .tcc-inner-container
                            .top
                            +sonysVoiceTop("fonticon-15-" + mode, module.meta)
        
                            .center
                            +sonysVoiceCenter(mode, module)
        
                            .bottom
                            +sonysVoiceBottom(mode, module)
      
                        when "flickr"
                          +flickrContent(module.meta, module.images, module.socialBtnLink, "View Set on Flickr")

         


































//- 888888b.          d8888  .d8888b.  888    d8P  888     888 8888888b.        8888888b.  8888888888 8888888888 
//- 888  "88b        d88888 d88P  Y88b 888   d8P   888     888 888   Y88b       888   Y88b 888        888        
//- 888  .88P       d88P888 888    888 888  d8P    888     888 888    888       888    888 888        888        
//- 8888888K.      d88P 888 888        888d88K     888     888 888   d88P       888   d88P 8888888    8888888    
//- 888  "Y88b    d88P  888 888        8888888b    888     888 8888888P"        8888888P"  888        888        
//- 888    888   d88P   888 888    888 888  Y88b   888     888 888              888 T88b   888        888        
//- 888   d88P  d8888888888 Y88b  d88P 888   Y88b  Y88b. .d88P 888              888  T88b  888        888        
//- 8888888P"  d88P     888  "Y8888P"  888    Y88b  "Y88888P"  888              888   T88b 8888888888 888  


//- mixin articleDefault(module)
//-   .img-container
//-     .img-wrap
//-       //- assumes there only ever be one image
//-       +iQImage(module.images[0],'tcc-image')

//- mixin articleNews(module)
//-   .img-container
//-     .img-wrap
//-       //- assumes there only ever be one image
//-       +iQImage(module.images[0],'tcc-image')
//-       p.news-date.l3-light= module.date

//- mixin articleEvent(module)
//-   //- assumes there only ever be one image
//-   .img-container.tcc-image(data-src-desktop= module.images[0].srcDesktop, data-src-tablet= module.images[0].srcTablet, data-src-phone= module.images[0].srcPhone, data-src-desktop-highres= module.images[0].srcDesktopHighRes, data-src-tablet-highres= module.images[0].srcTabletHighRes, data-src-phone-highres= module.images[0].srcPhoneHighRes)
//-     .attendance-count
//-       .details
//-         p.t3= module.attendanceCount
//-         p.l3-light attending

//- mixin articleFeatured(module)
//-   //- assumes there only ever be one image
//-   .featured-image.tcc-image(data-src-desktop= module.images[0].srcDesktop, data-src-tablet= module.images[0].srcTablet, data-src-phone= module.images[0].srcPhone, data-src-desktop-highres= module.images[0].srcDesktopHighRes, data-src-tablet-highres= module.images[0].srcTabletHighRes, data-src-phone-highres= module.images[0].srcPhoneHighRes)
//-   article
//-     .feature-copy.light-text-dark-box
//-       p.t5-light= module.title
//-       p.lt3
//-         a(href= module.articleLink) Read More

//- mixin expertQuote(module)
//-   .title.l3= module.title

//-   blockquote.bq3
//-     p= module.quote

//-   .credits
//-     .avatar
//-       +iQImage(module.images[0],'tcc-image')
//-     p.author.p4
//-       a(href= module.author.link)= module.author.name

//- mixin userQuote(module)
//-   .title.l3= module.title

//-   blockquote.bq3
//-     p= module.quote

//-   .credits
//-     .avatar
//-       +iQImage(module.images[0],'tcc-image')

//-     p.handle.p4
//-       a(href= module.author.link)= module.author.handle

//-     p.author.p4= module.author.name

//- mixin question(module)
//-   .credits
//-     .avatar
//-       +iQImage(module.images[0],'tcc-image')

//-     p.author.p4
//-       a(href= module.author.link)
//-         | #{module.author.handle}
//-       | #{module.title}

//-   blockquote.bq3
//-     p
//-       | #{module.question}

//-   p.lt3
//-     a(href= module.repliesLink)
//-       | See Replies

//-   .answer-btn
//-     a.btn.btn-small(href= module.answerLink)
//-       | Answer this Question

//- mixin twitter(module)
//-   blockquote.bq4
//-     p= module.quote

//- mixin facebook(module)
//-   .post-image
//-     +iQImage(module.images[0],'tcc-image')

//-   blockquote.post-copy.bq6
//-       p= module.postCopy
//-         a= module.postLink

//- mixin instagram(module)
//-   div.left
//-     div.tcc-image(data-src-desktop= module.images[1].srcDesktop, data-src-tablet= module.images[1].srcTablet, data-src-phone= module.images[1].srcPhone, data-src-desktop-highres= module.images[1].srcDesktopHighRes, data-src-tablet-highres= module.images[1].srcTabletHighRes, data-src-phone-highres= module.images[1].srcPhoneHighRes)
//-     div.tcc-image.last(data-src-desktop= module.images[2].srcDesktop, data-src-tablet= module.images[2].srcTablet, data-src-phone= module.images[2].srcPhone, data-src-desktop-highres= module.images[2].srcDesktopHighRes, data-src-tablet-highres= module.images[2].srcTabletHighRes, data-src-phone-highres= module.images[2].srcPhoneHighRes)
//-   div.right
//-     div.tcc-image(data-src-desktop= module.images[0].srcDesktop, data-src-tablet= module.images[0].srcTablet, data-src-phone= module.images[0].srcPhone, data-src-desktop-highres= module.images[0].srcDesktopHighRes, data-src-tablet-highres= module.images[0].srcTabletHighRes, data-src-phone-highres= module.images[0].srcPhoneHighRes)

//- mixin sonysVoiceTop(icon, meta)
//-   .icon-container
//-     .white-bg.fonticon-10-dot
//-     div(class= icon)

//-   if (meta)
//-     .meta
//-       p.p4
//-         span.user= meta.user
//-         span.timestamp= meta.timestamp

//- mixin sonysVoiceCenter(mode, module)
//-   .center-container
//-     case mode
//-       when "twitter"
//-         +twitter(module)
//-       when "facebook"
//-         +facebook(module)
//-       when "instagram"
//-         +instagram(module)

//- mixin sonysVoiceBottom(mode, module)
//-   case mode
//-     when "twitter"
//-       - label = "Follow Us on Twitter"
//-     when "facebook"
//-       - label = "Like Us on Facebook"
//-     when "instagram"
//-       - label = "Follow Us on Instagram"

//-   +socialButton( module.socialBtnLink, label )

//- mixin flickrContent(meta, images, btnLink, btnLabel)
//-   if (contentMode == "default")
//-     .top
//-       .icon-container
//-         .white-bg.fonticon-10-dot
//-         .left.fonticon-10-dot
//-         .right.fonticon-10-dot

//-       .meta.p4
//-         for info in meta
//-           if (info.user)
//-             span.user= info.user

//-           if (info.title)
//-             span= info.title

//-     .center
//-       .center-container
//-         .top-row
//-             - for (i = 0; i <= 2; i++) {
//-             if(images[i])
//-               div
//-                 +iQImage(images[i],'tcc-image')
//-             -}
//-         .bottom-row
//-             - for (i = 3; i <= 5; i++) {
//-             if(images[i])
//-               div
//-                 +iQImage(images[i],'tcc-image')
//-             -}
//-     .bottom
//-       +socialButton( btnLink, btnLabel )



//-   section(class=scrollerClassNames)
//-     div(class=bodyClassNames)
//-       for module in data.contentBlocks
//-         - contentType = module.type
//-         - contentMode = module.mode
//-         - contentBlocksClassNames = ["tcc-content-block","span4", contentType, contentMode]

//-         div(class=contentBlocksClassNames, data-tcc-content-type= contentType, data-tcc-content-mode= contentMode)
//-           case contentType
//-             when "article"

//-               //- if there is a title and a featured image
//-               if(contentMode == "featured")
//-                 +articleFeatured(module)
              
//-               else
//-                 if(contentMode == "default")
//-                   +articleDefault(module)
//-                 if(contentMode == "news") && (module.date)
//-                   +articleNews(module)
//-                 if(contentMode == "event") && (module.attendanceCount)
//-                   +articleEvent(module)

//-                 +copyblock(module)
//-             when "users-voice"
//-               if (contentMode == "expert-quote")
//-                 +expertQuote(module)

//-               if (contentMode == "user-quote")
//-                 +userQuote(module)

//-               if (contentMode == "question")
//-                 +question(module)

//-             when "sonys-voice"
//-               .tcc-inner-container
//-                 .top
//-                   +sonysVoiceTop("fonticon-15-" + contentMode, module.meta)
//-                 .center
//-                   +sonysVoiceCenter(contentMode, module)
//-                 .bottom
//-                   +sonysVoiceBottom(contentMode, module)
//-             when "flickr"
//-               mixin flickrContent(module.meta, module.images, module.socialBtnLink, "View Set on Flickr")

//- END TCC MODULE


