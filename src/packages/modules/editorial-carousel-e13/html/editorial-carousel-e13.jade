include ../../../common/html/jade-helpers.jade
+includeCSS('editorial-carousel-e13')
+includeJavascriptModule('editorial-carousel-e13')

.ec-module
  .container
    .grid
      h3.t3.ec-title= data.title
      p.p3.ec-subtitle= data.subtitle

  .m-container
    .sony-carousel-wrapper
      .sony-carousel

        tilesPerSlide = 4
        slides = [ [], [], [], [], [], [] ]
        each tile, i in data.tiles
          index = Math.floor( i / tilesPerSlide )
          - slides[ index ].push( tile )

        each slide in slides
          if slide.length > 0
            .sony-carousel-slide
              .container
                .slimgrid
                  each tile in slide
                    .sony-carousel-slide-children.span3
                      a.ec-tile(href=tile.link ? tile.link : '#')
                        if tile.headline
                          .headline-counter
                            span.p3.count
                              strong= tile.headline.currentPlayers
                            | &nbsp;
                            span.p5
                              strong= tile.headline.currentPlayersText
                        .wrapper-image
                          if tile.headline
                            .cover.ghost-center-wrap
                              .ghost-center
                                span.picto-play
                                  span.bg-for-icon
                                  span.picto
                                span.p3.cta
                                  strong= tile.callToAction
                          else
                            .cover.light
                          +iQImage( tile.img )
                        .infos
                          p.p4.tile-title
                            strong= tile.infos.title
                          p.p4.total-players
                            strong= tile.infos.totalPlayers
                            | &nbsp;
                            span= tile.infos.playersText
