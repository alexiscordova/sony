include ../../../common/html/jade-helpers.jade
+includeCSS('feature-slideshow')
+includeJavascriptModule('feature-slideshow')

//- Mixin for slides
mixin featureSlides(data)
  if data.submodules
    for slide in data.submodules
      slideData = locals.data( slide.data )
      +featureSlide( slideData )


mixin featureSlide( data )
  .fs-slide.sony-carousel-slide
    if data.img
      +iQBackgroundImage( data.img )
    +caption( data.caption )


mixin caption( caption )
  caption = caption ? caption : {}
  statValue = caption.stat && caption.stat.value ? caption.stat.value : "0.00"
  statUnit = caption.stat && caption.stat.unit ? caption.stat.unit : "px"
  statDescription = caption.description ? caption.description : "Finder terminal vmware fusion ios simulator firefox nightly webkit"
  toneColor = caption.stat && caption.stat.color ? caption.stat.color : "red"

  .caption.fade
    .media
      div(class=[ "pull-left", "text-center", "tone", "tone-" + toneColor ])
        .table-center-wrap.v-wrap
          .table-center
            .t4.stat.value !{ statValue }
            .p4.stat.unit !{ statUnit }
      .media-body.table-center-wrap
        .table-center
          p.p3 !{ statDescription }


mixin copyGrid( data )
  copyStyle = data.style ? data.style : "dark-text-trans-box"

  div(class=[ "grid", "no-grid-at-767", "copy-grid", copyStyle ])
    .span6.box.js-copy.fade
      block


mixin copyBlock( data )
  titleClass = "t3-bold"
  subtitleClass = "t7"
  bodyClass = "p3"
  linkClass = data.mode == "full" ? "lt2" : "lt3"

  +copyGrid( data )
    if data.title
      h2(class=titleClass) !{data.title}
    if data.subtitle
      h3(class=subtitleClass) !{data.subtitle}
    if data.body
      p(class=bodyClass) !{data.body}
  if data.link
    .link
      linktextsize = data.link.type == "txt" ? linkClass : ""
      +link(data.link, [data.link.type, linktextsize])
  else if data.addon
    e = { "locals" : locals, "data" : data.addon }
    !{ locals.partial('packages/modules/addon/html/addon.jade', e) }


//- Main section wrapper for slides
+mainElement( [ "fs-module", "animation-pending" ] )
  .container
    +copyBlock( data )
    .fs-carousel-wrapper.sony-carousel-wrapper
      .fs-carousel.sony-carousel
        +featureSlides( data )









